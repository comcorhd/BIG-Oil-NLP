UNIVERSIDADE ESTADUAL DE CAMPINAS FACULDADE DE ENGENHARIA MECÂNICA DEPARTAMENTO DE ENGENHARIA DE PETRÓLEO   DISSERTAÇÃO DE MESTRADO  Desenvolvimento de Controladores Inteligentes para o Sistema VASPS  Autor: André Veras de Melo Orientador: Prof. Dr. José Ricardo P. Mendes   ____________________________________________________ Prof. Dr. José Ricardo P. Mendes Universidade Estadual de Campinas   ____________________________________________________ Dr. Valdir Estevam Petrobras   ____________________________________________________ Profa. Dra. Adriane Beatriz de Souza Serapião Universidade Estadual Paulista   ____________________________________________________ Prof. Dr. Sergio N. Bordalo Universidade Estadual de Campinas  Campinas, 17 de Novembro de 2008  ii   Agradecimentos        Agradeço à minha família pelo suporte inquestionável, incondicional, tornando a busca pelo conhecimento não apenas possível como também prazerosa. Meu profundo reconhecimento à minha mãe que tanto chorou de saudade, ao meu pai que tanto batalhou dignamente, à minha querida avozinha que tanto rezou e esplhou a bondade no mundo dos homens e ao meu irmão caçula que me manteve ligado aos melhores momentos de minha vida, residentes em minha memória eternamente. Agradeço também à Raquel, indistinguível em sua força, pelo vasto suporte emocional, pela agradável companhia e pelas lições ímpares de determinação.  
 Saúdo a Prof.ª Adriane pelo trabalho em equipe e pelo esforço realizado no auxílio à minha formação científica. Agradeço ao Prof. José Ricardo pelas oportunidades e compreensão, bem como por ter representado um melhor profissional que qualquer outro no Programa. 
 Agradeço à ANP pelo suporte financeiro. 
 Agradeço a Deus pela bela vida que me deu. 
  iii   Resumo  O  cenário  de  produção  em  campos  de  petróleo  tem  apresentado  nos  anos  recentes condições  cada  vez  mais  severas  e  complexas.  Muitas  descobertas  em  regiões  de  maior profundidade e  com formações  geológicas mais  diversas tem demandado soluções tecnológicas que beiram a fronteira do conhecimento, de forma que a produção tem andado lado a lado com o desenvolvimento de novas tecnologias. Assim, a necessidade do aumento do fator de recuperação para  justificar  os  investimentos  nestas  condições  são  desafios  presentes  nos  novos  projetos  de poços, de elevação artificial e de recuperação secundária, o que vem levando ao desenvolvimento de soluções submarinas e integradas, como o caso do separador submarino VASPS. No entanto, o controle de processos contínuos, como a vazão de produção, a temperatura e a pressão, ainda é tratado  da  mesma  forma  que  era  feito  quando  do  começo  da  produção  offshore  em  campos  de óleo leve. 
Este  trabalho  visa  permitir  a  melhoria  de  desempenho  operacional  do  sistema  VASPS, mensurada  pelos  custos  totais  gerados  pelo  sistema  e  pelos  proventos  gerados  na  produção  de óleo e gás, bem como propor novas metodologias de sistemas de controle para sistemas similares, utilizando tecnologias recentes de controle inteligente. Vale ressaltar que o problema de controle é  atualmente  tratado  em  campo  com  soluções  de  automação,  sem  o  estudo  devido,  causando danos  a  equipamentos  que  exigem  intervenções  custosas.  Os  controladores  propostos  neste trabalho  visam  minimizar  os  esforços  aos  quais  estes  atuadores  estão  expostos,  provendo  uma maior vida útil às tecnologias de elevação artificial de alta vazão e podendo ser aplicado de forma modular a outros processos relacionados. 
 Palavras Chave: Minimização  do  esforço  de  controle,  BCS,  VASPS,  Fuzzy,  Lógica  Nebulosa,  Controle Inteligente, Controle Nebuloso, Produção Submarina, Separação Submarina. 
 iv   Abstract  The oil production scenario has been becoming more and more complex and severe in the recent  years.  Plenty  discoveries  in  deeper  and  more  diversified  formations  have  been  requiring cutting  edge  technological  solutions.,  such  that  the  production  has  been  deployed  side  by  side with  the  technological  development.  Thus,  the  need  for  the  enhancement  of  the  recuperation factor in order to justify the investment in these new conditions are actual challenges within the recent design of wells, artificial lift systems and secondary recuperation projects, which has been leading  to  the  development  towards  subsea  integrated  solutions,  such  as  the  VASPS  subsea separator. However, the  control of  continuous processes, i.e. flow, temperature  and pressure, is still dealt the same way it was done when the offshore production in light oil fields began. 
This  work  envisions  the  enhancement  of  the  operational  performance  of  the  VASPS system, measured as a function of the total costs implied by the technology, altogether with the receipts generated in the gas and oil production, as well as the delivering of new methodologies for  the  design  of  controllers  using  late  technologies  of  intelligent  control.  Also,  it  is  worth recalling  that  nowadays  the  control  task  is  dealt  with  automation  solutions,  without  the  proper handling,  causing  failures  in  equipments  that  require  expensive  rig  intervention  for  workover. 
The controllers proposed in this work are designed to minimize the control effort, to which these actuators  are  exposed,  providing  extended  lifetime  to  the  high  level  production  artificial  lift technologies, being also able to be applied to other related processes in a modular form. 
 Keywords:  Minimization  of  control  effort,  ESP,  VASPS,  Fuzzy,  Intelligent  Control,  Fuzzy  Control, Sebsea Production, Subsea Separation. 
 v Sumário Lista de Figuras ..............................................................................................................................vii Lista de Tabelas................................................................................................................................x 
Nomenclatura ..................................................................................................................................xi 
Introdução..................................................................................................................................1 
1 Organização do Trabalho .........................................................................................2 
2  Panorama Tecnológico ..............................................................................................................4 
Sistemas de Produção Offshore................................................................................4 
Sistema VASPS........................................................................................................7 
3  Modelagem ..............................................................................................................................12 
Escoamento ............................................................................................................12 
Escoamento de entrada...................................................................................12 
Escoamento interno ao vaso...........................................................................14 
Elevação Artificial usando BCS.............................................................................16 
Equacionamento do Sistema VASPS.....................................................................19 
4  Fundamentos Teóricos.............................................................................................................22 
Introdução à Teoria de Conjuntos Nebulosos ........................................................22 
Nebulização....................................................................................................23 
Base de Regras do tipo Mamdani...................................................................28 
Desnebulização para sistemas Mamdani........................................................34 
Sistemas do tipo Sugeno ................................................................................37 
Introdução à Teoria de Controle.............................................................................38 
Controle PID ..................................................................................................43 
Controle Nebuloso..........................................................................................44 
5  Metodologia.............................................................................................................................47 
Controle voltado ao Desempenho ..........................................................................47 
Controle Híbrido Fuzzy-PID..........................................................................48 
Controle voltado à Minimização do Esforço..........................................................57 
Monitoramento da Média Móvel....................................................................58 
Classificador de Regiões ................................................................................62 
Classificador com Média................................................................................64 
Histerese com Auto-ajuste .............................................................................68 
6  Resultados................................................................................................................................73 
Solução pelo Desempenho .....................................................................................73 
Fuzzy-PID ......................................................................................................73 
Soluções pelo Esforço de Controle ........................................................................76 
Monitoramento da Média Móvel....................................................................76 
Classificador por Regiões...............................................................................79 
Classificador com Média................................................................................81 
Histerese com Auto-ajuste .............................................................................84 
Avaliação de resultados..................................................................................92 
7  Conclusões...............................................................................................................................95 
Referências Biblográficas ..............................................................................................................99 
Apêndice A...................................................................................................................................103 Apêndice B...................................................................................................................................114 Apêndice C...................................................................................................................................129 1.1 
2.1 
2.2 
3.1 
3.1.1 
3.1.2 
3.2 
3.3 
4.1 
4.1.1 
4.1.2 
4.1.3 
4.1.4 
4.2 
4.2.1 
4.2.2 
5.1 
5.1.1 
5.2 
5.2.1 
5.2.2 
5.2.3 
5.2.4 
6.1 
6.1.1 
6.2 
6.2.1 
6.2.2 
6.2.3 
6.2.4 
6.2.5 
 vi Relação de Figuras Figura 2.1: Representação da instalação do VASPS no sistema de produção (fora de escala). ......7 
Figura 2.2. Diagrama esquemático do sistema VASPS. ..................................................................8 
 Figura  3.1.  Modelo  preliminar  da  vazão  de  entrada  de  líquido  do  Gerador  de  Golfadas (comunicação direta, Teixeira, 2006).............................................................................................13 
Figura 3.2. Comparativo entre o segundo e terceiro geradores de golfada. ...................................14 
Figura 3.3. Esquemático do escoamento das fases líquido e gás no VASPS.................................15 
Figura 3.4. Exemplo de curvas de bomba BCS para diferentes freqüências de acionamento. ......17 
Figura  3.5.  Curvas  da  bomba  BCS  do  VASPS  para  diferentes  freqüências  de  acionamento (comunicação direta, Teixeira, 2006).............................................................................................18 
Figura 3.6. Modelo para a curva da bomba BCS (comunicação direta, Teixeira, 2006). ..............19 
 Figura 4.1 Sistema nebuloso genérico, adaptado de Riid (2002)...................................................23 
Figura 4.2. Exemplo de três possíveis funções de pertinência para o conjunto nebuloso Baixo. ..24 
Figura 4.3. Representação da variável nebulosa Nível da Piscina.................................................25 
Figura 4.4. Representação da variável nebulosa Variação do Nível da Piscina............................26 
Figura 4.5. Nebulização da variável de entrada Nível da Piscina..................................................27 
Figura 4.6. Nebulização da variável de entrada Variação do Nível da Piscina.............................27 
Figura 4.7. Representação da variável de saída ativada pelas entradas exemplificadas. ...............30 
Figura 4.8. Representação da aplicação da Base de Regras para uma entrada dada......................31 
Figura 4.9. Processo de conversão de variáveis exemplo do VASPS para o domínio nebuloso. ..34 
Figura 4.10. Técnicas de desnebulização aplicadas ao exemplo, com o valor de saída destacado.
........................................................................................................................................................36 
Figura 4.11. Representação de um sistema em malha aberta.........................................................38 
Figura 4.12. Diagrama de blocos para um sistema em malha fechada. .........................................39 
Figura 4.13. Diagrama de blocos com o detalhamento da planta do sistema VASPS. ..................42 
Figura 4.14. Sinal de resposta com o destaque dos parâmetros de desempenho. ..........................42 
Figura 4.15. Diagrama esquemático de controle PID convencional. .............................................43 
Figura 4.16. Processo controlador por sistema nebuloso com entradas Erro e Derivada do Erro. 45 Figura 4.17. Exemplo de aplicação de sistema com controle nebuloso.........................................46 
 Figura 5.1. Diagrama de Blocos do Controlador PID. ...................................................................49 
Figura  5.2.  Diagrama  de  blocos  do  controlador  Supervisório,  adaptado  de  Van  Nauta  Lemke  e De-Zhao (1985). .............................................................................................................................50 
Figura 5.3. Detalhamento do controlador FPID do Modelo Supervisório. ....................................51 
Figura 5.4. Diagrama de blocos do controlador FPID. ..................................................................51 
Figura 5.4. Conjuntos nebulosos para o controlador FPID. ...........................................................53 
Figura 5.6. Comportamento desejado para o sistema voltado à redução do esforço de controle. .58 
Figura 5.7. Diagrama de blocos para o controlador Média Móvel aplicado ao VASPS................59 
Figura 5.8. Funções de pertinência para o controlador Média Móvel aplicado ao VASPS...........60 
Figura 5.6. Ilustração da função utilizada pelo Classificador. .......................................................62 
Figura  5.10.  Diagrama  de  blocos  para  o  controlador  Classificador  de  Regiões  aplicado  ao VASPS. ..........................................................................................................................................63 
Figura 5.6. Conjuntos nebulosos de entrada para o Classificador de Regiões...............................63 
 vii Figura 5.12. Diagrama de blocos para o controlador Classificador com Média. ...........................65 
Figura 5.13. Funções de pertinência para o controlador Classificador com Média. ......................66 
Figura 5.14. Detalhamento do filtro de sinal aplicado entre o controlador e o atuador. ................67 
Figura 5.15. Diagrama de blocos do controlador Histerese com Auto-ajuste................................68 
Figura 5.16. Esquemático ilustrativo do comportamento da histerese...........................................70 
Figura 5.17. Diagrama esquemático do controlador Histerese com Auto-ajuste...........................72 
 Figura 6.1. Comparativo da resposta e do sinal de controle entre o PID e o FPID........................74 
Figura 6.2. Sinal de controle e comportamento das constantes entre o PID e o FPID...................75 
Figura 6.3. Curvas de resposta para o controlador Média Móvel, com nível inicial em 30 metros.
........................................................................................................................................................78 
Figura 6.4. Curvas de resposta para o controlador Média Móvel, com nível inicial em 60 metros.
........................................................................................................................................................79 
Figura 6.5. Resposta para o Classificador por Regiões para o nível inicial de 30 metros. ............80 
Figura 6.6. Resposta para o Classificador por Regiões para o nível inicial de 60 metros. ............81 
Figura  6.7.  Resposta  e  Sinal  de  Controle  para  controlador  Classificador  com  Média,  com referência constante........................................................................................................................82 
Figura  6.8.  Resposta  e  Sinal  de  Controle  para  controlador  Classificador  com  Média,  com referência variável. .........................................................................................................................83 
Figura 6.9. Resposta e Sinal de Controle para controlador Classificador com Média, com o último gerador de golfadas, de freqüência e amplitude variáveis. ............................................................84 
Figura 6.10. Esquemático da histerese adaptado para o caso VASPS. ..........................................85 
Figura 6.11. Resposta para o controlador Histerese com Auto-ajuste, com referência constante. 86 Figura 6.12. Resposta para o controlador Histerese com Auto-ajuste, com referência variável. ..87 
Figura 6.13. Simulação 3, teste de uZ, apresentando as curvas 3.1 e 3.2. ......................................89 
Figura 6.14. Curvas para as simulações de teste do mecanismo de auto-ajuste. ...........................91 
 Figura A.1. Diagrama de Blocos do Controlador PI. ...................................................................104 Figura A.2. Diagrama de Blocos do Controlador PI com derivada. ............................................104 Figura A.3. Diagrama de Blocos do Controlador PD. .................................................................105 Figura A.4. Diagrama de blocos do controlador FPID. ...............................................................105 Figura A.5. Conjuntos Nebulosos para o controlador FPID. a) Variáveis de entrada (x, ix, cx). b) Variação da constante KP, ∆P. c) Variação das constantes KI e KD, ∆I e ∆D. ..........................106 Figura A.6. Diagrama de blocos do controlador FPI. ..................................................................106 Figura A.7. Conjuntos Nebulosos para o controlador FPI. a) Erro relativo, x. b) Integral relativa do erro, ix.. c) Variação da constante KP, ∆P. d) Variação da constante KI, ∆I. ........................107 Figura A.8. Diagrama de blocos do controlador FPI com derivada.............................................107 Figura A.9. Conjuntos Nebulosos para o controlador FPID. a) Variáveis de entrada (x, ix, cx). b) Variação da constante KP, ∆P. c) Variação da constante KI, ∆I. ................................................108 Figura A.10. Diagrama de blocos do controlador FPD................................................................108 Figura A.11. Conjuntos Nebulosos para o controlador FPD. a) Variáveis de entrada (x, ix, cx). b) Variação da constante KP, ∆P. c) Variação da constante KD, ∆D. .............................................109 Figura A.12. Comparativo da resposta e do sinal de controle entre o PID e o FPID...................110 Figura A.13. Sinal de controle e comportamento das constantes entre o PID e o FPID..............111 Figura A.14. Comparativo da resposta e do sinal de controle entre o PD e o FPD. ....................112 Figura A.15. Comparativo da resposta e do sinal de controle entre o PI com derivada e o FPI com derivada. .......................................................................................................................................113  viii Figura A.16. Comparativo da resposta e do sinal de controle entre o PI e o FPI. .......................113  Figura B.1. Sinal do Gerador de Golfadas para o tempo de 20000 segundos..............................115 Figura B.2. Simulação A, teste de n, apresentando as curvas A11 e A12. ..................................118 Figura B.3. Simulação A, teste de n, apresentando as curvas A21 e A22. ..................................118 Figura B.4. Simulação B, teste de f, apresentando as curvas B1, B2 e B3. .................................119 Figura B.5. Simulação C, teste de h, apresentando as curvas C1, C2 e C3. ................................120 Figura B.6. Simulação 1, teste de h, apresentando a curva 1.1. ...................................................122 Figura B.7. Simulação 1, teste de h, apresentando a curva 1.2. ...................................................123 Figura B.8. Simulação 1, teste de h, apresentando a curva 1.3. ...................................................124 Figura B.9. Simulação 2, teste de f, apresentando as curvas 2.1 e 2.2. ........................................125 Figura B.10. Simulação 3, teste de f, apresentando as curvas 3.1 e 3.2. ......................................126  Figura  C.1.  Planta  do  controle  de  nível.  No  bloco  do  controle  de  nível,  Planta  Nível,  fica  a equação da variação do nível, Equação (3.4). No bloco da bomba, fica sua curva, Equação (3.1). 
No bloco de vazão de entrada, Qoe, fica o gerador de golfadas. .................................................130 Figura C.2. Primeiro gerador de golfadas. ...................................................................................130 Figura C.3. Segundo gerador de golfadas – amplitude variável. .................................................130 Figura C.4. Componente do segundo e terceiro  gerador de  golfadas – sinal em onda para  gerar amplitude variável. .......................................................................................................................130 Figura C.5. Terceiro gerador de golfadas – amplitude e freqüência variáveis. Detalhe do gerador de sinais para teste do mecanismo de auto-ajuste. .......................................................................131 Figura C.6. Malha de controle do controlador Fuzzy PID supervisor..........................................131 Figura C.7. Controlador Fuzzy PID Supervisor. ..........................................................................131 Figura C.8. Malha de controle do controlador Monitoramento da Média Móvel........................132 Figura C.9. Malha de controle do controlador Classificador por Regiões. ..................................132 Figura C.10. Controlador Classificador por Regiões. ..................................................................132 Figura C.11. Malha de controle do controlador Histerese com Auto-ajuste. Detalhe dos geradores de sinal de referência....................................................................................................................133 Figura  C.12.  Controlador  Histerese  com  auto-ajuste.  Detalhes  do  classificador,  da  histerese,  da parametrização da rotação de transição e dos filtros de saída......................................................133 Figura C.13. Componente do controlador Histerese com Auto-ajuste – parametrização da rotação de transição...................................................................................................................................133 Figura C.14. Componente do controlador Histerese com Auto-ajuste – mecanismo de auto-ajuste.
......................................................................................................................................................134 Figura  C.15.  Componente  do  mecanismo  de  auto-ajuste  –  monitoramento  da  média  móvel  do sinal de controle. ..........................................................................................................................134   ix Relação de Tabelas Tabela 4.1. Aplicação da Base de Regras a uma entrada ativa. .....................................................30 
Tabela 4.2. Implementações mais comuns de operadores lógicos E e OU. ...................................32 
Tabela 4.3. Aplicação da Base de Regras usando entradas associativas........................................33 
Tabela 4.4. Aplicação da Base de Regras Sugeno. ........................................................................38 
 Tabela 5.1. Representação dos conjuntos nebulosos para a base de regras. ..................................56 
Tabela 5.2. Base de regras do controlador supervisor FPID ..........................................................56 
Tabela 5.3. Base de regras do controlador supervisor FPID ..........................................................57 
Tabela 5.4. Base de regras do controlador Monitoramento da Média Móvel................................61 
Tabela 5.3. Aplicação da Base de Regras usando entradas associativas........................................61 
Tabela 5.6. Base de regras do controlador Classificador por Regiões. ..........................................64 
Tabela 5.7. Base de regras do controlador Classificador com Média adaptado ao VASPS. .........66 
 Tabela  6.1.  Planejamento  dos  experimentos  computacionais  para  verificação  da  relação  entre parâmetros, sinal de controle e resposta do sistema.......................................................................88 
Tabela 6.2. Comparação dos controladores voltados à minimização do esforço...........................93 
 Tabela A.1. Base de regras do controlador supervisor FPID .......................................................106 Tabela A.2. Base de regras do controlador supervisor FPI..........................................................107 Tabela A.3. Base de regras do controlador supervisor FPI com derivada ...................................108 Tabela A.4. Base de regras do controlador supervisor FPD ........................................................109  Tabela  B.1.  Planejamento  dos  experimentos  computacionais  para  verificação  da  relação  entre parâmetros, sinal de controle e resposta do sistema.....................................................................116 Tabela B.2. Explanação dos parâmetros de simulação. ...............................................................117   x Nomenclatura Letras Latinas ce    mudança no erro ce(T)    mudança no erro discretizada cx    mudança relativa normalizada do erro cx(T)    mudança relativa normalizada do erro discretizado de    diâmetro externo da piscina na região interna ao VASPS. 
di   diâmetro interno da piscina na região interna ao VASPS. 
D0    Constante Derivativa Inicial, em uso no controlador PID Df    Variação percentual a ser impressa na constante derivativa e(t) ou e sinal de erro e(T)    sinal de erro discretizado  ou  e   sinal de erro médio )t(ef    freqüência de acionamento da bomba BCS fS   função de saturação fLR   função de limitação de rampa fQ    função de quantização h   nível de líquido Hr    Profundidade do reservatório na formação até a superfície HS   Profundidade de referência da superfície Hwh    Profundidade da cabeça do poço no leito marinho até a superfície HBCS   Profundidade da bomba BCS no poço falso até a superfície ie    integral do erro ie(T)   integral do erro discretizada ix    integral relativa normalizada do erro ix(T)   integral relativa normalizada do erro discretizado I0     Constante Integral Inicial, em uso no controlador PID If   Variação percentual a ser impressa na constante integral Kp ou P  Constante proporcional, ou ganho proporcional, do controlador PID  xi Kd ou D Constante derivativo, ou ganho derivativo, do controlador PID Ki ou I   Constante integral, ou ganho integral, do controlador PID Ke    Constante de ganho de entrada de erro do controlador supervisor Fuzzy-PID Kie   Constante de ganho de entrada da integral do erro do supervisor Fuzzy-PID Kce   Constante de ganho de entrada da mudança no erro do supervisor Fuzzy-PID n   Número de pontos utilizados para realizar a média móvel de um sinal N0    nível inicial da piscina do VASPS, durante a partida do sistema P(s)    Função de transferência qualquer de uma planta não-linear P0    Constante Proporcional Inicial, em uso no controlador PID Pf    Variação percentual a ser impressa na constante proporcional Pr    Pressão estática do reservatório Pin   Pressão de entrada do fluido multifásico no VASPS Pout   Pressão de saída de líquido bombeado pelo BCS no VASPS •oeQ    vazão de entrada do VASPS, impressa pelo escoamento multifásico do poço •osQ    vazão de saída do VASPS, impressa pela bomba BCS r(t) ou r  sinal de referência, ou setpoint r(T)    sinal de referência, ou setpoint, discretizado s   variável de Laplace Treação    Tempo de reação Testab   Tempo de estabilização u(t) ou u sinal de controle, ou esforço de controle u(T)   sinal de controle, ou esforço de controle discretizado  ou  u   sinal de controle médio  )t(uuPB   valor  constante  do  sinal  de  controle  para  operação  no  entorno  do  valor  de  pertinência positiva alta (‘Positive Big’) no controlador Histerese com Auto-Ajuste uPS   valor  constante  do  sinal  de  controle  para  operação  no  entorno  do  valor  de  pertinência positiva baixa (‘Positive Small’)no controlador Histerese com Auto-Ajuste uZ    valor constante do sinal de controle para operação no entorno do valor de pertinência Zero no controlador Histerese com Auto-Ajuste uNS   valor  constante  do  sinal  de  controle  para  operação  no  entorno  do  valor  de  pertinência negativa baixa (‘Negative Small’) no controlador Histerese com Auto-Ajuste  xii uNB    valor  constante  do  sinal  de  controle  para  operação  no  entorno  do  valor  de  pertinência negativa alta (‘Negative Big’) no controlador Histerese com Auto-Ajuste VL   Volume de Líquido x   erro relativo normalizado x(t)    sinal de entrada do sistema x(T)   erro relativo normalizado discretizado y(t) ou y sinal de saída do sistema y(T)   sinal de saída do sistema discretizado Letras Gregas ∆e   derivada do erro ∆D   Variação na constante derivativa ∆I    Variação na constante integral ∆P   Variação na constante proporcional ∆PBCS    Energia de pressão adicionada pela bomba BCS ao fluido bombeado µ(t)    sinal de pertinência atribuído para o erro como saída do Classificador )t(µ     sinal de pertinência média  µA(x)    função de pertinência do conjunto nebuloso A na variável x µB(x)    função de pertinência do conjunto nebuloso B na variável x µ1 e µ2   valores de transição entre regiões de trabalho para a histerese de subida no controlador Histerese com Auto-Ajuste. 
δ   intervalo de histerese. 
Siglas BCS   Bombeio Centrífugo Submerso FT   Função de Transferência FPID     Controlador supervisor Fuzzy PID LI    Limite Inferior de estabilidade para o nível de líquido no VASPS LS   Limite Superior de estabilidade para o nível de líquido no VASPS PID    Proporcional-Integral-Derivativo  xiii PI    Proporcional-Integral PD   Proporcional-Derivativo rsl    rising slew rate, inclinação da rampa de aceleração máxima do atuador fsl    falling slew rate, inclinação da rampa de desaceleração máxima do atuador SP   valor instantâneo do sinal de referência VASPS  Vertical Annular Separation and Pumping System   xiv     Capítulo 1  1  Introdução O  sistema  de  separação  submarina  vertical  VASPS  (vertical  annular  separation  and pumping system), que permite separar ainda no leito marinho as fases líquida e gasosa do fluido produzido  em  poços  de  petróleo,  foi  introduzido  com  sucesso  no  Brasil,  contribuindo  com aumentos significativos de produção conforme reportado por do Vale et al. (2002). No entanto, a tecnologia de elevação artificial presente no sistema – uma bomba BCS – apresentou dificuldades operacionais em seu sistema de controle, conforme Peixoto et al. (2005), devido ao acionamento imposto na bomba, que encurtou sua vida útil. 
Diferentemente da indústria de manufatura, onde processos em batelada são rigorosamente controlados para seguir uma dada trajetória, ou qualquer outro sinal de referência, os processos contínuos, como controle de vazão, temperatura ou pressão, não necessitam de acompanhamento tão próximo do sinal de referência, mas sim de minimizar o desgaste do atuador, maximizando sua  vida  útil  através  do  tratamento  do  sinal  de  controle,  devido  ao  alto  custo  que  o  atuador representa  no  processo.  Em  um  sistema  submarino  como  o  VASPS,  uma  intervenção  para manutenção da bomba BCS (Bombeio Centrífugo Submerso), conforme reportado por Peixoto et al. (2005), implica em elevados custos, que, caso não minimizados, podem inviabilizar a solução. 
Neste contexto o objetivo deste trabalho é aplicar a Teoria de Controle à opção de elevação artificial  de  BCS  usada  no  sistema  VASPS,  objetivando  a  viabilização  da  tecnologia  e  melhor gerenciando  o  comportamento  do  sistema.  Com  isso,  obtém-se  também  uma  ferramenta  de previsão e simulação do sistema, resultado do uso do software Simulink®, disponibilizado como parte integrante do software Matlab®, que permite a construção de sistemas unidimensionais para a simulação de resultados baseados em uma modelagem voltada para sistemas de controle. Esta  1 ferramenta  de  simulação  pode  então  ser  usada  para  o  planejamento  da  produção  e  mesmo  o desenvolvimento de técnicas mais eficientes de operação. Esta última característica do sistema é reforçada pelo uso de técnicas de Inteligência Artificial, que permitem ainda o desenvolvimento de uma interface de operação que facilita a interpretação do sistema, através do uso das mesmas variáveis que são usados na leitura dos sinais monitorados em campo. 
1.1  Organização do Trabalho Este trabalho está organizado em sete capítulos com a seguinte disposição: •  O  Capítulo  2  posiciona  este  trabalho  no  cenário  histórico  do  desenvolvimento  de tenologias submarins, introduzindo detalhes sobre o objeto do estudo, o sistema VASPS; •  O  Capítulo  3  aprofunda  os  detalhes  acerca  do  VASPS,  apresentando  a  modelagem  e  o equacionamento dos componentes principais do sistema. Neste capítulo são realizadas as considerações  que  delimitam  o  escopo  da teoria  desenvolvida  no trabalho, contextualizando também a problemática de controle; •  O  Capítulo  4  apresenta  os  fundamentos  teóricos  da  Teoria  de  Controle,  introduzindo alguns conceitos essenciais usados no desenvolvimento de controladores, que devem ser suficientes  para  o  entendimento  das  técnicas  desenvolvidas  ao  longo  do  trabalho.  O Capítulo  possui  uma  seção  para  tratar  da  Lógica  Nebulosa,  outra  para  a  Teoria  de Controle  Moderno  e  conclui  com  a  fusão  das  duas,  apresentando  o  Controle  Nebuloso, usando  em  todos  eles  exemplos  relacionados  aos  conceitos  do  Sistema  VASPS trabalhados no capítulo anterior; •  No Capítulo 5 as metodologias de síntese de controladores são apresentadas no contexto das  duas  principais  estratégias  de  controle  adotadas.  A  primeira  segue  o  conceito  de melhoria de desempenho do sinal de resposta, uma tendência dos controladores clássicos, enquanto que a segunda  trata da minimização do esforço de controle propriamente dito, que  foca  mais  diretamente  o  objetivo  deste  trabalho.  Modelos  são  apresentados  e discutidos, sem a apresentação dos resultados; •  No  Capítulo  6  são  simulados  os  resultados  para  os  casos  propostos.  Curvas  de  resposta são  avaliadas  individualmente  e  dispositivos  inseridos  na  malha  de  controle  têm  suas  2 características mapeadas, permitindo avaliar como estes trabalham entre si ao se mesclar conceitos nos controladores finais;  •  Finalmente,  o  Capítulo  7  apresenta  as  conclusões  obtidas  no  decorrer  deste  estudo  esão propostas sugestões de trabalhos futuros; O  trabalho  também  possui  três  apêndices.  O  Apêndice  A  se  dedica  ao  detalhamento matemático  dos  modelos  de  controladores  voltados  ao  desempenho,  com  a  definição  dos parâmetros e a apresentação das curvas de resposta para variações desenvolvidas neste trabalho. 
O Apêndice B apresenta todas as simulações computacionais realizadas para o último modelo de controlador  proposto,  voltado  à  minimização  do  esforço  de  controle,  apresentando  resultados preliminares  de  uma  proposta  para  a  experimentação  real.  Por  fim,  o  Apêndice  C  apresenta  os modelos computacionais de todos os controladores desenvolvidos e do sistema físico do VASPS, desenvolvidos na forma de diagrama de blocos no Simulink®. 
 3     Capítulo 2  2  Panorama Tecnológico  2.1  Sistemas de Produção Offshore As  descobertas  mais  recentes  de  reservatórios  de  óleo  têm  ocorrido  cada  vez  mais frequentemente  em  alto  mar  e  em  lâminas  d’água  cada  vez  mais  profundas,  especialmente  no Brasil, onde o volume da reserva sofreu incrementos expressivos nos anos recentes. Com estas novas  descobertas  são  impostos  novos  desafios,  uma  vez  que  as  condições  operacionais  ficam mais  complexas  e  as  tecnologias  existentes  não  são  suficientes  para  a  exploração  dos  novos campos. Um exemplo de adaptação para um novo cenário é dado em Campos et al. (2006), onde a  plataforma  P-55  a  ser  instalada  em  uma  lâmina  d’água  de  1800  metros  teve  de  sofrer  o desenvolvimento  de  um  novo  sistema  de  controle  para  atender  as  condições  críticas  de escoamento em golfadas (variação brusca da vazão) recebida pela plataforma, característica esta causada,  entre  outras  coisas,  pelo  alto  volume  de  produção,  pela  forte  presença  de  gás  -    que causa  uma  diferença  de  velocidade  entre  as  fases  instabilizando  o  fluxo  -  e  pela  geometria  do terreno, mais acidentado devido à sua localização de maior profundidade - o que faz com que a gravidade  gere  este  escoamento  nos  risers  que  levam  a  produção  do  fundo  do  mar  até  a plataforma. 
Assim, a exploração e produção em alto mar na Bacia de Campos que até então lançanva mão  de  tecnologias  consagradas,  como  o  uso  quase  que  exclusivo  da  técnica  de  gas  lift  como solução  de  elevação  artificial,  teve  de  sofrer  novos  desenvolvimentos  e  aplicações  a  fim  de sustentar a operação nas novas condições. Para o exemplo da elevação artificial, a transição para o  cenário  de  água  ultra-profundas  exigiu  em  alguns  casos  soluções  mais  apropriadas  para  4 escoamento  de  grandes  vazões,  como  o  Bombeio  Centrífugo  Submerso  (BCS),  que  conta  com uma bomba elétrica para o incremento da pressão no fluido.  
Com  plataformas  locadas  em  regiões  mais  distantes  do  litoral,  e  com  o  maior  custo  de produção devido à necessidade de se desenvolver novas tecnologias, apenas a produção em maior escala consegue prover o retorno suficiente para estes custos com um risco controlado, de forma que nestas novas condições são usadas plataformas maiores e em menor quantidade, integrando regiões mais vastas, aumentando a distância entre os postos. Com isso, a ocupação de espaço em plataforma  se  torna  uma  questão  crítica,  pois  uma  maior  produção  exige  maiores  tanques  de armazenamento,  maiores  separadores,  maior  mão-de-obra  e  um  descarregamento  da  produção mais frequente. Todo este novo cenário implicou no desenvolvimento de tecnologias ainda mais inovadoras, que têm surgido na forma de sistemas de produção submarinos, campos inteligentes e transporte de produção para longas distâncias através de oleodutos e gasodutos. Junto com todas estas  novas  abordagens  também  aparecem  questões  adicionais,  como  processamento  de produção, garantia de escoamento, monitoramento dos poços em longo prazo e questão de meio ambiente  e  seguraça,  que  no  todo  caracterizam  uma  transição  tecnológica  significativa  das tecnologias de explotação de petróleo. 
As  questões  mencionadas  são  aboradadas  por  Devegowda  e  Scott  (2003),  que  fazem  um levantamento  de  possíveis  soluções  para  este  novo  cenário,  considerando  o  desenvolvimento recente de tecnologias submarinas. Dentre as possibilidades de processamento submarino, cinco alternativas  de  soluções  são  mencionadas  na  referência  e  avaliadas  segundo  os  critérios destacados anteriormente: •  Bombeio Mulifásico •  Separação Gás/Líquido •  VASPS •  Separação Água/Óleo O bombeio multifásico consiste de uma bomba capaz de transmitir fluido nas fases líquida e  gasosa  em  uma  única  linha,  não  necessitando  de  outros  equipamentos  submarinos.  Esta tecnologia consegue lidar com frações de gás de até 97%, tão embora não consiga trabalhar com uma  fração  maior  que  esta.  Além  disso,  patículas  sólidas  podem  danificar  o  sistema  e  seu consumo  de  energia  pode  ser  bastante  alto  quando  o  bombeio  necessitar  ser  realizado  para grandes  distâncias,  o  que  exigiria  uma  maior  manutenção  e  ocupação  de  espaço  na  plataforma  5 para  os  geradores  de  energia.  Ainda  assim,  o  bombeio  multifásico  é  apontado  como  uma “tecnologia comprovada”, e bastante competitiva para bombeio em pequenas distâncias. 
A separação submarina de gás e líquido consiste de um vaso de separação submarino com um sistema de bombeio para transmitir a fase líquida separada por uma linha enquanto o gás e transmitido  por  outra  linha,  independente,  sem  bombeio.  Este  sistema  necessita  de  um  aparato complexo de separação , o que se agrava pela dificuldade de realizar intervenções e pelo uso de instrumentação  adicional,  como  o  uso  de  manifold,  válvulas  e  um  sistema  de  controle.  Além disso,  esta  tecnologia  também  apresenta  dificuldades  com  sólidos  e  com  a  geração  de  energia para  o  bombeio.  No  entanto,  há  diversos  benefícios  inerentes,  como  a  redução  da  pressão  de trabalho na cabeça do poço, aumentando a produção significativamente, a possibilidade do uso do gás separado para a reinjeção no poço, a inibição da formação de hidratos na tubulação devido à segregação  do  metano  em  uma  linha  inedependente  e  a  redução  do  diâmetro  dos  risers  e  das linhas de transmissão, barateando o custo do bombeio para longas distâncias. 
A  diferença  ente  o  VASPS  e  a  separação  submarina  de  gás  e  líquido  convencional  é  a integração do sistema de bombeio com o vaso de separação, que é também mais compacto. Isso implica  em  uma  redução  da  complexidade  do  equipamento,  elimina  a  necessidade  de  linhas independentes de gás e líquido entre a bomba e o separador, podendo ser usada apenas uma linha de alimentação mutifásica de fluido e reduz o consumo de energia por parte da bomba, uma vez que  o  sistema  fica  próximo  da  base  do  riser,  e  não  do  campo  submarino,  reduzindo  o comprimento da linha elétrica. 
A separação de água e óleo consiste de um separador ciclônico instalado no leito submarino ou no fundo do poço que separa a água do óleo e a usa para a reinjeção no poço, bombeando o óleo com uma bomba submersa, seja elétrica (BCS) ou hidráulica. A separação pode ser ciclônica ou  por  gravidade  e  faz  uso  de  duas  linhas  de  saída  –  uma  para  o  gás  e  outra  para  o  óleo  – enquanto que a água é enviada para um dispositivo submarino de tratamento. Este sistema amplia os benefícios da separação de gás e líquido por liberar espaço na plataforma devido à redução do dispositivo  de  separação  e  tratamento  de  água  e  por  inibir  ainda  mais  a  formação  de  hidratos  devido  à  remoção  da  água  da  linha  de  transmissão.  Este  sistema  entretanto  não  foi  elevado  à maturidade,  de  forma  que  com  poucas  aplicações  ainda  não  se  pode  garantir  uma  alta confiabilidade. Além disso, caso a água não seja usada para a injeção, seu descarte torna-se um  6 problema.  Ademais,  todos  os  problemas  de  complexidade  de  equipamento  no  fundo  do  mar continuam valendo, bem como as dificuldades com a energia para as bombas. 
Em Devegowda e Scott (2003), o Bombeio Multifásico é indicado como a tecnologia mais consagrada  e  desenvolvida,  devido  ao  alto  custo  de intervenção  que  pode  inviabilizar  o  uso  de uma bomba BCS, presente nos outros sistemas, mesmo se considerando que este último oferece maiores  benefícios  que  o  primeiro.  Isto  apenas  justifica  o  propósito  deste  trabalho,  que  visa buscar  a  viabilidade  do  sistema  VASPS  através  da  redução  da  quanidade  de  intervenções  na bomba BCS, como será visto nos capítulos seguintes. 
2.2  Sistema VASPS Como  visto  na  seção  anterior,  o  sistema  VASPS  (Vertical  Annular  Separation  and Pumping System) consiste de um separador submarino de óleo e gás instalado no leito marinho com um sistema de bombeio integrado, o Bombeio Centrífugo Submerso (BCS). Juntamente com o BCS, o VASPS usa a técnica de gás lift para a elevação artificial do óleo produzido. 
Plataforma de Plataforma de ProduçãoProduçãoVASPSVASPSVazão de produção Vazão de produção ManifoldManifolddos poçosdos poços Figura 2.1: Representação da instalação do VASPS no sistema de produção (fora de escala). 
O sistema VASPS apresenta um conceito inovador de separação e bombeamento bifásico submarino. Em detalhes, ele é constituído de uma torre de aproximadamente 70 metros de altura cuja  estrutura  interna  contém  um  separador  ciclônico  dividido  em  três  estágios  de  separação  e uma bomba do tipo BCS. Este vaso de separação é parcialmente enterrado em um poço falso na região  dos  poços  e  próximo  à  base  do  riser  de  produção,  possivelmente  integrando  poços próximos através do uso de um manifold. Para uma melhor compreensão, a Figura 2.2 apresenta um esquema do sistema VASPS, onde as dimensões são dadas à esquerda e abaixo, os estágios de  7 separação são indicados à direita e as saídas da produção para as linhas independentes de líquido e gás são dadas acima. 
 Figura 2.2. Diagrama esquemático do sistema VASPS. 
As  principais  condições  operacionais  do  VASPS,  conforme  relatado  por  do  Vale  et  al. 
(2002) e Peixoto et al. (2005), são: •  Utilização de gás lift •  Produção de líquido: 1000 m³/d •  Produção de gás: 100.000 m³/d •  Pressão de admissão do fluido multifásico: 14 kgf/cm²  8 •  Pressão no vaso separador: 8 a 12 kgf/cm² •  Pressão de descarga da BCS: 61 kgf/cm² •  Pressão na linha de gás: 7 kgf/cm² Aliada a estas condições, a saída para a linha de gás é aberta por um longo trecho, de forma que  não  há  uma  válvula  choke  ou  qualquer  outro  dispositivo  de  restrição  de  vazão  de  gás  que permita controlar a pressão no vaso com muita precisão ou velocidade. Considerando também o volume  do  VASPS  -  algo  em  torno  de  6,5  m³  -  há  a  indicação  de  que  este  sistema  não  está pressurizado, pois as pressões da fase gasosa são bastante menores que as do poço, e de que isto não  apresenta  problemas  operacionais,  pois  não  há  dispositivo  que  permita  influenciar diretamente esta variável. Além disso, o pequeno volume que as fases líquidas ocupam frente à produção, considerando-se que sua saída para a linha independente é controlada pela bomba, e a grande  variação  de  pressão  que  sofrem,  indicam  também  que  este  é  o  componente  crítico  do sistema. Considerando ainda que a bomba BCS não deva trabalhar com frações muito altas de gás e notando que há o uso do gás lift, faz-se imperativo que o controle do volume da piscina seja mais elaborado, ou ao menos fortemente monitorado. 
Dadas  a  instalação  e  as  condições  operacionais,  o  sistema  VASPS  atingiu  resultados expressivos  logo  em  sua  primeira  operação  (do  Vale  et  al.,  2002).  Dentre  fatores  positivos importantes no cenário apresentado na seção anterior, como a redução da ocupação de espaço na plataforma, a interligação de regiões produtivas e o bombeio para longas distâncias, o principal balisador da viabilidade deste sistema é a redução da pressão de trabalho na cabeça do poço, que permite o aumento da vazão de produção. 
Em do Vale et al. (2002), foi publicada a experiência com a primeira instalação do VASPS no Brasil, que ocorreu no campo de Marimbá em uma lâmina d’água de 395 metros. O poço que alimentou  o  separador  estava  produzindo  antes  da  intervenção  uma  vazão  de  750  m³/d  de  óleo com uma assistência de 100.000 m³/d de gas lift, a uma pressão de 36 kgf/cm². Após a instalação e  com  o  sistema  estabilizado,  o  gas  lift  foi  interrompido  e  a  nova  condição  de  operação  era  a produção de óleo de 1000 m³/d a uma pressão de 11 kgf/cm² no VASPS. A pressão na linha de líquido, após a saída da BCS, era de 56 kgf/cm² e a pressão na linha de gás era de 8 kgf/cm². Os ganhos  dramáticos  sustentaram  a  operação  do  VASPS  por  muito  tempo,  em  despeito  das dificuldades mencionadas na seção anterior. 
 9 Alguns anos após a primeira operação, um outro trabalho foi publicado relatando algumas das dificuldades que ocorreram no período de 2001 a 2004. O trabalho de Peixoto et al. (2005) relata todo o trabalho de workover (manutenção e correção de falhas de um poço) realizado para retomar  a  produção  do  VASPS.  Como  era  de  se  esperar,  a  intervenção  para  a  realização  deste workover foi ocasionada pela falha da bomba BCS, que fora então trocada. 
A  falha  da  BCS  ocorreu  em  Dezembro,  cinco  meses  depois  da  instalação  do  sistema  que ocorrera em Julho. A causa foi atribuída à parte mais complexa do sistema, o sistema de controle –  o  que  não  comprometeu  o  sucesso  da  nova  tecnologia,  uma  vez  que  o  sistema  de  proteção  e controle  não  reagiu  como  esperado  por  não  ter  detectado  uma  operação  imprópria  de  uma  das válvulas. Para a retomada da produção utilizando o VASPS, esta válvula choke presente na linha de gás foi removida, e proteções adicionais foram implementadas para o aumento da vida útil da nova bomba BCS. 
Após estas correções e depois da realização de ajustes no sistema de controle, a bomba foi trocada  em  Janeiro  de  2004  e  retomou  a  operação  em  Maio  de  2004.  Na  segunda  operação,  a condição operacional do sistema corrigido era bastante similar à primeira operação, apresentando uma vazão de óleo de 860 m³/d sem o uso do gas lift e a uma pressão de 11 kgf/cm².  
No  começo  de  2005,  tendo  sido  verificada  a  estabilidade  operacional  do  sistema  e  a  não reincidencia de falhas, uma nova condição operacional, prevista no projeto inicial, foi posta em produção: o uso de gas lift concomitante à operação do VASPS. Retomando o uso do gas lift, a vazão  de  produção  de  óleo  retornou  ao  patamar  de  1000  m³/d,  a  uma  pressão  de  14  kgf/m³.  A pressão na saída da BCS foi de 61 kgf/cm² e a pressão na linha de gás se manteve no patamar de 7  kgf/cm².  É  interessante  notar  que  embora  o  uso  de  uma  altíssima  vazão  gás  no  sistema  gera alguma  vibração  adicional  na  bomba,  isto  não  implica  necessariamente  na  pressurização  do VASPS  ou  da  linha  de  saída  de  gás,  de  forma  que  o  sistema  continua  a  trabalhar  com  o  vaso despressurizado e conectado diretamente à linha sem a presença da válvula choke. 
É  importante  ressaltar  que  a  necessidade  de  proteções  dinâmicas  e  estáticas  em  um controlador são sempre necessárias, pois são os dispositivos de automação que realizam a parada do  sistema  em  casos  eventuais  de  falhas.  No  entanto,  estes  sistemas  servem  para  apoiar  o gerenciamento, podendo nunca ser ativados ao longo da vida útil de um equipamento. Para que isto  (o  não  acionamento  das  proteções)  ocorra,  é  necessário  que  o  sistema  de  controle  estaja  10 adequado  aos  objetivos  operacionais,  de  forma  que  a  estratégia  de  controle  seja  elaborada  de acordo. 
Enquanto aplicação para um sistema de controle, o VASPS mostra-se altamente propício a ganhos  de  eficiência,  uma  vez  que  é  um  sistema  mecanicamente  eficaz  e  robusto  e  que  trouxe resultados  comprovados  no  campo.  Sendo  o  controlador  o  gargalo  de  uma  tecnologia  tão avançado, é interessante endereçar este problema diretamente com um trabalho focado, que é o caso  deste  estudo  especificamente.  Aqui  serão  propostas  alternativas  para  solucionar  a problemática  de  controle  da  bomba  BCS  –  ou  ao  menos  de  minimizar  os  impactos  desta  –  de forma  que  novas  estratégias  possam  ser  usadas  em  concepções  futuras  do  uso  deste  tipo  de bomba,  ou  novas  formulações  do  problema  possam  ser  tomadas  levando-se  em  conta  as diferentes estratégias de controle que podem ser adotadas, avançando-se o conhecimento através do melhor entendimento geral do problema.  
 11     Capítulo 3  3  Modelagem Neste capítulo o Sistema VASPS é apresentado em detalhes suficientes para a realização do controle.  Considerações  são  realizadas  quanto  à  modelagem  do  escoamento  e  quanto  ao equacionamento da bomba BCS e da dinâmica interna do vaso separador. Com as delimitações discutidas  neste  capítulo,  o  modelo  físico  é  fechado  e  proposto,  de  forma  que  os  capítulos seguintes tratarão mais diretamente da metodologia para a síntese de controladores. 
3.1  Escoamento 3.1.1  Escoamento de entrada Como  visto  no  Capítulo  2,  o  Sistema  VASPS  é  alimentado  diretamente  do  poço  de produção, com o padrão de escoamento em golfadas. Este escoamento alterna a predominância de líquido e de gás, de forma que funciona como um sinal de distúrbio para as condições de pressão e de vazão – ou de nível de líquido na piscina – dentro do vaso. Como visto mais adiante, o sinal de entrada em um dado sistema afeta a resposta, ou estas condições operacionais, de forma que para estabilizá-las é necessário um controlador. Dessa forma, é importante que seja escolhido um padrão de escoamento de entrada de líquido no VASPS que reflita a condição de campo ou que seja  mais  agressiva  do  que  esta,  de  forma  que  o  projeto  de  controladores  considere  a  robustez necessária  para  atingir  o  objetivo  de  controle  mesmo  sob  distúrbios  de  entrada  bastante significativos. 
Com  o  intuito  de  analisar  tanto  a  robustez  dos  controladores  propostos,  quanto  a sensibilidade do sistema a variações no escoamento, este trabalho apresenta simuladores de fluxo de  entrada  de  líquido  paulatinamente  mais  agressivos.  Foram  elaboradas  três  curvas  diferentes para  este  simulador,  chamado  de  ‘Gerador  de  Golfadas’,  que  foram  inseridos  na  malha  de  12 controle para garantir a robustez das soluções propostas. Além disso, ao passo que um objetivo de  controle  é  atingido  e  os  modelos  de  controlador  evoluem,  um  Gerador  de  Golfadas  mais simples é substituído por outro mais agressivo. 
O papel do gerador de golfadas no sistema é importante para a concepção e validação do modelo computacional, pois este é o responsável por simular todos os distúrbios de campo que tornam  complexa  a  operação  do  separador,  constituindo  uma  ferramenta  essencial  para  a avaliação  da  robustez  do  conceito  de  controlador  proposto  e  sua  sensibilidade  às  variações  no escoamento. A primeira curva usada como comportamento da vazão de entrada para o gerador de golfadas é apresentado na Figura 3.1 (comunicação direta, Teixeira, 2006). 
]d/³m1200[ adart1000needoãzaV800 600 010002000300040005000Tempo [s] Figura 3.1. Modelo preliminar da vazão de entrada de líquido do Gerador de Golfadas (comunicação direta, Teixeira, 2006). 
Embora o Gerador de Golfadas inicial apresente uma componente aleatória nos patamares de  amplitude  da  vazão  de  entrada,  este  pode  ser  considerado  bastante  conservador,  por  se assemelhar  bastante  a  uma  onda  quadrada,  previsível.  Assim,  esta  contribuição  da  literatura sofreu três modificações neste trabalho, de forma a compor as outras duas curvas mais agressivas: 1.  O aumento da oscilação aleatória no patamar de vazão; 2.  A variação da freqüência das golfadas, tornando-as imprevisíveis; e, por fim 3.  A  variação  dos  patamares  de  pancada  de  líquido,  tornando  as  golfadas  diferentemente agressivas. 
O  primeiro  efeito  foi  combinado  com  o  segundo  para  compor  o  segundo  modelo  de Gerador de Golfada. A adição do terceiro efeito no gerador permitiu constituir o último modelo para a vazão de entrada, de forma que suas curvas tomam as formas apresentadas na Figura 3.2. 
Nesta  figura  é  mantida  a  curva  primária  do  gerador de  golfadas  (comunicação  direta,  Teixeira,  13 2006)  para  apresentar  o  contraste  entre  esta  e  aquelas  desenvolvidas  como  contribuição  deste trabalho. 
1200]d/³1000m[ 800adart600need1200 1000 oãzaV800600010002000300040005000Tempo [s] Figura 3.2. Comparativo entre o segundo e terceiro geradores de golfada. 
3.1.2  Escoamento interno ao vaso O  escoamento  do  fluido  multifásico  internamente  ao  vaso  passa  por  três  estágios  de separação,  delimitados  pela  geometria  interna  conforme  apresentados  no  Capítulo  2  através  do esquemático  da  Figura  2.2.  A  separação  ocorre  na  Câmara  de  Expansão,  no  Helicóide  de Separação  e  na  ‘Piscina’,  de  forma  que  o  princípio  de  separação  identificado  em  cada  um  dos estágios é o seguinte: •  Separação primária: é composta por uma câmara de expansão onde ocorre a extração de cerca de 50% do gás da mistura gás e líquido (óleo e água). Por efeito da incidência do jato  nas  paredes  cilíndricas  internas,  forma-se  um  filme  de  líquido  que  desce  por gravidade para o helicóide do separador secundário; •  Separação  secundária:  é  composta  por  uma  estrutura  helicoidal  que  visa  aumentar  a eficiência  de  separação  do  sistema.  A  separação  se  dá  pela  combinação  do  efeito centrífugo de segregação do gás livre com o efeito do tempo de residência para a remoção do gás disperso na fase líquida; •  Separação terciária: é composta por uma “piscina” na qual o líquido se acumula e parte do gás é separada por efeito gravitacional. Nesta piscina é onde opera uma bomba elétrica submersa do tipo BCS. 
 14 O  escoamento  que  ocorre  desde  a  admissão  do  fluido  multifásico  no  bocal  de  entrada passando pelos estágios de separação é ilustrado pela Figura 3.3. 
 Figura 3.3. Esquemático do escoamento das fases líquido e gás no VASPS. 
Assim,  a  garantia  da  eficiência  de  separação  no  VASPS  é  o  resultado  da  contribuição  de cada  uma  das  etapas  deste  processo,  sendo  parcialmente  realizada  na  câmara  de  expansão  e parcialmente  causada  pelos  efeitos  de  segregação  centrífuga,  de  tempo  de  residência  e gravitacional.  Estes  últimos  três  são  diretamente  afetados  pelo  nível  em  que  a  piscina  de encontra,  uma  vez  que  caso  a  piscina  esteja  muito  cheia  (e  então  o  nível  é  considerado  ‘alto’, dado que neste trabalho a leitura é realizada do fundo para o topo), o tempo de residência é menor e  consequentemente  o  fluido  é  exposto  ao  efeito  centífugo  por  menos  tempo.  Além  disso,  com uma  fração  de  gás  maior  na  piscina  causada  pela  redução  da  eficiência  de  separação,  o  efeito gravitacional  também  é  impactado.  Toda  esta  interligação  de  efeitos  implica  que  o  nível  da piscina do VASPS deve ser mantido abaixo de um limite superior (LS), para que a eficiência de separação do gás seja garantida. 
Da  mesma  forma,  embora  a  bomba  BCS  presente  no  sistema  seja  resistente  a  uma  certa fração  de  gás,  esta  não  consegue  trabalhar  com  frações  de  vazio  muito  altas.  Isto  implica  em  15 outra restrição do sistema – a operação com a BCS afogada, ou seja, completamente mergulhada no líquido, para que não haja dano. Com isso estabelece-se um limite inferior (LI) de operação. 
Neste  trabalho,  são  considerados  os  parâmetros  usados  em  campo  para  estes  dois  limites propostos. Não há, entretanto, um valor fixo a partir do qual o sistema apresenta problemas, até mesmo porque diversas condições de operação influenciam na capacidade de o sistema absorver com estabilidade as oscilações das variáveis tanto do fluido como do sistema. Será usado, então, um  intervalo  onde  a  operação  possa  ficar  mais  crítica,  restringindo  a  operação  a  uma  faixa  de estabilidade próxima aos valores de referência usados para o nível na operação do sistema atual. 
Uma vez que esta referência sempre se situa próximo dos 30 metros de altura de nível de líquido, oscilando mais ou menos de alguns metros em condições mais severas, será ssumido que a faixa de  estabilidade  se  dá  dos  25  aos  35  metros  de  coluna  de  líquido  e  que  os  valores  críticos  de operação do sistema são atingidos respectivamente em torno dos 20 metros (LI) e em torno dos 40 metros (LS) de altura. 
3.2  Elevação Artificial usando BCS A  vazão  de  saída  de  líquido  do  VASPS  é  impressa  pela  Bomba  BCS,  que  por  sua  vez  é acionada por um inversor de freqüência. Este dispositivo, comum em sistemas automatizados que fazem  uso  de  rotores  elétricos,  permite  variar  a  freqüência  de  alimentação  do  dispositivo acionado  –  no  caso,  a  bomba  –  e  consequentemente  variar  a  vazão  impressa  no  sistema.  Este artifício  é  usado  exatamente  para  adequar  o  funcionamento  dos  equipamentos  a  um comportamento desejado para o sistema, tão embora a modelagem de todos os efeitos resultantes seja bastante intrincada. Com isso, não só a vazão do sistema é alterada, como também a curva de carga  sofre  variações,  uma  vez  que  a  componente  de perda  de  carga  por  escoamento  é  afetada quando da variação da velocidade do fluido. 
Uma ilustração do efeito da variação da freqüência de alimentação em uma bomba BCS é apresentada na Figura 3.4. Esta ilustração representa a relação entre altura de elevação (ou Head, como apresentado) e vazão de saída, para diversas freqüências de acionamento e uma eficiência constante de uma bomba BCS de um estágio, modelo TE1500, retirada do catálogo de produto das  curvas  de  bombas  da  série  538.  Com  isso,  para  uma  dada  eficiência  e  uma  dada  altura  de elevação, pode-se encontrar a relação entre a freqüência de acionamento da bomba pelo inversor e  sua  respectiva  vazão  de  saída,  de  forma  que  a  oscilação  presente  na  vazão  de  saída  depende completamente da forma de acionamento realizada sobre o atuador. 
 16  Figura 3.4. Exemplo de curvas de bomba BCS para diferentes freqüências de acionamento. 
Para a bomba BCS presente no VASPS, será utilizada a relação proposta por Teixeira et al. 
(2004), apresentada na Equação (3.1). 
=&Qos3+8.07862⋅⋅⋅(3.1) 
-0.0577ff-249.18
f-263.36
 •osQNesta  equação,   é  a  vazão  de  saída  em  metros  cúbicos  por  dia  e  f  é  a  freqüência  de alimentação da bomba em Hertz. 
A  realização  da  modelagem  desta  curva  não  é  apresentada  na  referência  mencionada,  de forma  que  se  faz  necessário  esclarecer  as  premissas  assumidas,  bem  como  o  raciocínio  que culminou  em  tal  resultado.  Basicamente,  foram  três  as  principais  considerações  realizadas,  a saber (comunicação direta, Teixeira, 2006): •  As curvas da bomba obtidas do fabricante, relacionando a  altura de  elevação, H, com  a vazão,  Q,  para  uma  série  de  freqüências,  f,  selecionadas,  são  dadas  na  Figura  3.5.  A equação de cada uma das curvas foi obtida através da seleção de pontos de operação no catálogo  do  fabricante  e  de  sua  posterior  interpolação  usando  um  polinômio  de  terceiro grau, com um ajuste maior ou igual a 0,997. 
 17 200018001600f = 50 Hzf = 55 Hz14001200f = 60 Hzf = 65 Hz]m1000[ f = 70 HzH8006004002000050010001500200025003000Q [m3/d] Figura 3.5. Curvas da bomba BCS do VASPS para diferentes freqüências de acionamento (comunicação direta, Teixeira, 2006). 
•  A  alteração  da  freqüência  de  alimentação  da  bomba,  que  implica  em  alternar  entre  as curvas de vazão do sistema apresentadas, implica também em alteração da curva de carga do sistema, uma vez que a velocidade do fluido varia. Uma vez que o sistema de controle tratará  do  transiente  da  variação  de  nível  e  que  as  alterações  no  acionamento  serão pequenas  e  constantes,  este  efeito  da  variação  da  curva  de  carga  do  sistema  será desprezado,  de  forma  que  apenas  a  curva  da  bomba  será  alterada  em  um  dado acionamento. 
•  A profundidade do VASPS no campo é algo em torno de 400 metros. Além desta cota da lâmina  d`água  a  ser  elevada,  há  também  as  perdas  de  carga  no  sistema,  causadas  tanto pelo escoamento quanto pelos dispositivos (válvulas, joelhos, etc) presentes na tubulação. 
A somatória de todos estes efeitos será considerada  constante, de forma  que a  altura de elevação  a  ser  vencida  pela  bomba  será  um  parâmetro  fixo,  de  800  metros,  de  forma  a facilitar a correlação das variáveis para o cômputo da vazão de saída. 
Assim, para o equacionamento da relação entre freqüência de acionamento da bomba  e  a vazão  de  saída,  e  tomando  a  altura  de  elevação  fixa  de  800  metros,  há  apenas  um  ponto  de operação  da  vazão  para  cada  valor  de  freqüência  de  acionamento  da  bomba.  Assim,  ajustando uma curva de terceiro grau entre estes pontos, foi encontrada a curva apresentada na Figura 3.6 
(comunicação direta, Teixeira, 2006). 
 18 25002000]d1500/3m[ 1000QH = -0.0577Q3 + 8.0786Q2 - 249.18Q - 263.36
500R2 = 0.999
04853586368f [Hz] Figura 3.6. Modelo para a curva da bomba BCS (comunicação direta, Teixeira, 2006). 
A modelagem da curva  da bomba proposta por Teixeira et al. foi utilizada neste trabalho para  fins  de  simulação  da  dinâmica  do  VASPS  na  malha  de  controle.  Dadas  as  considerações realizadas,  esta  modelagem  simplificada  atende  as  necessidades  de  um  modelo  físico  para  a aplicação de um sistema de controle e o desenvolvimento de novas técnicas, o que representa o foco deste trabalho. 
3.3  Equacionamento do Sistema VASPS Como apresentado no Capítulo 2, o sistema VASPS é composto por três partes – a câmara de expansão, o helicóide de separação e a piscina, onde fica instalado o sistema de bombeio que destina  a  fase  líquida  para  uma  linha  segregada.  Fica  visível  o  tratamento  independente  do escoamento de cada uma das fases, de gás e de líquido, dentro do vaso.  
O primeiro, mais leve, é transportado e possui a pressão como variável governante. Como visto, o gás também não está altamente pressurizado, possuindo uma leve oscilação de pressão no sistema bocal de entrada – vaso – linha, não tendo apresentado problemas operacionais críticos por acúmulo de massa (aumento de pressão) em todo o sistema e consequentemente não exigindo a inserção de um equipamento restritivo ou de controle, como uma válvula choke, interrompendo a  comunicação  existente  em  toda  esta  extensão  aberta.  Além  disso,  a  longa  extensão  da  linha independente de transporte de gás implica em um volume bastante grande em que o gás pode se expandir,  de  forma  que  a  variação  da  variável  principal  –  a  pressão  –  é  de  ordem  bastante pequena. 
O segundo, ainda multifásico pela presença de diferentes líquidos, precisa ser bombeado e é monitorado na plataforma através do altura do nível no vaso, indicando que o volume é a variável  19 governante.  Este  sistema  por  sua  vez  é  mais  restrito,  uma  vez  que  volume  que  ele  ocupa  é limitado pelo vaso. Além disso, neste sistema existe um dispositivo que necessita de uma atenção redobrada – a bomba – sendo o componente crítico do sistema como um todo. A variação deste nível  de  líquido  é  algo  bastante  mais  dinâmico  e  mais  rápido  que  a  variação  da  grandeza  da pressão no vaso, o que exige a tomada de decisões com relação ao acionamento da bomba muito mais freqüentes. 
Dado este panorama, são feita algumas considerações para o tratamento da dinâmica física deste sistema para este trabalho: •  As  fases  de  líquido  presente  no  escoamento  interno  do  VASPS  compreendem partículas sólidas em pequena escala, uma fase de água salgada e outra fase de óleo, possivelmente  com  alguns  outros  elementos  dissociados.  Estas  fases  serão consideradas  como  uma  única,  sendo  as  partículas  sólidas  desprezadas  da  análise, dado  que  são  poucas  e  devem  ser  retidas  em  algum  tipo  de  filtro  específico  para isso. O tratamento do líquido como monofásico permite simplificações no modelo sem muita parda de credibilidade. 
•  O tratamento de cada uma das fases (líquido e gás) no VASPS após a separação será tratado como sistemas com dinâmica diferente, até mesmo porque as variáveis que os  regem  são  diferentes  e  possuem  transientes  de  ordem  bastante  distintas.  Com isso,  considerando  que  para  a  análise  do  controle  será  usada  apenas  a  resposta transiente,  o  efeito  da  variação  da  pressão  na  dinâmica  do  volume  de  líquido  será desprezada; •  A elaboração do sistema de controle tratará apenas do sistema crítico no VASPS, ou seja,  o  sistema  de  líquido,  focando  inclusive  no  atuador,  a  bomba  BCS,  que  é  o componente  crítico  do  sistema.  Entretanto,  o  trabalho  desenvolvido  para  este atuador não será  completamente perdido no tratamento de um possível sistema de controle  do  gás,  pois  os  conceitos  presentes  nas  estratégias  a  serem  apresentadas podem muito bem ser adaptados para uma nova aplicação. 
•  Para finalmente distinguir os sistemas de líquido e gás, será considerado que após o ingresso  no  vaso  e  conseqüente  separação,  as  fases  de  líquido  e  gás  não  se misturam, não se associam e não seqüestram partículas da outra fase. Considerar o fluxo de massa entre as  fases seria um trabalho  muito elaborado para o  estudo do  20 sistema controlado, devendo ser realizado num estudo a parte utilizando softwares de simulação de escoamento (CFD – Computational Flow Dinamics). 
•  A fase de líquido será considerada incompressível, de forma a facilitar a análise. 
•  Por fim, a leitura do nível de líquido na piscina tomará como referência  a direção emergente,  de  forma  que  o  zero  do  sistema  será  o  ponto  mais  fundo  do  vaso separado. Com o sistema de coordenadas indo no sentido contrário ao gravitacional, o nível alto da piscina será aquele mais próximo do bocal de entrada, e o mais baixo aquele mais próximo do ponto de instalação da bomba. 
Com as devidas considerações realizadas pode-se considerar o equacionamento para o nível de  líquido  da  piscina.  Tomando  a  lei  de  conservação  da  massa  e  sabendo  que  todo  o  volume monofásico de líquido que entra é incompressível e não sofre fluxo de entrada ou saída de massa com a fase gasosa, conclui-se que há conservação do volume, como expresso pela Equação (3.2), •oeQ•osQ  é a vazão de saída de líquido, que podem ser onde  é a vazão de entrada de líquido e expressas em metros cúbicos por dia [m³/d].  
dVLdt•Q•Qos(3.2) 
=− oeAdemais, a variação do nível de líquido é relacionada à variação de volume através do fator ed   é  o  diâmetro  externo  da  piscina, id   é  o  diâmetro geométrico  dado  na  Equação  (3.3),  onde interno,  em  metros,  e  h  é  o  nível  de  líquido,  também  em  metros.  O  fator  geométrico  usado representa a seção constante da área do anel onde a piscina do VASPS é localizada. 
dVLdt12dhdt =(3.3) 
2⋅−()πddei4Associando  as  duas  relações  acima,  a  dinâmica  de  variação  do  nível  da  piscina  é  então regida pela Equação (3.4), em função das vazões de entrada e saída e proporcional ao inverso da área da seção constante. 
dhdt4−•Qos•Q=−(3.4) 
 oe22π(d)dei  21     Capítulo 4  4  Fundamentos Teóricos Neste  capítulo  são  introduzidos  os  conceitos  fundamentais  utilizado  na  síntese  de controladores  apresentada  no  Capítulo  5.  Estes  fundamentos  teóricos  são  as  ferramentas manipuladas  quando  da  redefinição  da  estratégia  de  controle  para  cada  modelo  desenvolvido, aplicado e testado. Por fim, tão embora os exemplos trabalhados no decorrer deste capítulo não correspondam  a  um  modelo  de  controlador  específico  desenvolvido  posteriormente,  estes exemplos servem como base para guiar o entendimento do funcionamento do sistema VASPS no tocante às características e variáveis relevantes para o sistema de controle, de forma que a lógica apresentada corresponde à realidade física proposta e delimitada no Capítulo 3. 
4.1 
Introdução à Teoria de Conjuntos Nebulosos A Teoria de Conjuntos Nebulosos pode ser aplicada a sistemas de controle, provendo uma abordagem  prática.  Nesta  abordagem  é  importante  a  formação  de  uma  Base  de  Conhecimento onde o comportamento do sistema – as Regras – e as informações sobre as variáveis – os Dados – devem ser traduzidas de uma forma matemática. 
Conforme  proposto  por  Riid  (2002),  um  sistema  que  utiliza  a  Teoria  de  Conjuntos Nebulosa pode ser representado pelo esquema da Figura 4.1. 
 22  Figura 4.1 Sistema nebuloso genérico, adaptado de Riid (2002). 
Na Figura 4.1, o primeiro bloco, à esquerda, identifica a etapa de transformação dos dados reais,  numéricos,  em  dados  do  sistema  nebuloso,  lingüísticos.  Esta  transformação  de  variáveis pode ser chamada de Nebulização (ou Fuzzificação, como na referência apresentada). Após esta transformação,  as  variáveis  numéricas  tornam-se  variáveis  lingüísticas,  identificadas  por substantivos,  e  possuem  valores  de  pertinência  (de  0  a  1)  em  ‘conjuntos  nebulosos’, representados por adjetivos, que identificam o ‘valor’ daquela variável. Este processo é detalhado na seção 4.1.1 Nebulização. 
Com as variáveis definidas e classificadas, uma série de regras lógicas, pertencentes a uma Base  de  Regras,  são  aplicadas  através  de  um  mecanismo  de  inferência,  chamado  de  nebuloso. 
Para gerar valores de saída são usados dados de um Banco de Dados que, juntamente com a Base de  Regras,  formam  o  Conhecimento  sobre  o  sistema.  Este  Mecanismo  de  Inferência  Nebuloso pode  possuir  diversas  formas  de  tratar  estes  dados,  e  devem  ser  configurado  de  acordo  com  o sistema em questão. Detalhes são apresentados nas seções 4.1.2 e 4.1.4. 
Finalmente,  após  a  aplicação  das  regras  e  o  cômputo  da  solução,  as  variáveis  de  saída devem  ser  convertidas  de  volta  para  o  sistema  numérico  sendo  necessário  realizar  uma ‘transformada  inversa’.  Este  passo  pode  ser  chamado  de  Desnebulização  (ou  Defuzzificação, como apresentado na referência). Maiores explicações se apresentam nas seções 4.1.3 e 4.1.5. 
4.1.1  Nebulização Para  uma  melhor  compreensão  da  lógica  nebulosa  é  necessário  remeter  à  teoria  de conjuntos. Nesta, pode-se agrupar os elementos de cada conjunto separadamente, de forma que ao avaliar a pertinência µA(x) de uma variável x para um conjunto A em um universo X, pode-se afirmar que:  23 ∈Ax∉Ax,1,0sese(4.1) 
=)(µxA Desta  forma,  ou  o  elemento  pertence  ao  conjunto  A  ou  não  pertence.  Esta  classificação implica  que  a  função  de  pertinência  µA(x)  assume  valores  booleanos,  0  ou  1.  No  entanto,  para diversos  problemas  práticos  é  difícil  classificar  uma  dada  variável  em  apenas  dois  valores.  Por exemplo, qual o critério para classificar o nível da piscina no VASPS como ‘alto’? Ou ‘baixo’? 
Ainda, se o nível da piscina é crítico no valor de 30% superior  a um dado valor de referência, quão  crítico  este  o  é  quando  estiver  em  20%  superior?  Para  trabalhar  com  estes  valores intermediários,  que  muitas  vezes  são  relevantes,  surge  a  teoria  de  conjuntos  nebulosos, apresentada em Jager (1995), Passino e Yurkovich (1998) e Riid (2002). A teoria de conjuntos nebulosos admite a possibilidade de uma pertinência parcial, com um valor percentual entre 0 e 100%, diferente da noção clássica. Assim, um elemento pode pertencer a um dado conjunto com determinado grau de pertinência µA(x) dentro do intervalo [0,1]. 
Como  exemplo,  considere  o  sistema  VASPS  apresentado  no  Capítulo  3.  A  referência  de coordenadas  dimensionais  será  tratada  como  no  sentido  da  emergência,  ou  seja,  o  ponto  mais fundo  do  vaso  separador  equivale  à  cota  de  0  metro.  Adicionalmente,  foi  visto  que  o  limite inferior de trabalho para o nível, LI, é de 20 metros, e o limite superior, LS, é de 40 metros, de forma  pressupõe-se  que  a  região  ideal  de  trabalho  seja  em  torno  do  nível  de  30  metros, eqüidistante  aos  limites operacionais.  Com  isso, um  conjunto  nebuloso  rotulado  de  Baixo  pode caracterizar  o  nível  da  piscina  de  líquido  do  VASPS  fortemente  para  um  valor  entre  20  e  30 metros,  de  forma  que  o  “grau  de  pertinência”  para  o  nível  Baixo  seja  dado  por  uma  função []1,0)( ∈hBaixoµBaixoµ,  onde  h  é  o  nível  da  piscina.  A  pertinência )(h  do  nível  da  piscina  h  no conjunto Baixo pode então ser descrita conforme alguma das funções representada na Figura 4.2. 
BAIXOBAIXOBAIXOBAIXOBAIXOBAIXO111111111111½½½½½½½½½½½½¼¼¼¼¼¼¼¼¼¼¼¼[m][m][m][m][m][m][m][m][m][m][m][m]303030303030303030303030202020204040404020202020404040402020202040404040Nível da PiscinaNível da PiscinaNível da PiscinaNível da PiscinaNível da PiscinaNível da Piscina Figura 4.2. Exemplo de três possíveis funções de pertinência para o conjunto nebuloso Baixo. 
 24 É possível observar pela figura que quanto menor é o valor da variável Nível da Piscina, maior é a pertinência que esta tem no conjunto Baixo. Da mesma forma, diversas podem ser as funções que classificam este conjunto, sendo mais, ou menos gradativas. No entanto, apenas uma pode ser a função que classifica o conjunto Baixo na variável Nível da Piscina, de forma que uma das três funções apresentadas – ou alguma outra – deve ser escolhida para relacionar o conjunto nebuloso em uma variável nebulosa. 
A variável nebulosa Nível da Piscina, entretanto, também pode ser caracterizada por outros conjuntos nebulosos - por exemplo, Alto e Médio - podendo conter mais de um conjunto ativo, com  diferentes  graus  de  pertinência,  ou  seja,  com  diferentes  participações  em  cada  conjunto. 
Desta maneira, a variável Nível da Piscina é modelada como uma variável lingüística nebulosa, assumindo  valores  como  Alto,  Baixo  e  Médio,  chamados  de  rótulos  lingüísticos.  A  variável lingüística é caracterizada pela pertinência que possui em cada um de seus conjuntos nebulosos – no caso, os conjuntos Alto, Baixo e Médio – que possuem, cada um, sua função de pertinência, que  deve  ser  única  para  cada  conjunto.  A  Figura  4.3  mostra  uma  possível  configuração  para  a variável Nível da Piscina. 
BAIXOBAIXOBAIXOMÉDIOMÉDIOMÉDIOALTOALTOALTO1.0
1.0
1.0
0.8
0.8
0.8
µH(h)µH(h)0.6
0.6
0.6
0.4
0.4
0.4
0.2
0.2
0.2
000202020352525253535h, Nível da Piscina [m]h, Nível da Piscina [m]303030404040  Figura 4.3. Representação da variável nebulosa Nível da Piscina. 
Através  da  figura,  pode-se  observar  que  nesta  modelagem  da  variável  de  entrada,  foram cobertos os valores reais de entrada (que podem ser medidos com um sensor no sistema) de 20 a 40  metros  de  altura  do  líquido  da  piscina,  considerando  como  referência  para  medição  a emergência  (início  da  medição  no  fundo  do  vaso).  É  possível  concluir  também  que  caso  os valores estejam acima ou abaixo desta faixa, eles ativam os conjuntos extremos (Alto ou Baixo, respectivamente) com 100% de pertinência.  
Outra variável que pode ser considerada para o sistema VASPS e que pode ser relevante no sistema de controle é a Variação do Nível da Piscina, como uma derivada no tempo, da variável  25 anterior.  Neste  caso,  também  deve  ser  adotado  um  critério  para  a  classificação  do  universo  de operação da variável, a fim de cobri-lo com conjuntos nebulosos.  
Supondo que a variação máxima do nível seja a vazão nominal de entrada, 1000 m³/d, sem vazão de saída, a variação de nível equivale a: &Q−1000(2π−rrei&h===45,4/(4.2) 
cms) )(2AiAeConsiderando  também  que  é  necessário  um  bombeamento  de  igual  taxa  para  manter  o equilíbrio do sistema, no caso crítico inverso – bombeio a 1000 m³/d e vazão de entrada nula – o decrescimento do nível seria no valor oposto, – 4,45 cm/s. Assim, o universo de variação da nova variável  será  dado  pelo  intervalo  [-5;5].  Gerando  rótulos  adequados,  a  representação  desta segunda variável pode ser dada pela Figura 4.4. 
NEGATIVANEGATIVANEGATIVANULANULANULAPOSITIVAPOSITIVAPOSITIVA1.0
1.0
1.0
0.8
0.8
0.8
µH(h)µH(h)0.6
0.6
0.6
0.4
0.4
0.4
0.2
0.2
0.2
0002,52,52,5-5,0-5,0-5,0-2,5-2,5-2,50005,05,05,0.
.
h, Variação do Nível da Piscina [cm/s]h, Variação do Nível da Piscina [cm/s] Figura 4.4. Representação da variável nebulosa Variação do Nível da Piscina. 
Uma vez definidas as variáveis de entrada do sistema e seu universo de valores de entrada, é possível traduzir um valor real em termos lingüísticos aplicando a transformação de variáveis, a Nebulização, conforme  exemplificado na  Figura 4.5, que apresenta a conversão do valor de 32 metros de altura do Nível da Piscina para o valor de 60% Médio e 40% Alto, e na Figura 4.6, que apresenta a conversão do valor – 0,8 cm/s da variável Variação do Nível da Piscina para o valor de 30% Negativa e 70% Nula. 
 26 BAIXOBAIXOBAIXOBAIXOMÉDIOMÉDIOMÉDIOMÉDIOALTOALTOALTOALTO1.0
1.0
1.0
1.0
0.8
0.8
0.8
0.8
0.6
0.6
0.6
0.6
BAIXOBAIXOBAIXOBAIXOBAIXOMÉDIOMÉDIOMÉDIOMÉDIOMÉDIOALTOALTOALTOALTOALTO1.0
1.0
1.0
1.0
1.0
0.4
0.4
0.4
0.4
0.8
0.8
0.8
0.8
0.8
0.2
0.2
0.2
0.2
0.6
0.6
0.6
0.6
0.6
000020202020252525253030303035353535404040400.4
0.4
0.4
0.4
0.4
BAIXOBAIXOBAIXOBAIXOMÉDIOMÉDIOMÉDIOMÉDIOALTOALTOALTOALTO0.2
0.2
0.2
0.2
0.2
1.0
1.0
1.0
1.0
000000.8
0.8
0.8
0.8
2020202020252525252530303030303535353535404040404032 m32 m32 m0.6
0.6
0.6
0.6
h, Nível da Piscina [m]h, Nível da Piscina [m]0.4
0.4
0.4
0.4
0.2
0.2
0.2
0.2
00002020202025252525303030303535353540404040H, Nível da Piscina [m]H, Nível da Piscina [m] Figura 4.5. Nebulização da variável de entrada Nível da Piscina. 
NEGATIVANEGATIVANEGATIVANULANULANULAPOSITIVAPOSITIVAPOSITIVA1.0
1.0
1.0
0.8
0.8
0.8
0.6
0.6
0.6
NEGATIVANEGATIVANEGATIVANEGATIVANULANULANULANULAPOSITIVAPOSITIVAPOSITIVAPOSITIVA0.4
0.4
0.4
1.0
1.0
1.0
1.0
0.8
0.8
0.8
0.8
0.2
0.2
0.2
0.6
0.6
0.6
0.6
000-5,0-5,0-5,0-2,5-2,5-2,50002,52,52,55,05,05,00.4
0.4
0.4
0.4
NEGATIVANEGATIVANEGATIVANULANULANULAPOSITIVAPOSITIVAPOSITIVA0.2
0.2
0.2
0.2
1.0
1.0
1.0
00002,52,52,52,50.8
0.8
0.8
-5,0-5,0-5,0-5,0-2,5-2,5-2,5-2,500005,05,05,05,0-0,8 cm/s-0,8 cm/s-0,8 cm/s-0,8 cm/s.
.
.
h, Variação do Nível da Piscina [cm/s]h, Variação do Nível da Piscina [cm/s]h, Variação do Nível da Piscina [cm/s]0.6
0.6
0.6
0.4
0.4
0.4
0.2
0.2
0.2
000-5,0-5,0-5,0-2,5-2,5-2,52,52,52,50005,05,05,0.
.
.
H, Variação do Nível da Piscina [cm/s]H, Variação do Nível da Piscina [cm/s]H, Variação do Nível da Piscina [cm/s] Figura 4.6. Nebulização da variável de entrada Variação do Nível da Piscina. 
O mesmo processo de definição de variáveis lingüísticas e de conjuntos nebulosos deve ser realizado para as variáveis de saída, de forma que estas sejam expressas em termos lingüísticos e cobrindo o universo conhecido para o atuador. 
 27 4.1.2  Base de Regras do tipo Mamdani Uma vez definidas as variáveis nebulosas de entrada e saída referentes a um determinado processo  é  possível  codificar  o  conhecimento  sobre  tal  por  meio  de  regras  lingüísticas condicionais, com a estrutura “Se <condição>, Então <conseqüência>”. Assim, para uma dada condição  de  ativação  de  uma  variável  de  entrada,  em  que  esta  possua  qualquer  valor  de pertinência diferente de zero em algum de seus conjuntos nebulosos, a conseqüência é a ativação de algum conjunto nebuloso de uma variável de saída, conforme definido pela regra lingüística. 
Considerando  o  exemplo  da  seção  anterior,  um  exemplo  de  regra  lingüística  é  apresentado  a seguir: “Se o Nível da Piscina é Alto, Então a Rotação da Bomba é Alta.” 
Esta regra aciona o conjunto nebuloso Alta da variável de saída Rotação da Bomba quando a variável Nível da Piscina possuir o conjunto Alto ativo. A partir daí, a associação de diversas regras lingüísticas compõe a Base de Regras, que determina o comportamento do sistema. Assim, dando  continuidade  ao  exemplo  da  seção  anterior,  é  possível  construir  um  sistema  nebuloso usando as mesmas duas variáveis de entrada propostas ativando uma variável de saída Rotação da  Bomba,  com  o  objetivo  de  manter  o  Nível  da  Piscina  com  a  maior  pertinência  possível  no conjunto Médio. Isso poderia ser obtido segundo a seguinte Base de Regras: 1.  Se o Nível da Piscina é Baixo, Então a Rotação da Bomba é Baixa (Peso 2). 
2.  Se o Nível da Piscina é Médio, Então a Rotação da Bomba é Média (Peso 2). 
3.  Se o Nível da Piscina é Alto, Então a Rotação da Bomba é Alta (Peso 2). 
4.  Se a Variação do Nível da Piscina é Negativa, Então a Rotação da Bomba é Baixa (Peso 1). 
5.  Se a Variação do Nível da Piscina é Nula, Então a Rotação da Bomba é Média (Peso 1). 
6.  Se a Variação do Nível da Piscina é Positiva, Então a Rotação da Bomba é Alta (Peso 1). 
Através  desta  Base  de  Regras,  a  leitura  do  Nível  da  Piscina  garantiria  que  quando  este começasse  a  subir  em  direção  ao  limite  superior,  LS,  a  BCS  seria  acionada  com  uma  maior rotação  e  consequentemente  com  maior  vazão,  reduzindo  então  o  volume  de  óleo  na  piscina  e fazendo o nível manter o conjunto Médio ativo. O mesmo raciocínio se aplica para o abaixamento do nível.  
Já a Variação do Nível segue a lógica de que se o nível diminuir (conjunto Negativa), deve-se  também  reduzir  a  rotação  para  que  se  reduza  a  vazão  de  saída,  equilibrando  o  balanço  de  28 massa no transiente. Com isso, a redução de nível se daria vagarosamente, de forma a minimizar os efeitos no transiente – o que também funciona para o raciocínio inverso, de aumento de nível.  
No entanto, no caso de manipulação da bomba através da variável Variação do Nível, trata-se de uma variável auxiliar, uma vez que seu status direto não necessariamente significa que seja necessária  a  atuação  apresentada  na  Base  de  Regras.  Isto  ocorrerá,  por  exemplo,  quando  a Variação do Nível for Negativa e o Nível for Alto – neste caso, a saída desejada para a Rotação da Bomba é sim Alta, o que estabilizará o sistema. Claro que tão logo a  correção de nível seja realizada,  caso  a  variação  se  mantenha  no  status  de  negativa,  desejar-se-á  reduzir  a  vazão  de saída. Assim, para conciliar as regras conflitantes, foi considerada uma diferença no peso entre as regras, provendo maior importância para as regras onde há a avaliação da variável crítica (peso 2) e menor para a variável auxiliar (peso 1). 
A  fim  de  ilustrar  a  aplicação  dos  pesos  das  regras  no  sistema,  considere  os  conjuntos nebulosos ativos no exemplo da seção anterior e a Base de Regras proposta. Há quatro conjuntos nebulosos  ativos  nas  variáveis  de  entrada,  o  que  implica  na  ativação  de  quatro  regras,  com diferentes graus de ativação. Assim, é obtido o seguinte resultado de saída: 1) Conjunto Médio da variável Nível da Piscina, com pertinência 0,6. 
Esta condição ativa a regra 2, ativando a variável de saída Rotação da Bomba no conjunto Média. O grau de ativação é a pertinência ativa da entrada vezes o peso da regra: Pertinência 0,6 x Peso 2 = Grau de ativação 1,2 2) Conjunto Alto da variável Nível da Piscina, com pertinência 0,4. 
Esta ativa a regra 3, ativando o conjunto Alta.  
Pertinência 0,4 x Peso 2 = Grau de ativação 0,8 3) Conjunto Negativa da variável Variação do Nível da Piscina, com pertinência 0,3. 
Esta ativa a regra 4, ativando o conjunto Baixa.  
Pertinência 0,3 x Peso 1 = Grau de ativação 0,3 4) Conjunto Nula da variável Variação do Nível da Piscina, com pertinência 0,7. 
Finalmente, a última condição ativa a regra 5, ativando também o conjunto Média.  
Pertinência 0,7 x Peso 1 = Grau de ativação 0,7 Assim as saídas ativas são apresentadas na Tabela 4.1. 
 29 Tabela 4.1. Aplicação da Base de Regras a uma entrada ativa. 
Variável de Conjunto Regra Variável de saída Rotação da Bomba Rotação da Bomba Rotação da Bomba Rotação da Bomba Conjunto acionado Grau de ativação Pertinência Peso Entrada Nível da Piscina Nível da Piscina Variação do Nível Variação do Nível ativo acionada 0,6 2 2 1,2 Médio Média 0,4 3 2 0,8 Alto Alta 0,3 4 1 0,3 Negativa Baixa Nula 0,7 5 1 0,7 Média O grau de ativação total do sistema é a soma das parcelas ativadas por cada regra: 1,2 + 0,8 + 0,3  + 0,7 = 3,0. Com  os graus de  ativação calculados, é possível descobrir a pertinência dos conjuntos nebulosos de saída ativos, através da ponderação do valor relativo com o total. Assim, para  a  variável  de  saída  Rotação  da  Bomba,  os  conjuntos  ativos  (Baixa,  Média  e  Alta)  têm  a pertinência dada por: 3,00,3=10,0Baixa)  2,10,37,00,39,10,3+==63,0Média)  8,00,3=27,0Alta)      O resultado para a saída nestas condições é a figura geométrica representativa da variável Rotação da Bomba, apresentada na Figura 4.7. 
BAIXABAIXABAIXAMÉDIAMÉDIAMÉDIAALTAALTAALTA1.0
1.0
1.0
0.8
0.8
0.8
0.6
0.6
0.6
0.4
0.4
0.4
0.2
0.2
0.2
000505050525252545454565656585858F, Rotação da Bomba [Hz]F, Rotação da Bomba [Hz] Figura 4.7. Representação da variável de saída ativada pelas entradas exemplificadas. 
 30 O processo de aplicação das regras é representado na Figura 4.8, onde as contribuições para cada  conjunto  nebuloso  de  saída  são  apresentadas  separadamente  à  direita,  com  as  respectivas condições de entrada que ativaram a saída. 
BAIXOBAIXOBAIXOBAIXOBAIXOMÉDIOMÉDIOMÉDIOMÉDIOMÉDIOALTOALTOALTOALTOALTO1.0
1.0
1.0
1.0
1.0
0.8
0.8
0.8
0.8
0.8
1)1)0.6
0.6
0.6
0.6
0.6
0.4
0.4
0.4
0.4
0.4
BAIXABAIXABAIXABAIXAMÉDIAMÉDIAMÉDIAMÉDIAALTAALTAALTAALTA0.2
0.2
0.2
0.2
0.2
1.0
1.0
1.0
1.0
0.8
0.8
0.8
0.8
00000202020202025252525253030303030353535353540404040400.6
0.6
0.6
0.6
4)4)BAIXOBAIXOBAIXOBAIXOBAIXOMÉDIOMÉDIOMÉDIOMÉDIOMÉDIOALTOALTOALTOALTOALTO0.4
0.4
0.4
0.4
1.0
1.0
1.0
1.0
1.0
0.2
0.2
0.2
0.2
0.8
0.8
0.8
0.8
0.8
2)2)00000.6
0.6
0.6
0.6
0.6
50505050525252525454545456565656585858580.4
0.4
0.4
0.4
0.4
BAIXABAIXABAIXABAIXAMÉDIAMÉDIAMÉDIAMÉDIAALTAALTAALTAALTA0.2
0.2
0.2
0.2
0.2
1.0
1.0
1.0
1.0
000001)1)++3)3)202020202025252525253030303030353535353540404040400.8
0.8
0.8
0.8
0.6
0.6
0.6
0.6
H, Nível da Piscina [m]H, Nível da Piscina [m]H, Nível da Piscina [m]0.4
0.4
0.4
0.4
0.2
0.2
0.2
0.2
NEGATIVANEGATIVANEGATIVANEGATIVANULANULANULANULAPOSITIVAPOSITIVAPOSITIVAPOSITIVA1.0
1.0
1.0
1.0
000050505050525252525454545456565656585858580.8
0.8
0.8
0.8
3)3)BAIXABAIXABAIXABAIXAMÉDIAMÉDIAMÉDIAMÉDIAALTAALTAALTAALTA0.6
0.6
0.6
0.6
1.0
1.0
1.0
1.0
0.4
0.4
0.4
0.4
0.8
0.8
0.8
0.8
0.2
0.2
0.2
0.2
2)2)0.6
0.6
0.6
0.6
00005,05,05,05,0-5,0-5,0-5,0-5,0-2,5-2,5-2,5-2,500002,52,52,52,50.4
0.4
0.4
0.4
0.2
0.2
0.2
0.2
NEGATIVANEGATIVANEGATIVANEGATIVANULANULANULANULAPOSITIVAPOSITIVAPOSITIVAPOSITIVA00001.0
1.0
1.0
1.0
50505050525252525454545456565656585858580.8
0.8
0.8
0.8
4)4)F, Rotação da Bomba [Hz]F, Rotação da Bomba [Hz]F, Rotação da Bomba [Hz]0.6
0.6
0.6
0.6
0.4
0.4
0.4
0.4
0.2
0.2
0.2
0.2
00005,05,05,05,0-2,5-2,5-2,5-2,5-5,0-5,0-5,0-5,0.
.
.
H, Variação do Nível da Piscina [cm/s]H, Variação do Nível da Piscina [cm/s]H, Variação do Nível da Piscina [cm/s]2,52,52,52,50000 Figura 4.8. Representação da aplicação da Base de Regras para uma entrada dada. 
Outra forma de aplicar a Base de Regras é utilizando a associação de entradas na mesma regra. Lingüisticamente, a associação de regras ou variáveis se dá através dos operadores E e OU, enquanto que matematicamente são computadas segundo a Tabela 4.2. 
 31 Tabela 4.2. Implementações mais comuns de operadores lógicos E e OU. 
 E OU max( p + q - 1,0) min( p + q , 1 ) p + q – (p · q) Max( p , q ) Lukasiewicz Probabilístico p · q min( p , q ) Zadeh Pela  tabela,  é  possível  exemplificar  tomando  uma  situação  arbitrária.  Considere  que  na Base  de  Regras  anteriormente  apresentada,  o  efeito  da  oscilação  do  nível  apenas  fosse considerado  em  condições  específicas  do  nível  da  piscina,  de  forma  a  melhor  caracterizar  uma condição e conseqüentemente melhor controlar a resposta. Neste caso, a Base de Regras poderia ser reconstruída para o seguinte formato: 1.  Se o Nível da Piscina é Médio, Então a Rotação da Bomba é Média (Peso 1). 
2.  Se o Nível da Piscina é Baixo E a Variação do Nível da Piscina é Positiva, Então a Rotação da Bomba é Média (Peso 2). 
3.  Se o Nível da Piscina é Baixo E a Variação do Nível da Piscina NÃO é Positiva, Então a Rotação da Bomba é Baixa (Peso 2). 
4.  Se o Nível da Piscina é Alto E a Variação do Nível da Piscina é Negativa, Então a Rotação da Bomba é Média (Peso 2). 
5.  Se o Nível da Piscina é  Alto E a Variação do  Nível da Piscina NÃO  é Negativa, Então  a Rotação da Bomba é Alta (Peso 2). 
Nas  regras  apresentadas  aparece  também  o  operador  NÃO,  que  tem  a  função  de  ativar  a regra com o complemento do valor de pertinência do conjunto em questão, ou seja, se o conjunto é acionado com pertinência 0,3, este é não acionado em 0,7, de forma que este segundo valor é usado no cômputo do grau de ativação. 
Retomando o exemplo anterior e considerando a mesma entrada (Nível da Piscina com 0,6 em Médio e 0,4 em Alto e Variação do Nível da Piscina com pertinência igual a 0,3 em Negativa e 0,7 em Nula), as regras ativas seriam as de número 1, 4 e 5, pois: •  A  regra  de  número  1  possui  a  entrada  ativa  (Nível  da  Piscina  em  Médio)  com pertinência de 0,6;  •  A  regra  4  possui  ativos  o  Nível  da  Piscina  em  Alto  com  0,4  de  pertinência  e  a Variação do Nível da Piscina em Negativa com 0,3;  •  A regra 5 possui ativo o Nível da Piscina em Alto com 0,4 e possui NÃO ativa a Variação do Nível da Piscina em Negativa com 0,7; Para  associar  as  duas  entradas  acionadas  nas  regras  4  e  5,  é  necessário  usar  alguma  das regras  para  o  operador  E.  Tomando  ambos  os  casos  e  aplicando  cada  um  dos  critérios,  as pertinências totais de entrada ficam:  32 Regra 4) •  Lukasiewicz: max (0,4 + 0,3 - 1 ; 0) = max (-0,3 ; 0) = 0 •  Probabilístico: 0,4 · 0,3 = 0,12 •  Zadeh: min (0,4 ; 0,3) = 0,3 Regra 5) •  Lukasiewicz: max (0,4 + 0,7 - 1 ; 0) = max (0,1 ; 0) = 0,1 •  Probabilístico: 0,4 · 0,7 = 0,28 •  Zadeh: min (0,4 ; 0,7) = 0,4 Verificam-se os diferentes níveis de conservadorismo adotados por cada critério, de forma que  cada  um  pode  ser  usado  de  acordo  com  a  necessidade  de  cada  sistema.  No  caso  desta segunda Base de Regras, como a associação das duas variáveis de entrada permitiram tratar cada condição independentemente, as alternativas configuradas são as condições críticas do sistema, e por isso o peso maior frente à regra de número 1. Então, de forma a reforçar a importância das regras  associativas,  escolhe-se  o  critério  que  permite  o  maior  aumento  de  pertinência  e conseqüentemente o acionamento mais rápido – o critério de Zadeh.  
Finalmente, o grau de ativação das regras é dado pela Tabela 4.3. 
Tabela 4.3. Aplicação da Base de Regras usando entradas associativas. 
Regra Variável de Conjunto Variável de saída Rotação da Bomba Conjunto acionado Grau de ativação Peso Pertinência acionada Entrada Nível da Piscina Nível da Piscina Variação do Nível Nível da Piscina Variação do Nível ativo 0,6 1 1 1 Médio Média 0,4 Alto Rotação da Bomba 0,3 4 2 0,6 Média 0,3 Negativa 0,4 Alto Rotação da Bomba 0,8 0,4 5 2 Alta 0,7 NÃO Negativa A saída do sistema com esta nova Base de Regras pode então ser calculada, de forma que a Rotação da Bomba é representada pela condição:  33 +6,00,1++6,14,2==67,01.  Média com pertinência de  8,06,00,18,08,04,2==33,02.  Alto com pertinência de  ++8,06,00,14.1.3  Desnebulização para sistemas Mamdani Com o valor das pertinências dos conjuntos nebulosos das variáveis de saída calculados, o próximo passo é realizar a Desnebulização de forma a calcular o valor da variável no domínio do tempo para então acionar o sistema. Considerando as variáveis tomadas como exemplo na seção anterior, pode-se ilustrar o processo segundo a Figura 4.9. Repare que h é o Nível da Piscina,  h&  é a  Variação  do  Nível  da  Piscina  e  f  é  a  Rotação  da  Bomba,  de  forma  que  as  letras  minúscula representa a variável no domínio do tempo, o domínio real, e as letras maiúsculas representam as variáveis no domínio nebuloso. 
Domínio NebulosoDomínio NebulosoDomínio RealDomínio RealDomínio RealDomínio RealhhHHNível da PiscinaNível da PiscinaffFFRotação da BombaRotação da Bombah&h&H&H&Variação do NívelVariação do NívelBase de Base de RegrasRegrasNebulizaçãoNebulizaçãoDesnebulizaçãoDesnebulização Figura 4.9. Processo de conversão de variáveis exemplo do VASPS para o domínio nebuloso. 
Da mesma forma que no processo de nebulização, também é necessário definir o intervalo de discurso para a variável de saída. No caso do nosso exemplo, isso pode ser feito utilizando-se a expressão para  a equação da curva da bomba  apresentada no Capítulo 3, Equação (3.1), bem como a curva de vazão de entrada, apresentada através do Gerador de Golfadas, na Figura 3.1 e na Figura 3.2. Considerando que é necessário acionar a bomba com uma freqüência que permite uma vazão de saída média que garanta o balanço de massa, é possível definir uma vazão igual à média  do  patamar  inferior  de  vazão  do  gerador  de  golfadas,  algo  em  torno  de  750  m³/d.  Os acionamentos  superiores  serviriam  então  para  compensar  as  golfadas,  e  os  acionamentos inferiores, para compensar a redução do nível causada pelos acionamentos sucessivos. 
 34 Assim,  substituindo  o  valor  de  750  m³/d  na  Equação  (3.1),  obtém-se  uma  freqüência  de acionamento  de  aproximadamente  54  Hz  –  esta  freqüência  funcionará  como  o  centro  de  faixa. 
Então,  considerando  a  oscilação  de  vazão  entre  500  e  1000  m³/d,  os  valores  de  acionamento encontrado estão respectivamente pouco acima de 52 Hz e pouco abaixo de 56 Hz. Estes são os valores  ideais  com  que  a  bomba  deveria  trabalhar.  No  entanto,  nos  casos  mais  críticos,  estes valores de vazão apenas equilibrarão a vazão de entrada com a de saída, de forma que o nível se manteria  estático  em  um  nível  específico.  É  desejado  que  haja  a  possibilidade  de  correção  do nível  da  piscina,  o  que  doravante  exige  o  acionamento  mais  crítico  da  bomba.  Tomando  os acionamentos  de  250  m³/d  e  1200  m³/d,  de  forma  a  prover  uma  velocidade  de  correção apropriada, são encontrados os valores críticos de acionamento da bomba, 50 Hz e 58 Hz. Claro que  tão  embora  estes  estejam  no  universo  de  discurso,  é  desejado  que  não  ocorra  nenhum acionamento nestes patamares. 
Assim, com o intervalo da variável de saída definido, deve-se determinar a desnebulização. 
Há  diversos  métodos  para  tratar  este  processo.  Comumente  estes  são  métodos  geométricos, imaginando  que  os  conjuntos  nebulosos  de  saída  compõem  uma  figura  com  área  calculável. 
Assim, há tentativas de se encontrar o valor numérico em torno do qual esta figura se localiza, seja através do centro de massa (COG), do centro de área (COA), do pico da figura geométrica formada (MOM) ou desprezando parcelas de menores valores de pertinên •  Centro de Gravidade (COG): calcula o centro de massa, (média ponderada) da figura. 
∫∫µF)(xxdx=()x(4.3) 
cogF µF)(dxxx•  Centro de Gravidade discreto (COG): a mesma técnica pode ser utilizada quando a função de pertinência é discretizada, utilizando-se a variável q como índice para a discretização. 
∑∑NµFµF()xxqq=1Nqq=()cogF(4.4) 
 ()xq=1qq•  Centro  de  Gravidade  indexado  (ICOG):  calcula  o  centro  de  gravidade  considerando apenas  a  região  que  possui  valor  de  pertinência  igual  ou  acima  de  um  dado  parâmetro,  35 chamado de α. No exemplo, a função cut representa a remoção de área com pertinência menor que α. 
=−∩αα,)α,))(((icogFcogFFcut(4.5) 
 •  Média do Máximo (MOM): calcula o ponto onde a região de valor de pertinência máximo (pico) é dividida pela metade. 
=(mom)(,())FicogFhgtF(4.6) 
 •  Centro de Área (COA): calcula o ponto onde a área para desnebulização é dividida pela metade.  Na  equação,  as  funções  inf(x)  e  sup(x)  representam,  respectivamente,  o  valor inferior e o valor superior da abscissa no intervalo avaliado. 
supXx)FµFx(coa∫∫µF)F=)(dxx)(xdx(4.7) 
 infX(coaA  Figura  4.10  ilustra  a  aplicação  dos  métodos  de  desnebulização  apresentados  para  a variável de saída obtida nos exemplos desenvolvidos ao longo deste capítulo.  
a) COG contínuo (Centro de Gravidade)a) COG contínuo (Centro de Gravidade)b) COA (Centro de Área)b) COA (Centro de Área)1.0
1.0
1.0
1.0
1.0
1.0
.
.
).
).
0.8
0.8
0.8
0.8
0.8
0.8
))hhhh((hhhh((,,,,0.6
0.6
0.6
0.6
0.6
0.6
FFµµFFµµ0.4
0.4
0.4
0.4
0.4
0.4
GGG0.2
0.2
0.2
0.2
0.2
0.2
00000054 Hz54 Hz54545454,5 Hz54,5 Hz505050525252545454565656585858505050525252565656585858f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]c) COG indexado em 20%c) COG indexado em 20%d) MoM (Média do Máximo)d) MoM (Média do Máximo)1.0
1.0
1.0
1.0
1.0
1.0
).
).
.
.
0.8
0.8
0.8
0.8
0.8
0.8
hh,,hh(())hh,,hh((0.6
0.6
0.6
0.6
0.6
0.6
FFµµFFµµα = 20%α = 20%α = 20%0.4
0.4
0.4
0.4
0.4
0.4
GGG0.2
0.2
0.2
0.2
0.2
0.2
00000055 Hz55 Hz54 Hz54 Hz545454505050525252545454565656585858505050525252565656585858f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz] Figura 4.10. Técnicas de desnebulização aplicadas ao exemplo, com o valor de saída destacado. 
 36 4.1.4  Sistemas do tipo Sugeno Outro tipo de sistema nebuloso encontrado comumente na literatura e usado neste trabalho, é o sistema com regras do tipo Sugeno, como apresentado em Tanaka e Sugeno (1992) e Takagi e Sugeno (1985). Neste sistema, não são usados conjuntos nebulosos na saída, mas sim constantes ou funções das variáveis de entrada. Assim, a representação de uma regra poderia ser dada por: Se o Nível da Piscina é Baixo, Então a Rotação da Bomba deve ser igual a 54Hz. 
Matematicamente falando, e denotando o conjunto nebuloso Baixo por HB: 54=Se H é HB, Então . 
fHzNote que não há conjunto nebuloso de saída. No entanto, a definição de uma função para uma  dada  regra  permite  a  interpolação  de  diversas  funções  lineares  simples  para  obter  um resultado  não  linear  complexo,  ou  uma  representação  não  linear  de  um  sistema  com funcionamento linear em diversas regiões.  
Assim, retomando o último exemplo de Base de Regras, apresentado no formato Mamdani, é possível convertê-la para Sugeno através da definição de valores constantes de acionamento da saída (Rotação da Bomba) para cada regra, de forma que esta poderia ser expressa da seguinte maneira: 1.  Se o Nível da Piscina é Médio, Então a Rotação da Bomba é 54 Hz (Peso 1). 
2.  Se o Nível da Piscina é Baixo E a Variação do Nível da Piscina é Positiva, Então a Rotação da Bomba é 54 Hz (Peso 2). 
3.  Se o Nível da Piscina é Baixo E a Variação do Nível da Piscina NÃO é Positiva, Então a Rotação da Bomba é 50 Hz (Peso 2). 
4.  Se o Nível da Piscina é Alto E a Variação do Nível da Piscina é Negativa, Então a Rotação da Bomba é 54 Hz (Peso 2). 
5.  Se o Nível da Piscina é  Alto E a Variação do  Nível da Piscina NÃO  é Negativa, Então  a Rotação da Bomba é 58 Hz (Peso 2). 
Embora  os  valores  críticos  50  e  58  Hz  estejam  presentes  nas  regras,  estes  não  serão diretamente acionados, uma vez que o grau de pertinência toma valores progressivos, permitindo o  uso  parcial  do  valor  crítico.  Para  o  entendimento,  vide  abaixo  na  Tabela  4.4  a  aplicação  das regras  à  mesma  condição  anterior  de  acionamento  da  entrada  usando  o  critério  associativo  de Zadeh. 
 37 Tabela 4.4. Aplicação da Base de Regras Sugeno. 
Regra Variável de Conjunto Variável de saída Rotação da Bomba Valor Grau de ativação Peso Pertinência acionada Entrada Nível da Piscina Nível da Piscina Variação do Nível Nível da Piscina Variação do Nível ativo acionado 1 0,6 1 1 54 Hz Médio 0,4 Alto Rotação da Bomba 0,6 0,3 4 2 54 Hz 0,3 Negativa 0,4 Alto Rotação da Bomba 0,4 5 2 0,8 58 Hz 0,7 NÃO Negativa Com os graus de ativação em mãos, é possível realizar a desnebulização. Como as saídas são dadas em função de constantes, o valor final da saída é dado então pela média ponderada dos valores de acionamento pelos respectivos graus de ativação: ⋅+54)6,00,1(++8,06,00,1⋅588,08,1324,2==Hz3,55Rotação da Bomba é igual a  +Diferentemente  dos  sistemas  Mamdani,  os  sistemas  Sugeno  já  provêem  a  resposta  no domínio real diretamente, por tratar de valores numéricos reais. Entretanto, caso as variáveis de saída fossem expressas em termos de funções lineares, haveria outra forma de computar a saída, também  baseado  em  médias  ponderadas,  mas  como  não  este  artifício  não  será  usado  neste trabalho, esta situação também não será aqui introduzida. 
4.2 
Introdução à Teoria de Controle Um  sistema  é  representado  por  suas  equações  diferenciais,  modelado  de  acordo  com  a dinâmica física que este apresenta. É considerado como sistema qualquer fenômeno que possa ser representado  por  uma  equação  –  a  trajetória  de  um  projétil  quando  este  é  disparado,  o comportamento do nível de um tanque em função de suas vazões de entrada e saída ou a vazão de saída de uma bomba em função da rotação de seu rotor e da carga a que está submetida. Assim, um sistema responde com uma saída y(t) para uma dada entrada x(t), podendo ser ilustrado pela Figura 4.11.  
x(t)x(t)y(t)y(t)SISTEMASISTEMA Figura 4.11. Representação de um sistema em malha aberta. 
 38 Diz-se  que  um  sistema  está  em  malha  aberta,  quando  sua  saída  y(t)  não  é  usada  para controlar sua entrada, ou seja, quando o cômputo do sinal de entrada x(t) independe do valor de saída que o sistema apresentou. Por outro lado, se o valor da saída é monitorado e deve atingir um dado alvo, um valor desejado, é possível calcular o erro que a saída apresentou em relação a esta referência, de forma que o valor de entrada x(t+1) para o sistema é corrigido na expectativa de se reduzir o erro causado pelo valor anterior de saída. Este processo configura o sistema em malha fechada. 
A teoria de controle clássico prevê que o sistema controlado deve ser um sistema em malha fechada.  Assim,  os  sistemas  controlados  possuem,  além  do  bloco  representando  o  fenômeno físico  em  questão,  chamado  de  Planta,  o  bloco  referente  ao  Controlador,  que  irá  realizar  o cálculo corretivo do valor de entrada do processo no próximo instante de tempo. O sistema em malha fechada é então representado pelo diagrama de blocos da Figura 4.12. 
r(t)r(t)e(t)e(t)u(t)u(t)y(t)y(t)CONTROLADORCONTROLADORPLANTAPLANTA+ -+ - Figura 4.12. Diagrama de blocos para um sistema em malha fechada. 
Além  dos  dois  blocos,  que  possuem  cada  um  sua  dinâmica  representada  por  equações diferenciais, há os sinais característicos deste tipo de sistema, a saber: •  r(t): sinal de referência, ou set point. O sistema deve ser forçado a retornar o seu sinal de saída para o valor de referência por atuação do controlador. No sistema VASPS, o sinal de referência é o nível desejado de líquido na piscina; •  e(t): sinal de erro. É a diferença entre o sinal de referência e o sinal de saída; •  u(t): sinal de controle, ou esforço de controle. É o sinal que corrige o processo para que este retorne à referência. A variável que sofre a ação de controle é encontrada no atuador, e é chamada de variável manipulada. No VASPS, a variável manipulada é a freqüência de rotação da BCS, que é diretamente relacionada com a vazão de saída de líquido. 
•  y(t):  sinal  de  saída.  É  um  valor  medido  no  processo  que  indica  seu  status.  A  variável medida é a variável controlada. No caso, o nível real (medido) da piscina. 
 39 O problema de controle tradicional tem o objetivo de fazer a saída y(t) se comportar de uma forma  desejada  através  da  manipulação  do  sinal  de  controle  u(t).  Esta  forma  desejada  é  ditada pela  referência  r(t),  de  forma  que  o  erro  e(t)  seja  minimizado.  Na  literatura  também  é  comum encontrar  referências  ao  problema  do  regulador,  que  nada  mais  é  que  realizar  o  problema  de controle  para  um  sinal  de  referência  r(t)  constante,  sendo  usualmente  nulo.  Diversos  exemplos podem ser encontrados na literatura, como Ogata (1996) e Skogestad e Postlethwaite (1996).  
No  caso  do  VASPS,  a  Planta  é  dada  pela  dinâmica  de  variação  do  nível  da  piscina, apresentada no Capítulo 3 pela Equação (3.4), que é função das vazões de entrada (golfadas) e saída (vazão da BCS) de líquido.  
A vazão de entrada funciona como um distúrbio no sistema, causando oscilações no sinal de saída, y(t), representado pelo nível da piscina. Este sinal de distúrbio é conjugado na dinâmica de  variação  do  nível  com  a  vazão  de  saída,  que  é  acionada  pela  saída  do  controlador,  estando, portanto,  relacionada  com  o  sinal  de  controle,  u(t).  A  modelagem  do  sistema  de  controle  será discutida com mais detalhes no Capítulo 5 usando a modelagem física apresentada no Capítulo 3. 
Em  suma,  o  distúrbio  de  entrada  provoca  flutuações  na  variável  controlada,  que,  no controle clássico, devem ser suavizadas a fim de melhorar o desempenho do sistema. Neste caso de controle clássico, o desempenho do sistema poderia ser entendido como a manutenção de um patamar de vazão restrito à garantia da eficiência de separação. No caso do sistema VASPS, onde são utilizadas também outras técnicas que não o controle clássico, como visto mais adiante, além deste objetivo de controle, outro será abordado – a minimização do esforço de controle sobre a bomba. Isso se deve ao fato de que, conforme relatado em Peixoto et al. (2005) e no Capítulo 3, o atuador é um componente crítico do sistema que afeta a estratégia de controle a ponto de redefinir o conceito do controlador. 
A  manipulação  dos  sinais  apresentados  na  forma  de  equações  diferenciais  tem  uma complexidade matemática inerentemente alta. O sistema controlado em si é expresso por meio da convolução das equações diferenciais do controlador e da planta, e suas soluções temporais são na forma de funções senoidais e exponenciais, que representam a oscilação da resposta y(t) a uma dada  excitação  u(t)  na  planta.  Para  evitar  um  esforço  desnecessariamente  alto,  é  importante realizar a transformação do domínio do tempo para algum outro que facilite a análise matemática do  comportamento  do  sistema.  Uma  ferramenta  adequada  para  esta  tarefa  é  a  Transformada  de Laplace,  que  transfere  o  domínio  do  tempo  para  um  domínio  alternativo  na  variável  ‘s’,  o  que  40 torna  as  funções  diferenciais  em  funções  algébricas  simples.  Operações  de  diferenciação  e integração  são  substituídas  por  operações  algébricas  no  plano  complexo,  e  as  soluções  das equações  algébricas  em  ‘s’  fornecem  as  soluções  transiente  e  estacionária  das  equações diferenciais por meio das transformadas inversas de Laplace.  
Sabendo que um ‘sistema’ responde com uma saída y(t) para uma excitação x(t), e levando em  conta  que  este  pode  ser  expresso  em  formas  algébricas  simples  no  domínio  de  Laplace, define-se  a  Função  de  Transferência  (FT)  como  a  relação  entre  a  saída  de  um  sistema  e  sua entrada  no  domínio  da  variável  ‘s’.  O  conceito  de  Função  de  Transferência  (FT)  é  importante uma vez que a variável ‘s’ representa o domínio das freqüências, e consequentemente um dado valor  de  ‘s’  possui  a  informação  a  respeito  da  amplitude  de  oscilação  do  sistema  para  uma excitação  naquela  freqüência  específica.  Isso  permite  uma  série  de  benefícios  no  tratamento  de sistemas de controle: •  É possível saber as freqüências em que há máxima amplitude de oscilação no sistema a partir  do  gráfico  de  resposta  em  freqüência,  que  nada  mais  é  do  que  o  valor  da  FT variando-se  o  ‘s’  em  um  intervalo.  Estas  freqüências  são  identificadas  como  valores singulares e freqüência de ressonância (ou freqüência natural); •  É  possível  definir  conceitos  importantes  para  a  realimentação  em  malha  fechada,  como largura  de  banda  (freqüências  nas  quais  o  sistema  deve  operar)  e  a  amplitude  dos  picos das FTs (maior oscilação transiente da resposta do sistema); •  As  FTs  permitem  avaliar  a  resposta  da  planta,  controlada  ou  não,  a  uma  excitação qualquer definida, tão embora não forneça nenhuma relação pertinente  à estrutura física do sistema; •  A avaliação de sistemas em série é rapidamente obtida pela multiplicação das FTs, em vez das complicadas integrais de convolução necessárias no domínio do tempo; •  Os  pólos  e  zeros,  respectivamente  os  pontos  singulares  (quando  a  resposta  tende  ao infinito) e pontos nulos, do sistema aparecem explicitamente nas FTs, através das raízes dos polinômios de seu denominador e numerador. 
Assim, retomando o conceito de malha de controle e tendo em mãos as FT’s da Planta e do controlador,  é  possível  exemplificar  uma  possível  malha  de  controle  para  o  VASPS  segundo  o  41 diagrama de blocos da Figura 4.13. A variável controlada (o Nível) seria então regida de acordo com  a  Equação  (3.4),  e  a  curva  da  bomba  BCS,  não  linear,  de  acordo  com  a  Equação  (3.1), conforme proposto nos trabalhos de Teixeira et al. (2004) e Wang et al. (2001).  
  SetPoint++Curva da Curva da bombabombaSetPointde Nívelde NívelControladorControladorDinâmica Dinâmica Dinâmica do Níveldo Níveldo Nível--Gerador de Gerador de GolfadasGolfadas Figura 4.13. Diagrama de blocos com o detalhamento da planta do sistema VASPS. 
Ainda  importantes  em  um  sistema  de  controle  são  os  conceitos  de  parâmetros  de desempenho.  Antes  de  explicá-los,  vale  dizer  que  os  controladores,  cuja  lógica  é  desenvolvida para minimizar o erro dentro de um limite de operação, são dispositivos de baixa potência que calculam  as  modificações  necessárias  para  um  dado  erro  de  entrada  e  amplificam  este  sinal  de saída,  u(t),  a  um  nível  suficientemente  alto  para  alimentar  o  atuador.  A  partir  daí,  o  atuador exerce uma ação sobre a planta que por sua vez responde com o sinal de saída, y(t). Assim, para a avaliação  dos  parâmetros  de  desempenho,  considere  um  sinal  de  resposta  qualquer  como  o apresentado na Figura 4.14. 
ymaxymaxymaxy(t→∞)y(t→∞)y(t→∞)PSS = PSS = PSS = y(t→∞)y(t→∞)r(t) = y(t→∞)r(t) = y(t→∞)y(t→∞)y(t→∞)y(t→∞)eest =eest =eest =- 1- 1- 1r(t)r(t)r(t)50% · y(t→∞)50% · y(t→∞)Treação.
Treação.
Testab.
Testab.
 Figura 4.14. Sinal de resposta com o destaque dos parâmetros de desempenho. 
 42 Os principais critérios para se avaliar se uma resposta atendeu a um determinado nível de desempenho são expressos em função de características da resposta. Estas características também são usadas na especificação de estratégias de controle. Basicamente, as principais características avaliadas são as seguintes: •  Tempo  de  reação:  tempo  necessário  para  que  a  resposta  atinja  o  valor  de  50%  do seu valor estacionário; •  Tempo  de  estabilização:  Tempo  necessário  para  que  o  valor  da  resposta  após oscilações se encaixe no intervalo de +5% a -5% de seu valor estacionário; •  Percentual de sobresinal (PSS): valor máximo (de pico) atingido pela resposta, em porcentagem relativa ao seu valor estacionário; •  Erro  estacionário:  divergência  em  porcentagem  entre  o  valor  estacionário  da resposta e o valor de referência recebido pelo sistema. 
Por  fim,  os  controladores  industriais  mais  comumente  utilizados  são  os  PIDs,  assim chamados  por  computarem  as  modificações  necessárias  para  a  planta  de  acordo  com  uma composição  dos  sinais  Proporcional  ao  erro,  Integral  do  erro  e  Derivada  do  erro.  Estes controladores  possuem  ganhos  ajustáveis  em  cada  um  destes  três  sinais,  de  forma  a  permitir  o ajuste  de  características  específicas  de  resposta  transiente  separadamente  e  serão  apresentados com mais detalhes na próxima seção.  
4.2.1  Controle PID O controle PID se baseia em utilizar o sinal de erro calculado através da realimentação da variável  controlada  real  na  entrada  do  sistema,  fechando  a  malha  de  controle  e  comparando-a com o valor de referência que deve seguir. Este erro alimenta o controlador, que integra e deriva este erro, somando estes três sinais após passarem por ganhos individuais, proporcional, integral e derivativo, conforme diagrama esquemático da Figura 4.15.  
PPr(t)r(t)e(t)e(t)u(t)u(t)y(t)y(t)++++∫∫PROCESSOPROCESSOII+ -+ -++dddtdtDD Figura 4.15. Diagrama esquemático de controle PID convencional. 
 43 O efeito dos três sinais na composição do sinal de controle  u(t) é suficiente para cobrir a maior parte dos problemas de controle, utilizando-se técnicas diferentes para ponderar os ganhos do controlador. Em suma, o ganho proporcional é responsável pelo tempo de resposta do sistema a uma dada entrada, provocando muitas oscilações e sobresinal no caso de este estar muito alto. 
O ganho integral é responsável por remover o erro estacionário do sistema, causando atrasos na resposta  para  ganhos  altos,  e  o  ganho  derivativo  remove  as  oscilações,  amortecendo  o  sistema, mas causando erro estacionário se muito alto. O cálculo do sinal de controle  u(t) e sua  FT são dados pela Equação (4.8). 
+⋅+⋅²KsKsKde⇒⋅dtKs∫pdi+⋅=⋅+=++⋅=(4.8) 
)(sKiKeKuedtKKsKpidpds O correto balanço no valor dos ganhos é chamado se ajuste ou sintonia do controlador PID, e  compreende  a  tarefa  mais  difícil  na  configuração  deste  tipo  de  controlador.  Há  técnicas  de projeto de controle PID, como a técnica de Ziegler-Nichols, onde um valor pré-ajustado para os ganhos é sugerido, de forma que o ajuste a ser realizado normalmente é apenas um ajuste fino em torno dos valores encontrados no projeto. No entanto, alguns controladores PID,  especialmente aqueles  em  que  se  deseja  alto  desempenho,  não  apresentam  o  desempenho  ótimo  com  esta técnica, exigindo um projeto analítico do controlador, realizado com base na FT do sistema e na alocação dos pólos do sistema controlado, conforme apresentado na literatura consagrada, como em Ogata (1996), onde diversos exemplos podem ilustrar o projeto de controlador PID. 
Para  sistemas  de  ordem  maior  é  necessário  o  auxílio  de  recursos  computacionais  e softwares especializados, pois o cálculo analítico torna-se muito complexo, tanto para o cômputo do controlador quanto para a identificação do sistema - que compreende descobrir a FT através de técnicas  experimentais.  Este  fator  é  principal  demandante  de  uma  modelagem  correta  e simplificada de sistemas dinâmicos para controle. 
4.2.2  Controle Nebuloso As  técnicas  de  controle  nebuloso  fazem  uso  dos  mesmos  sinais  convencionados  para  as técnicas  de  controle  tradicional,  com  a  exceção  de  que  seu  objetivo  não  necessariamente  é minimizar  o  erro  e(t).  O  acoplamento  do  dispositivo  de  inferência  nebulosa,  que  permite  a tomada de decisões em sistemas que utilizam a lógica nebulosa, permite que o controlador trate seus  sinais  de  entrada,  ou  seja,  o  sinal  de  erro,  e(t),  do  sistema,  de  acordo  com  sua  lógica programada, extraindo informações que permitem a retirada de conclusões simples sobre o status  44 do  processo.  Assim,  é  possível  construir  um  mecanismo  que  funcione  de  forma  a  considerar objetivos mais flexíveis na estratégia de controle. 
Os  passos  a  serem  seguidos  no  projeto  de  controladores  nebulosos  são  basicamente  os mesmos  da  construção  de  um  dispositivo  de lógica  nebulosa,  conforme  apresentado anteriormente. Em essência, o controle nebuloso lança mão das variáveis lingüísticas introduzidas pela  lógica  nebulosa  para  realizar  o  controle  de  sistemas  em  malha  fechada,  permitindo  que  o conhecimento  de  especialistas  seja  incorporado  ao  controlador,  melhorando  o  desempenho  de sistemas  de  comportamento  conhecido.  Há  diversas  técnicas  de  controle  nebuloso,  em  especial algumas utilizando o controle PID. A não ser que seja desenvolvido com o propósito contrário, o controlador  nebuloso  é  não-linear,  se  adaptando  melhor  a  plantas  não-lineares  e  lidando eficientemente  com  as  incertezas  do  modelo,  caso  o  controlador  tenha  sido  desenvolvido  com eficácia. 
A  Figura  4.16.  apresenta  um  diagrama  de  blocos  de  um  sistema  controlado  por  um controlador  nebuloso  com  as  entradas  erro  e  derivada  do  erro.  A  integração  do  controlador inteligente  com  as  entradas  convencionais  de  um  controlador  PID  implica  em  um  conjunto  de características peculiares para a construção das variáveis nebulosas e seus conjuntos, dado que o controle é comumente realizado com fechamento de malha e, portanto, lida com a minimização do erro em um processo qualquer.  
r(t)r(t)e(t)e(t)u(t)u(t)y(t)y(t)CONTROLADORCONTROLADOR+ -+ -PLANTAPLANTAdddtdtNEBULOSONEBULOSO∆e(t)∆e(t) Figura 4.16. Processo controlador por sistema nebuloso com entradas Erro e Derivada do Erro. 
Uma vez que o controle nebuloso é comumente não-linear, o sinal de controle não possui uma função de transferência, de forma que o controlador pode ser projetado para se ajustar à não-linearidade da planta, quando há conhecimento sobre seu comportamento. Esta adequação se dá na forma da Base de Regras de um sistema Nebuloso, substituindo um cômputo tão analítico do sinal  de  controle  quanto  o  realizado  por  uma  equação.  Assim  sendo,  um  sistema  com  um controlador  nebuloso  teria  regras  referenciando  o  erro  e  suas  derivações  como  variáveis nebulosas de entrada e o sinal de controle como variável nebulosa de saída. Com a construção de conjuntos nebulosos adequados, poder-se-ia ter uma situação como a ilustrada pela Figura 4.17, onde é apresentada uma possível aplicação da base de regras a uma determinada entrada. 
 45 Se ERRO é ALTO,Então SINAL DE CONTROLE é ALTOERROSINAL DE CONTROLEbaixoaltobaixonuloalto75% nulo25% alto25% alto10%u(t) Figura 4.17. Exemplo de aplicação de sistema com controle nebuloso. 
 46     Capítulo 5  5  Metodologia Este capítulo apresenta a aplicação dos conceitos explorados no Capítulo 4 para a síntese de controladores  no  contexto  do  Sistema  VASPS,  delimitado  na  modelagem  física  realizada  no Capítulo 3. O desenvolvimento das metodologias de síntese de controladores usa duas estratégias de controle distintas abordadas nas duas seções deste capítulo. A primeira estratégia compreende melhorar  o  sinal  de  resposta  através  de  melhorias  no  mesmo  controlador  usado  em  campo, limitando  o  escopo  da  metodologia  à  reformulação  da  solução  existente  e  melhorando  seu desempenho.  A  segunda  estratégia,  abordada  na  seção  seguinte,  extrapola  o  uso  da  tecnologia convencional,  lançando  mão  de  uma  solução  menos  convencional  para  alcançar  resultados operacionais  mais  significativos,  trabalhando  diretamente  a  questão  da  melhor  manipulação  do atuador, a Bomba BCS, reduzindo o esforço de controle realizado sobre esta.  
5.1  Controle voltado ao Desempenho O controle voltado ao desempenho tem o objetivo de acompanhar o sinal de referência, de forma que a saída do sistema oscile o mínimo possível. Por sua vez, a saída do sistema pode ser qualquer variável física lida através de um sensor – temperatura, pressão, vazão, rotação ou nível. 
No caso do VASPS, a variável de saída é o nível de líquido no reservatório interno ao separador, chamado  anteriormente  de  ‘piscina’,  de  forma  que  mantendo  um  sinal  de  referência  fixo, mantém-se também este nível o menos variante possível e por conseqüência o sistema permanece em condições operacionais previsíveis. 
Esta abordagem leva à possibilidade de análise do sinal de resposta – no caso, a variação do nível – para determinar comportamentos assintóticos da resposta do sistema, ou seja, é possível afirmar sobre seu valor estacionário em regime permanente ou identificar a variação da resposta  47 em função de uma dada entrada conhecida. Por sua vez, o sinal de controle, ou seja, a freqüência de  rotação  da  bomba  oscila  de  forma  a  corrigir  os  distúrbios  impostos  no  processo,  possuindo uma forma muitas vezes similar à do distúrbio de entrada. 
Este tipo de abordagem é necessário quando a trajetória do sinal de saída é importante, ou quando os limites de estabilidade da saída do processo são muito rígidos. Aplicações comuns são no  controle  de  rotação  de  bombas,  com  o  intuito  de  mantê-las  trabalhando  no  ponto  ótimo operacional. Devido à simplicidade e à facilidade em aplicar-se a lógica a máquinas, este é o uso mais  comum  de  controladores  na  indústria,  tendo  apresentado  desenvolvimentos  bastante complexos desde a concepção do controlador PID. Este mesmo já possui hoje diversas técnicas de projeto que permitam ajustar os ganhos de forma a evitar um regime transiente complicado, com atrasos na resposta ou picos de funcionamento antes da estabilização do sistema. 
Aplicando então técnicas de controle nebuloso ao controlador PID clássico, apresentado no Capítulo 4, é possível sintetizar um mecanismo de ajuste dinâmico dos ganhos, modificando-os segundo  condições  operacionais  do  sistema.  Esta  forma  de  ajuste  automático  foi  inicialmente proposta  por  Van  Nauta  Lemke  e  De-Zhao  (1985)  para  melhorar  o  desempenho  dinâmico  do controlador.  Muitas  técnicas  foram  desenvolvidas  neste  sentido,  e  podem  ser  encontradas  na literatura  como  ‘controle  adaptativo’  (Krstic  et  al.,  1995  e  Astrom  e  Wittenmark,  1994),  ‘PID com  gain  scheduling’  (Zhao  et  al.,  1995)  ou  ‘self  tuning  PID’  (Astrom  e  Wittenmark,  1973  e Clarke e Gawthrop, 1975). 
A aplicação desta tecnologia de auto-ajuste no sistema VASPS é apresentada na próxima seção sob a nomenclatura de controle híbrido Fuzzy-PID, uma vez que mescla a técnica clássica de  controle  PID  com  conceitos  de  lógica  nebulosa.  Outras  formas  desta  mesma  combinação podem ser encontradas na literatura. 
5.1.1  Controle Híbrido Fuzzy-PID O modelo adaptado de Van Nauta Lemke e De-Zhao (1985) consiste na supervisão de um sistema  de  controle  PID  por  um  controlador  inteligente  hierarquicamente  superior.  Isto  tem objetivo  de  propiciar  um  aumento  do  desempenho  na  resposta  possibilitando  melhorar  a eficiência operacional, bem como permitir a concepção de um controlador não-linear, capaz de seguir  um  sistema  também  não-linear.  Conceitualmente,  ao  aplicar  o  controlador  inteligente  no nível  de  supervisão,  o  controle  efetivo  do  processo  permanece  sendo  o  Controlador  PID,  não  48 havendo intervenção direta na malha de controle, mas com a diferença que o PID será ajustado dinamicamente de acordo com o status do processo monitorado. 
Considerando  o  modelo  da  planta  apresentado  no  Capítulo  3,  foi  elaborado  um  controle PID clássico para que o módulo supervisor pudesse ser aplicado sobre este. Utilizando técnicas comuns de projeto de controladores PID, foi construído o controlador apresentado na Figura 5.1, 
que possui seus ganhos conforme apresentado na Equação (5.1). 
PKPK++PlantaPlantareferênciareferência∫∫dddtdtIKIK++++--(Processo)(Processo)++DKDK Figura 5.1. Diagrama de Blocos do Controlador PID. 
=10p=.0
001=100KKiK++100².0
00110sss→=)(sK (5.1) 
dCom  estas  constantes,  pode-se  calcular  a  FT  do  controlador,  conforme  apresentado  na Equação (5.2), verificando os pólos do controlador, segundo a Equação (5.3). 
−3++100(9.9)001.0
10²ss−26++9.9²
sse⋅e+²s+s10s⋅⋅)()()(sPsK+)(sPsK100(+²s100(10+.0
+011.3)001⋅.0
e===)(sH (5.2) 
−⋅1².3)0010119.9
s2−−−(5.3) 
9.9,1[:e]pólos Assim,  o  diagrama  de  blocos  para  o  sistema  com  o  módulo  supervisor  é  apresentado  na Figura  5.2,  onde  a  estrutura  básica  do  controlador  foi  detalhada,  e  um  bloco  foi  usado  para representar o processo. 
 49  Figura 5.2. Diagrama de blocos do controlador Supervisório, adaptado de Van Nauta Lemke e De-Zhao (1985). 
O controlador inteligente, inserido no bloco de supervisão da Figura 5.2, tem como objetivo reforçar  o  sinal  de  controle  através  do  aumento  do  valor  das  constantes  do  PID  em  uma  dada situação  de  condição  operacional  definida  na  parametrização  do  controlador  nebuloso.  Esta condição  operacional,  por  ser  definida  pela  Base  de  Regras  do  comportamento  do  controlador nebuloso, ocorre de acordo com a parametrização escolhida pelo projetista. Por exemplo, para um dado processo não-linear, P(s), a saída do sistema, dada pela Equação (5.4), terá comportamento próximo  ao  linear  desejado  apenas  se  o  sinal  de  controle  u(T)  for  também  não-linear  e compensando este comportamento. 
=⋅(Ty)(TusP)() (5.4) 
O  diagrama  do  controlador  FPID,  apresentado  na  Figura  5.3,  é  o  ponto  de  partida  para  a especificação. A notação adotada para os sinais é a seguinte: e: erro; ie: integral do erro; ce: mudança no erro (proveniente do inglês change in error); x: erro relativo; ix: integral relativa do erro; cx: mudança relativa do erro. 
Além disso, a saída do sistema são variações nas constantes, ∆P, ∆I e ∆D, que são somadas às constantes iniciais do sistema, P0, I0 e D0, de forma a compor a constante final que opera no sistema  variando  conforme  o  status  corrente.  Estas  saídas  do  sistema  possuem  cada  uma  seus  50 conjuntos  nebulosos,  conforme  apresentado  no  Capítulo  4.  Esta  formulação  apresentada anteriormente  é  encontrada  na  literatura  citada  rotulando  este  sistema  nebuloso  como  sendo  do tipo ‘Mamdani’. 
P0P0++∆P∆PPfPfeK xeK xee11rr++0P0PPPOOÃÃÇÇAACCFFZZZZUUFFEEDDBASE BASE ||||OOÃÃÇÇAACCFFZZZZUUFFI0I0++∆I +∆I +IfIfieieixix11rr0I0IIIieKieKIIDEDEIIII||||IID0D0++∆D +∆D +DfDfREGRASREGRAScececxcx11rr0D0DDDceKceK|||| Figura 5.3. Detalhamento do controlador FPID do Modelo Supervisório. 
O controlador integrado  e detalhado é  apresentado na Figura 5.4, onde é  possível notar o supervisor atuando diretamente sobre as constantes do controlador PID, respeitando o conceito de não-interferência direta no sinal de controle.  
0P0P++++∆∆P +P +PPffeeeK xeK x11rrPPOOÃÃÇÇAACCFFZZZZUUFFEEDD00eeOOÃÃÇÇAACCFFZZZZUUFF||||||||0I0I++BASE BASE ∆∆I +I +fIfIieieixix11rrIIDE DE ieKieKII00IIII||||REGRASREGRASII0D0D++∆∆D +D +fDfDcececxcx11| r| rDDceKceK00||PPPP++PlantaPlantarr∫∫II++++--(Processo)(Processo)++dddtdtDD Figura 5.4. Diagrama de blocos do controlador FPID. 
Através  do  diagrama  completo  da  Figura  5.4  é  possível  identificar  o  cálculo  para  as variáveis de entrada, de forma que o erro e, a mudança no erro, ce, e a integral do erro, ie, são dadas respectivamente pelas Equações (5.5), (5.6) e (5.7). 
  51 =−)(Te)(Tyr (5.5) 
−−(TeT(Te))1= (Tce)(5.6) 
n∑=)(Tie)(i Te (5.7) 
1Da  mesma  forma,  as  saídas  do  supervisor,  ou  seja,  as  constantes  P,  I,  e  D,  são  dadas respectivamente pelas Equações (5.8), (5.9) e (5.10), e as entradas normalizadas x, cx e ix, dadas pelas equações (5.11), (5.12) e (5.13). 
= 0PP∆+P (5.8) 
= 0I∆+II (5.9) 
= 0DD∆+D (5.10) )(Ter=⋅ )(TxK(5.11) e)(Tcer =⋅)(TcxK(5.12) ce)(Tier=⋅ )(TixK(5.13) ieO sinal de controle resultante do modelo tem a mesma equação do controle PID, mas com a diferença  de  que  os  termos  relativos  aos  ganhos  possuem  uma  não-linearidade  intrínseca, referentes aos termos ∆P, ∆I e ∆D, que podem ser modelados para atuar diferentemente com a variação dos componentes de erro. Estes por sua vez, representados pelas variáveis x, cx e ix, são classificados  durante  o  processo  de  fuzzificação  com  uma  pertinência  dada  pelos  conjuntos nebulosos. Um exemplo de como a Lógica Nebulosa pode ser aplicada é apresentada na Figura 5.5,  para  um  processo  onde  a  entrada  assume  valores  relativos  no  intervalo  [-1,1]  e  a  saída imprima variações de -100% até +100% no valor original da constante. 
 52 a)a)a)Conjuntos Nebulosos de EntradaConjuntos Nebulosos de EntradaConjuntos Nebulosos de EntradaµµµµµµN ZN ZN ZN--N--N--PPPP++P++P++aaacccnnnêêênnniiitttrrreeePPPiii-100%-90%-100%-90%-100%-90%-30% -10% 0 10% 30%-30% -10% 0 10% 30%-30% -10% 0 10% 30%90% 100%90% 100%90% 100%Entrada de erro (x, ix ou cx)Entrada de erro (x, ix ou cx)Entrada de erro (x, ix ou cx)b)b)b)µµµConjuntos Nebulosos da Saída PfConjuntos Nebulosos da Saída PfConjuntos Nebulosos da Saída PfLEGENDALEGENDALEGENDAN--: Muito NegativoN--: Muito NegativoN--: Muito NegativoNNNZZZPPPP+ P++P+ P++P+ P++N--N--N--N-N-N-N-: Negativo IntermediárioN-: Negativo IntermediárioN-: Negativo IntermediárioaaacccnnnêêênnniiitttrrreeePPPiiiN: Pouco NegativoN: Pouco NegativoN: Pouco NegativoZ: ZeroZ: ZeroZ: ZeroP: Pouco PositivoP: Pouco PositivoP: Pouco PositivoP+: Positivo IntermediárioP+: Positivo IntermediárioP+: Positivo Intermediário- 100% -50%- 100% -50%- 100% -50%00050% 100%50% 100%50% 100%P++: Muito PositivoP++: Muito PositivoP++: Muito PositivoVariação Percentual em PVariação Percentual em PVariação Percentual em Pc)c)c)µµµConjuntos Nebulosos das Saídas Df e IfConjuntos Nebulosos das Saídas Df e IfConjuntos Nebulosos das Saídas Df e IfZZZPPPP++P++P++NNNN--N--N--aaaiiicccnnnêêênnniiitttrrreeePPP- 100%- 100%- 100%-50%-50%-50%00050%50%50%100%100%100% Variação Percentual em D ou IVariação Percentual em D ou IVariação Percentual em D ou IFigura 5.5. Conjuntos nebulosos para o controlador FPID. 
Na Figura 5.5 (a), é apresentada a função de pertinência modelada para as três variáveis de entrada, x, ix e cx, de forma que em torno do zero as variáveis assumem valores de pertinência nos  conjuntos  “Zero”  (Z),  “Pouco  Negativo”  (N)  e  “Pouco  Positivo”  (P)  e,  ao  passo  que  vão aumentando  ou  diminuindo  assumem  pertinências  maiores  nestes  últimos  dois  conjuntos  até ativarem os conjuntos nebulosos “Muito Negativo” (N--) ou “Muito Positivo” (P++). Com isto, é possível  criar  regras  distintas  de  acionamento  das  variáveis  de  saída  para  quando  a  resposta transiente  estiver  muito  longe  da  estabilização  (por  exemplo,  erro  normalizado  x  “Muito Positivo” (P++) ou “Muito Negativo” (N--), ou uma combinação de erro x “Pouco Positivo” (P) com  derivada  “Muito  Positiva”  (P++)  ou  “Pouco  Positiva”  (P)  e  outras  regras  para  alterar  os valores  das  constantes  P,  I  e  D  quando  o  sistema  estiver  perto  da  estabilização  (por  exemplo,  53 quando o erro for “Zero” (Z), ou quando houver uma combinação de erro “Pouco Positivo” (P) com a derivada “Pouco Negativa” (N) ou com a Integral “Zero” (Z). 
Já  nos  itens  (b)  e  (c)  da  Figura  5.5,  são  apresentadas  as  funções  de  pertinência  para  as variáveis de saída, que são as variações percentuais impressas às constantes do controlador PID. 
Neste  caso,  a  construção  dos  conjuntos  nebulosos  para  a  variável  de  saída  ∆P  é  diferente  da construção das outras duas, possuindo o conjunto nebuloso “Zero” (Z) e os conjuntos nebulosos “Muito  Positivo”  (P++)  e  “Muito  Negativo”  (N--)  mais  estreitos.  No  caso  do  primeiro  dos conjuntos, isso se faz necessário pois na composição do sinal de controle a contribuição do sinal de  erro  normalizado  x  torna-se  muito  pequena  devido  à  redução  do  erro  na  estabilização,  de forma que se faz necessário imprimir variações rápidas na constante P para obter-se um sinal de controle mais efetivo. Já na caso dos últimos dois conjuntos citados, isso ocorre pois nas saídas referentes aos ganhos D e I é interessante que haja um reforço maior nestas constantes devido a estas  serem  os  valores  ativos  mais  representativos  no  período  de  estabilização,  de  forma  que  a grande  área  dos  conjuntos  “Muito  Negativo”  (N--)  e  “Muito  Positivo”  (P++)  destas  variáveis influencia na ponderação dos conjuntos no processo de defuzzificação. 
Finalmente, estes conceitos devem estar claros e definidos pela Base de Regras, de forma que  percebe-se  que  a  criação  dos  conjuntos  nebulosos  e  a  definição  destas  regras  não  são totalmente independentes, sendo construídas uma em função da outra, e ambas de acordo com o comportamento desejado para o controlador. Usualmente, poder-se-ia desejar um comportamento linear da saída, o que facilitaria a modelagem matemática e a avaliação de resultados. No entanto, o  objetivo  não  é  simplificar  a  álgebra  do  controlador  e  sua  função  de  transferência,  mas  sim buscar o melhor resultado que se possa extrair do sistema.  
No  caso  em  questão,  onde  o  objetivo  é  manter  o  nível  da  piscina  do  VASPS  o  mais próximo possível do valor de referência – um requisito claramente voltado para o desempenho do controlador,  mantendo  o  valor  de  referência  na  saída  –  há  algumas  adaptações  necessárias considerando  os  equipamentos  usados  em  campo  e  os  critérios  de  desempenho.  O  primeiro comportamento  desejado  diz  respeito  à  atuação  do  controlador  em  momentos  diferentes  do regime  transiente  (a  saber:  início  de  um  grande  distúrbio  versus  período  de  estabilização), enquanto que o segundo diz respeito à restrição física de vazão sempre positiva, de forma que as seguintes melhorias podem ser incluídas na Base de Regras frente ao controlador PID puramente matemático:  54 Caso 1)  Reforçar o sinal de controle para pequenos valores de erro a fim de aumentar a taxa de correção próxima à estabilização; Caso 2)  Eliminar  contribuições  negativas  das  componentes  do  erro  na  composição  do  sinal  de controle,  evitando  que  sejam  necessários  valores  negativos  de  correção  do  sistema  (que implicariam em saturação do controlador no sistema PID). 
No  primeiro  caso,  lembrando-se  da  composição  do  sinal  de  controle  dada  pela  Equação (5.14), é possível reforçar o sinal de controle quando as componentes do erro, e(t), ie(t) e ce(t), assumirem valores de amplitude baixa (entrada igual a ‘Z’, ‘N’ ou ‘P’) devido à estabilização do sinal de resposta, através do aumento das constantes P, I e D. 
⋅=⋅++⋅)(tu)(teP)()(tceDtieI (5.14) No  segundo  caso,  o  desempenho  é  melhorado  apenas  quando  o  atuador  do  sistema  tem relevância em apenas um sentido, como por exemplo no VASPS, onde a BCS deve manter um dado nível, atuando apenas com vazão de saída positiva para níveis altos, ou simplesmente não atuando  para  níveis  baixos.  Além  disso,  eliminar  contribuições  negativas  pode  vir  a  ter  um impacto  significante  quando  o  sistema  sem  a  correção  gera  sinais  de  erro  grandes  o  suficiente para  saturar  o  atuador,  atrasando  a  resposta  e  piorando  o  regime  transiente.  Com  isso,  para  a efetivação de um sinal de controle apenas em um sentido, é realizado um acréscimo de um delta de -100% (saída igual a ‘N--’) quando os sinais de erro forem negativos (entrada igual à ‘N’ ou ‘N--’).  
Embora o sistema proposto possua três entradas e três saídas, a Base de Regras é dividida em três matrizes correspondentes a cada variável de saída, de forma simplificar a verificação da saída. Assim, cada uma das saídas será função de apenas duas variáveis de entrada, colocadas na linha e na coluna da matriz. 
Para melhor ilustrar a Base de Regras, segue-se a notação da Tabela 5.1, que apresenta um rótulo  numérico  para  cada  conjunto  nebuloso  das  variáveis  de  saída  Pf,  If  e  Df.  Estes  rótulos apresentam também uma casa decimal, utilizada para representar o grau de ativação da regra, e cujo valor é o complemento do número apresentado nesta casa decimal. 
 55 Tabela 5.1. Representação dos conjuntos nebulosos para a base de regras. 
Pf 1,0 2,0 3,0 4,0 5,0 6,0 7,0 Df, If 1,0 Significado Sigla N-- N- N Z P P+ P++ Muito Negativo Negativo Médio Pouco Negativo - 2,0 3,0 4,0 Zero Pouco Positivo Positivo Médio Muito Positivo - 5,0 Exemplificando,  caso  uma  célula  da  matriz  que  representa  a  base  de  regras  apresente  o valor 4.0, se a variável de saída analisada corresponder à saída Pf, o conjunto nebuloso ativado será o ‘Z’. De outra forma, se corresponder às saídas Df ou If, o conjunto ativado será o ‘P’. Outro exemplo ocorre para o caso do valor ser 6.3, o que significa que a saída Pf será ativada com 70% de pertinência no ‘P+’ (6.0) e 30% no ‘P++’ (7.0). 
Com isso, a Base de Regra para os dois casos anteriormente abordados pode ser observada na Tabela 5.2, onde é possível notar que o reforço para a constante Pf é aplicado quando o erro é pequeno, mas diferente de zero, pois quando o erro é pequeno e sua variação é nula, o sinal se estagnou naquele valor, devendo ser reforçado. Já o reforço das constantes If e Df ocorre quando tanto  o  erro  quanto  sua  integral  ou  derivada  se  aproximam  do zero,  assumindo  um  valor  ainda maior quando exatamente em zero. 
Tabela 5.2. Base de regras do controlador supervisor FPID   Variação do Erro Integral do Erro Variação do Erro Pf If Df N--  N  Z  P  P++ N--  4.0  4.0  4.0  4.0  4.0 
N  4.0  3.0  1.7  3.0  4.0 
Z  4.0  4.0  4.0  4.0  4.0 
P  4.0  5.0  6.3  5.0  4.0 
P++  4.0  4.0  4.0  4.0  4.0 
N--  N  Z  P  P++ N--  3.0  3.0  3.0  3.0  3.0 
N  3.0  3.0  4.0  3.0  3.0 
Z  3.0  4.0  5.0  4.0  3.0 
P  3.0  3.0  4.0  3.0  3.0 
P++  3.0  3.0  3.0  3.0  3.0 
N--  N  Z  P  P++ N--  3.0  3.0  3.0  3.0  3.0 
N  3.0  3.0  4.0  3.0  3.0 
Z  3.0  4.0  5.0  4.0  3.0 
P  3.0  3.0  4.0  3.0  3.0 
P++  3.0  3.0  3.0  3.0  3.0 
   orrorrorrEEENa  Tabela  5.2  é  possível  notar  que  o  reforço  para  a  constante  Pf  é  dado  quando  o  erro  é pequeno, mas diferente de zero, pois quando o erro é pequeno e sua variação é nula, o sinal se estagnou naquele valor, devendo ser reforçado. Já o reforço das constantes If e Df ocorre quando tanto  o  erro  quanto  sua  integral  ou  derivada  se  aproximam  do zero,  assumindo  um  valor  ainda maior quando exatamente em zero.  
Por sua vez, a Tabela 5.3 apresenta a Base de Regras para um sistema onde não se desejam contribuições negativas no sinal de controle, ou contribuições quaisquer quando o erro do sistema esteja abaixo de zero, indicando que este ainda não atingiu seu status operacional desejado. 
 56 Tabela 5.3. Base de regras do controlador supervisor FPID   Variação do Erro Integral do Erro Variação do Erro Pf If Df N--  N  Z  P  P++ N--  1.0  1.0  1.0  1.0  1.0 
N  1.0  1.0  1.0  1.0  1.0 
Z  4.0  4.0  4.0  4.0  4.0 
P  4.0  4.0  4.0  4.0  4.0 
P++  4.0  4.0  4.0  4.0  4.0 
N--  N  Z  P  P++ N--  1.0  1.0  1.0  1.0  1.0 
N  1.0  1.0  1.0  1.0  1.0 
Z  1.0  1.0  3.0  3.0  3.0 
P  1.0  1.0  3.0  3.0  3.0 
P++  1.0  1.0  3.0  3.0  3.0 
N--  N  Z  P  P++ N--  1.0  1.0  1.0  1.0  1.0 
N  1.0  1.0  1.0  1.0  1.0 
Z  1.0  1.0  3.0  3.0  3.0 
P  1.0  1.0  3.0  3.0  3.0 
P++  1.0  1.0  3.0  3.0  3.0 
   orrorrorrEEEEstes  modelos  para  a  Base  de  Regra  ilustram  dois  casos  específicos  gerados  a  partir  de necessidades provenientes de um sistema. Outras necessidades poderiam ser identificadas a fim de gerar as regras adequadas a tratar com o problema. Por fim, os resultados para o modelo FPID são apresentados no Capítulo 6 e os modelos e resultados para modelos derivados do FPID são apresentados no Apêndice A. 
5.2  Controle voltado à Minimização do Esforço Em  face  aos  problemas  onde  o  componente  crítico  do  sistema  é  o  atuador,  normalmente devido  ao  seu  elevado  custo  –  que  pode  também  ser  traduzido  como  baixo  tempo  médio  entre falhas (MTBF) – é desejável que este permaneça com o mínimo de utilização possível, ou com o mínimo  de  variações  em  sua  condição  de  trabalho  possíveis,  permanecendo  no  ponto  ótimo  de operação.  Isso  acontece  no  sistema  VASPS,  onde  o  motor  elétrico  da  BCS  é  acionado  por  um inversor que permite maior flexibilidade através do uso de uma gama de rotações diferentes, mas que acarreta em trabalho fora do ponto ótimo. 
Visando  a  redução  do  esforço  ao  qual  a  bomba  está  submetida,  foram  desenvolvidos controladores  especificamente  voltados  ao  tratamento  do  sinal  de  controle,  de  forma  que  este permaneça  com  poucas  alterações,  e  a  saída  do  sistema  oscile  dentro  da  faixa  de  estabilidade prevista  para  o  modelo  dinâmico  do  processo,  conforme  definido  na  seção  3.1.2.  Assim,  o comportamento desejado para o sistema controlado é apresentado na Figura 5.6, e será o objetivo de controle usado no projeto dos controladores. 
 57 a)a)]]))tt((yymm404040[[  aanniiccssiipp  aadd––  aaddííaass  eeddFaixa de oscilação do Nível da piscinaFaixa de oscilação do Nível da piscina303030  llaannSS  lleevvííNN202020iiTempo [s]Tempo [s]b)b)]]zzHH))tt((uu  eelloorrttnnoocc  eedd585858565656545454525252[[  SSCCBB  aadd  aaiiccnnêêüüqqeerrFF505050  llaannSS484848iiTempo [s]Tempo [s] Figura 5.6. Comportamento desejado para o sistema voltado à redução do esforço de controle. 
No VASPS a redução do esforço de controle pode prover um menor custo ao processo, uma vez que o atuador é o componente crítico, em detrimento do melhor desempenho possível para o sistema.  Este  compromisso  entre  desempenho  e  esforço  de  controle  pode  ser  parametrizado  de acordo  com  a  faixa  de  estabilidade  do  processo  físico  controlado,  respeitando  seus  limites operacionais e utilizando a resposta do sistema para avaliar parâmetros que indiquem quando a alteração no sinal de controle é realmente necessária. Serão tratados quatro diferentes modelos de controladores inteligentes, que permitem este tipo de inferência. 
5.2.1  Monitoramento da Média Móvel Com o objetivo de avaliar a tendência do comportamento do sinal, este controlador realiza uma média móvel do erro de acordo com uma janela de tempo parametrizada pela variável n, de forma  que  o  erro  médio  do  processo,  calculado  pela  Equação  (5.15),  faz  o  papel  de  ajustar  o tempo de reação do sistema à taxa desejada de correção, em função da variação do sinal de saída. 
Também é possível realizar o cálculo do sinal de média móvel pela ponderação do sinal de erro com um perfil diferente do uniforme, como, por exemplo, com uma média ponderando as leituras mais recentes com maior peso. 
t1n∑=(5.15) e)t(e −=nti 58 Assim, em sistemas onde o sinal de controle deve permanecer com o mínimo de variações possível, a alteração do sinal de controle u(t) se dará apenas mediante uma mudança significativa da condição de operação, reduzindo a sensibilidade a oscilações curtas que podem não implicar na  necessidade  de  alteração  do  sinal  de  controle.  Uma  alteração  de  comportamento  será identificada,  portanto,  com  a  variação  de  magnitude  da  média  móvel,  que  deve  possuir  baixa sensibilidade a oscilações bruscas, refletindo a tendência real do processo.  
Para  o  conceito  de  média  móvel  funcionar  no  contexto  de  minimização  do  esforço  de controle, é necessário que este esforço seja constante em torno de pontos de operação do sistema, de forma que  a mudança do sinal de controle indique uma correção do sistema para operar em outro  ponto.  Assim,  a  leitura  de  erro  médio  é  utilizada  como  entrada  para  um  mecanismo  de inferência  nebulosa,  um  controlador  nebuloso,  que  é  encarregado  de  dividir  os  parâmetros  de operação  do  processo  em  pontos  de  operação,  criando  regiões  de  trabalho  onde  a  média  possa oscilar  com  alguma  liberdade.  Ademais,  faz-se  necessária  a  manutenção  da  leitura  do  erro instantâneo,  uma  vez  que  este  deve  ser  considerado  como  única  alternativa  de  correção  caso  o sistema esteja exposto a oscilações bruscas que possam levar as condições de operação para uma região crítica que necessite de correção imediata. Esta alternativa é uma segurança contra falhas em  sistemas  de  baixa  constante  de  tempo.  Assim,  o  diagrama  de  blocos  para  este  controlador, aplicado ao sistema VASPS é apresentado na Figura 5.7. 
r(t)r(t)e(t)e(t)Qos [m³/s]Qos [m³/s]f [Hz]f [Hz]Nível [m]Nível [m]DinâmicaDinâmicado Níveldo NívelCurva daCurva daBombaBombaControladorControladorControladore(t)e(t)MédiaMédiaMédiaMóvelMóvelMóvelFuzzyFuzzyFuzzyGerador de Gerador de Qoe [m³/s]Qoe [m³/s]GolfadasGolfadas Figura 5.7. Diagrama de blocos para o controlador Média Móvel aplicado ao VASPS. 
As funções de pertinência do controlador nebuloso devem contemplar a região de trabalho, as regiões críticas de correção próximas aos limites da faixa de trabalho, e regiões de transição entre  estas.  Além  disso,  é  recomendável  que  as  entradas  do  mecanismo  de  inferência  nebulosa sejam normalizadas em torno do zero, através do cálculo dado nas Equações (5.16) e (5.17), de forma a facilitar análises de sinal. 
−)(te)(te)(tr=)(tx(5.16)   59 −)(te)(te)(tr=)(tx(5.17)  De  forma  a  atender  a  faixa  de  estabilidade  do  VASPS  proposta  no  início  deste  capítulo, será considerado que um erro de 25% em relação à referência de 30 metros (7,5 metros para mais e para menos) é uma margem segura de trabalho, de forma que fora deste intervalo a estabilidade não pode ser garantida. Assim, definindo a zona crítica de atuação a faixa entre o erro de 20% e o de 25%, a região de trabalho para a rotação ótima da bomba se dá na faixa de -10% a +10%. Com estes valores são construídos os conjuntos nebulosos da Figura 5.8, relacionando a rotulação das faixas de erro com os conjuntos nebulosos. 
a)a)a)Conjuntos Nebulosos da entrada x(t)Conjuntos Nebulosos da entrada x(t)Conjuntos Nebulosos da entrada x(t)µµµµµµCRB TRBCRB TRBCRB TRBRTRTRTTRA CRATRA CRATRA CRAaaaiiicccnnnêêênnniiitttrrreeePPP-40%-40%-40%-20%-20%-20%00020%20%20%40%40%40%Erro Instantâneo x(t)Erro Instantâneo x(t)Erro Instantâneo x(t)____b)b)b)µµµConjuntos Nebulosos da entrada x(t)Conjuntos Nebulosos da entrada x(t)Conjuntos Nebulosos da entrada x(t)Conjuntos Nebulosos da entrada x(t)CRBCRBCRBRTRTRTTRBTRBTRBTRA CRATRA CRATRA CRALEGENDALEGENDALEGENDACRB: Região Crítica BaixaCRB: Região Crítica BaixaCRB: Região Crítica BaixaTRB: Região de Transição BaixaTRB: Região de Transição BaixaTRB: Região de Transição BaixaRT: Região de TrabalhoRT: Região de TrabalhoRT: Região de TrabalhoTRA: Região de Transição AltaTRA: Região de Transição AltaTRA: Região de Transição AltaCRA: Região Crítica AltaCRA: Região Crítica AltaCRA: Região Crítica AltaaaaiiicccnnnêêênnniiitttrrreeePPP- 30%- 30%- 30%-10% 0-10% 0-10% 010%10%10%____30%30%30%Erro Médio x(t)Erro Médio x(t)Erro Médio x(t)Erro Médio x(t) Figura 5.8. Funções de pertinência para o controlador Média Móvel aplicado ao VASPS. 
Por fim, a base de regras para este controlador é do tipo Sugeno, usando a formulação do tipo ‘Constante’ para as funções de saída, como apresentado no Capítulo 4, ativando para a saída u(t)  um  valor  de  freqüência  com  que  o  inversor  aciona  a  bomba.  O  valor  final  de  saída  é ponderado segundo o grau de ativação de cada regra ativa, µk. Assim, os valores das saídas para correspondente a cada regra são apresentados na Tabela 5.4. 
 60 Tabela 5.4. Base de regras do controlador Monitoramento da Média Móvel. 
Valor da saída [Hz] Erro Rótulo Sigla Erro Médio Instantâneo CRB TRB RT TRA CRA 48 50 - 58 60 48 52 54 56 60 Região Crítica Baixa Região de Transição Baixa Região de Trabalho Região de Transição Alta Região Crítica Alta As  regras  representadas  pela  Tabela  5.4  não  possuem  associação  entre  as  variáveis  de entrada,  sendo  que  cada  regra  ativa  um  valor  de  saída  a  ser  computado  através  da  formulação apresentada para regras do tipo Sugeno no Capítulo 4. Assim, este sistema apresenta 9 regras de acionamento da resposta, que ativam, cada uma, um valor constante para a variável de saída, que são então ponderadas pelo grau de ativação do conjunto nebuloso de entrada, µk. Considerando todas as regras com peso 1, são 4 regras para o erro instantâneo normalizado (regra 1 – saída 48 Hz, regra 2 – saída 50 Hz, regra 3 – saída 58 Hz e regra 4 – saída 60 Hz) e 5 regras para o erro médio normalizado (regra 5 – saída 48 Hz, regra 6 – saída 52 Hz, etc). 
Como exemplo, considere a entrada de erro instantêneo normalizado, x(t), igual a -15%, e a )(tx,  igual  a  -9%.  A  primeira  condição  ativa  o  erro entrada  de  erro  médio  normalizado, instantâneo  no  conjunto  nebuloso  RT,  não  acionando  nenhuma  regra,  enquanto  que  a  segunda condição aciona o erro médio nos conjuntos TRB e RT, acionando as regras 6 e 7. Assim, estas entradas geram as saídas apresentadas na Tabela 5.5. 
Tabela 5.5. Aplicação da Base de Regras usando entradas associativas. 
Variável de Conjunto Variável de saída Rotação da Bomba Rotação da Bomba Rotação da Bomba Valor Grau de ativação µk Regra   Peso Entrada ativo acionado Erro µ1 =1,0 - 1 0 - RT instantâneo µ2 =0,5 6 1 0,5 Erro médio 52 Hz TRB µ3 =0,5 7 1 0,5 Erro médio 54 Hz RT O sinal de controle pode então ser calculado pela ponderação das saídas ativas pelo grau de ativação: 11• =⋅+⋅=525453 fHz22 61 5.2.2  Classificador de Regiões Com o intuito de uma melhor manipulação da região de trabalho, limitada acima e abaixo, este modelo trata o sinal de entrada com uma função de classificação que retorna uma pertinência relativa à distância entre o limite de estabilidade mais próximo (superior ou inferior) e o valor da referência. Esta abordagem permite uma livre variação do sinal de referência r(t) dentro da região de trabalho do controlador, de forma que as funções de classificação tomam novos coeficientes, que corrigem a distância entre os limites de estabilidade para o valor da nova referência. A Figura 5.9  ilustra  a  construção  das  funções  de  classificação  de  acordo  com  a  referência,  e  a  correção desta após a variação do set point ao longo do processo. 
y(t)y(t)y(t)µ(t)µ(t)µ(t)Limite SuperiorLimite SuperiorLimite Superior111SP2SP2SP2µ1µ1µ1SP1SP1SP1Limite InferiorLimite InferiorLimite Inferiorµ2µ2µ2y(t)y(t)y(t)SP2SP2SP2LI SP1LI SP1LI SP1LSLSLS Figura 5.9. Ilustração da função utilizada pelo Classificador. 
Este  conceito  permite  a  parametrização  da  região  de  trabalho,  uma  vez  que  a  entrada  é normalizada no intervalo [-1,1], e a manipulação do valor de set point, o que apresenta limitações no modelo Monitoramento da Média Móvel. Com a entrada normalizada, pode-se utilizar a idéia de valor de pertinência para esta, dada pela Equação (5.18), de forma que sua magnitude expresse a proximidade à instabilidade ou à referência. Além disso, a inclinação da função de classificação provê uma rápida transição desta pertinência entre estes dois casos. 
−−)t(y)t(rLILI<µ,)t()t(r(5.18) µ)t( −LS)t(r)t(y−LS≥µ)t(,)t(rIsso  posto,  é  possível  também  resolver  o  problema  de  minimização  das  variações  no acionamento através da  atuação restrita  à proximidade da  região  crítica.  Com isso em mente, é  62 possível utilizar o classificador para monitorar os limites e estabilidade, e utilizar um mecanismo de  inferência  nebulosa,  conforme  proposto  na  Figura  5.10,  para  calcular  a  rotação  nas proximidades da região crítica, realizando correções mais efetivas. 
1111111111110,70,70,70,70,70,70,70,70,70,70,70,7Qos [m³/s]Qos [m³/s]µ(t)µ(t)f [Hz]f [Hz]Nível [m]Nível [m]DinâmicaDinâmicado Níveldo NívelCurva daCurva daBombaBombae(t)e(t)ControladorControladorControladorr(t)r(t)0,30,30,30,30,30,30,30,30,30,30,30,3FuzzyFuzzyFuzzySPSPSP LSLI SPSPSPSP LSLI SPSPSPSP LSLI SPCLASSIFICADORCLASSIFICADORCLASSIFICADORGerador de Gerador de Qoe [m³/s]Qoe [m³/s]GolfadasGolfadas Figura 5.10. Diagrama de blocos para o controlador Classificador de Regiões aplicado ao VASPS. 
O sinal de controle fora da região de estabilidade é configurado para o valor crítico factível pelo  atuador,  de  forma  a  imprimir  a  maior  correção.  Ao  adentrar  a  região  de  estabilidade, acionamentos sucessivos de freqüências paulatinamente menores permitem a transição suave para a rotação ótima até que certa distância do limite de estabilidade seja atingida. Essas sucessões de acionamento servem também para a aproximação da instabilidade. 
Para  a  seleção  das  rotações  na  região  próxima  à  instabilidade,  uma  série  de  conjuntos nebulosos é inserida nas faixas críticas, conforme apresentado na Figura 5.11. Neste exemplo, os conjuntos são rotulados de acordo com a intensidade alta ou baixa que a pertinência atinge, e o valor da saída pode ser definido para cada conjunto nebuloso, uma vez que também são do tipo Sugeno e com a formulação das funções de saída do tipo ‘Constante’. 
MinMinUBUBMA UAMA UAMBMBAAMaxMaxRTRTBBµµLEGENDALEGENDALEGENDAMin: Região Crítica MínimaMin: Região Crítica MínimaMin: Região Crítica MínimaUB: Região Crítica Ultra BaixaUB: Região Crítica Ultra BaixaUB: Região Crítica Ultra BaixaMB: Região Crítica Muito BaixaMB: Região Crítica Muito BaixaMB: Região Crítica Muito BaixaB: Região Crítica BaixaB: Região Crítica BaixaB: Região Crítica BaixaRT: Região de TrabalhoRT: Região de TrabalhoRT: Região de TrabalhoA: Região Crítica AltaA: Região Crítica AltaA: Região Crítica AltaMA: Região Crítica Muito AltaMA: Região Crítica Muito AltaMA: Região Crítica Muito AltaUA: Região Crítica Ultra AltaUA: Região Crítica Ultra AltaUA: Região Crítica Ultra AltaMax: Região Crítica MáximaMax: Região Crítica MáximaMax: Região Crítica Máxima  ooddaaccnnêênniittrreePP  oottnnuunnooccbbuuSS  iijj100%100%0025%25%50%50%75%75%100%100%-75%-75%-50%-50%-25%-25%Pertinência classificada Pertinência classificada (distância normalizada até a referência)(distância normalizada até a referência) Figura 5.11. Conjuntos nebulosos de entrada para o Classificador de Regiões. 
 63 Tomando  o  limite  inferior  para  o  nível,  que  causaria  quebra  na  bomba,  como  LI  de  20 metros, e o superior, que comprometeria a pressão de separação, como LS de 40 metros, pode-se definir a base de regras pela Tabela 5.6. 
Tabela 5.6. Base de regras do controlador Classificador por Regiões. 
Valor da saída [Hz] Sigla Rótulo Mín UB MB B RT A MA UA Máx Pertinência Mínima 48 49 51 53 54 55 57 59 60 Pertinência Ultra Baixa Pertinência Muito Baixa Pertinência Baixa Região de Trabalho Pertinência Alta Pertinência Muito Alta Pertinência Ultra Alta Pertinência Máxima A  Tabela  5.6  pode  ser  utilizada  da  mesma  forma  que  a  Tabela  5.4,  onde  um  exemplo  é dado. A diferença reside no uso de apenas uma única variável de entrada.  
5.2.3  Classificador com Média Considerando  os  dois  modelos  voltados  à  minimização  do  esforço  de  controle apresentados, cabe uma análise quanto às principais características encontradas: •  Tempo de reação; •  Avaliação de tendência; •  Monitoração dos limites de estabilidade; •  Oscilação na transição entre regiões de trabalho; • Insensibilidade a variações na referência; •  Sensibilidade a oscilações bruscas. 
Ambos  os  modelos  apresentados  anteriormente  apresentam  formas  de  manipulação  do tempo  de  reação  do  sistema,  uma  vez  que  há  a  avaliação  de  tendência,  seja  pela  média  móvel realizada,  que  permite  concluir  sobre  incrementos  sustentados  ou  transientes,  seja  pela classificação da entrada em uma pertinência normalizada que indica a proximidade com a região crítica.  No  entanto,  em  algumas  simulações  que  serão  apresentadas  no  Capítulo  6,  foram percebidos alguns efeitos colaterais que podem ser relevantes para um dado sistema.  
O primeiro deles é a oscilação do sinal de controle entre duas regiões de trabalho, quando um  distúrbio  no  sistema  possui  uma  maior  duração,  o  que  pode  não  apresentar  problemas  em  64 campo no caso de a constante de tempo do sistema ser muito alta ou da instrumentação apresentar rampas de aceleração para a mudança do ponto de trabalho do atuador. O segundo, diz respeito ao conceito de regiões de trabalho, que implica em uma menor manipulação do sistema através do  sinal  de  referência.  Ora,  se  o  sistema  pode  variar  livremente  em  torno  da  referência,  é  de esperar  que  este  não  acompanhe  o  sinal  fielmente.  A  última  consideração  se  dá  em  torno  de distúrbios  de  maior  amplitude,  que  afetam  o  sistema  com  média  móvel  devido  à  leitura  da variável  instantânea,  bem  como  afetam  também  o  sistema  com  classificador,  fazendo  a pertinência  variar  muito  bruscamente.  Estas  condições,  embora  esperadas,  podem  apresentar riscos ao atuador, que deve ser capaz de atuar em seus limites, mas não deve ser exposto a uma mudança brusca de atuação.  
Nesse  contexto,  é  proposto  um  conceito  de  controlador  que  mescla  ambos  os  conceitos apresentados  anteriormente,  de  forma  a  reduzir  o  efeito  de  grandes  distúrbios  através  da realização de uma média móvel sobre a pertinência classificada, como também limitar a faixa de estabilidade em regiões de trabalho que permitam acompanhar a ordem de grandeza do sinal de referência, ainda permitindo oscilação, mas em torno de mais pontos. Adicionalmente, uma vez que o controlador proposto é mais refinado, sendo também mais sensível às mudanças bruscas do sinal de controle – mudanças estas que são minimizadas com a estratégia adotada nesta versão – faz-se necessário adicionar um filtro de sinal entre o controlador e o atuador, simulando os efeitos de saturação de sinal, quantização e rampa máxima de acionamento, presentes no CLP industrial. 
O diagrama de blocos para a malha de controle em questão é apresentado na Figura 5.12. 
u [Hz]u [Hz]f [Hz]f [Hz]Qos [m³/s]Qos [m³/s]Nível [m]Nível [m]µ(t)µ(t)1111µ1µ1µ1µ1µ2µ2µ2µ2e(t)e(t)r(t)r(t)DinâmicaDinâmicado Níveldo NívelCurva daCurva daBombaBombaControladorControladorFiltroFiltroLISPLILI SPSPSPLILSLSLSLSMédiaMédiaMóvelMóvelFuzzyFuzzyCLASSIFICADORCLASSIFICADORCLASSIFICADOR___µ(t)µ(t)µ(t)Gerador de Gerador de Qoe [m³/s]Qoe [m³/s]GolfadasGolfadas Figura 5.12. Diagrama de blocos para o controlador Classificador com Média. 
O controlador nebuloso inserido na malha é o mecanismo que permite a definição de mais regiões de trabalho para o sinal, de forma a permitir certo grau de acompanhamento da referência. 
No  entanto,  a  leitura  da  pertinência  instantânea  ainda  é  mantida,  novamente  por  segurança.  As funções de pertinência são apresentadas na Figura 5.13. 
 65 a)a)a)Conjuntos Nebulosos da entrada µ(t)Conjuntos Nebulosos da entrada µ(t)Conjuntos Nebulosos da entrada µ(t)µµµµµµCRB TRBCRB TRBCRB TRBRTRTRTTRA CRATRA CRATRA CRAaaaiiicccnnnêêênnniiitttrrreeePPP-90%-90%-90%-50%-50%-50%00050%50%50%90%90%90%Pertinência Instantânea Classificada µ(t)Pertinência Instantânea Classificada µ(t)Pertinência Instantânea Classificada µ(t)____b)b)b)µµµConjuntos Nebulosos da entrada µ(t)Conjuntos Nebulosos da entrada µ(t)Conjuntos Nebulosos da entrada µ(t)Conjuntos Nebulosos da entrada µ(t)CRBCRBCRBRTRTRTTRBTRBTRBTRA CRATRA CRATRA CRALEGENDALEGENDALEGENDACRB: Região Crítica BaixaCRB: Região Crítica BaixaCRB: Região Crítica BaixaTRB: Região de Transição BaixaTRB: Região de Transição BaixaTRB: Região de Transição BaixaRT: Região de TrabalhoRT: Região de TrabalhoRT: Região de TrabalhoTRA: Região de Transição AltaTRA: Região de Transição AltaTRA: Região de Transição AltaCRA: Região Crítica AltaCRA: Região Crítica AltaCRA: Região Crítica AltaaaacccnnnêêênnniiitttrrreeePPPiii- 70%- 70%- 70%-20% 0 20%-20% 0 20%-20% 0 20%70%70%70%____Pertinência Média Classificada µ(t)Pertinência Média Classificada µ(t)Pertinência Média Classificada µ(t)Pertinência Média Classificada µ(t) Figura 5.13. Funções de pertinência para o controlador Classificador com Média. 
A base de regras para o controlador classificador com média no caso do Sistema VASPS é apresentada na Tabela 5.7. Da mesma forma que os demais, as regras são do tipo Sugeno. 
Tabela 5.7. Base de regras do controlador Classificador com Média adaptado ao VASPS. 
Valor da saída [Hz] Rótulo Sigla  Pertinência Instantânea Pertinência Média CRB TRB RT TRA CRA Região Crítica Baixa 48 50 - 58 60 48 52 54 56 60 Região de Transição Baixa Região de Trabalho Região de Transição Alta Região Crítica Alta O filtro de sinal inserido na malha tem o objetivo de simular as mínimas variações que são aplicadas ao sinal de controle antes que este seja aplicado aos terminais elétricos da bomba BCS, corrigindo picos de sinal e ruídos. Basicamente, o filtro é constituído de três elementos, ilustrados na Figura 5.14 e aplicados na seqüência a seguir:  66 1.  Saturador. Este elemento de segurança impede que o acionamento da bomba fique fora do intervalo  estipulado  como  limites  de  funcionamento  físico,  limitando  o  universo  de atuação das freqüências do inversor. 
2.  Limitador  de  rampa.  Este  dispositivo  limita  a  derivada  do  sinal  de  controle  a  um  valor máximo  e  a  um  valor  mínimo,  simulando  as  rampas  de  aceleração  e  desaceleração permitidas  no  sistema.  Este  limitador  atua  na  malha  de  controle  elétrico  da  bomba,  que possui  uma  constante  de  tempo  baixíssima,  por  vezes  da  ordem  de  milissegundos,  de forma que as variações neste loop interno da bomba não se fazem perceptíveis no controle de nível. De qualquer forma, acionamentos repentinos na forma de ondas completamente quadradas são evitados. 
3.  Quantizador. O último componente do filtro aplica um segurador de ordem zero, ou filtro ZOH, ao acionamento do sinal de controle na bomba, evitando sua oscilação como sinal contínuo  e  portanto  minimizando  a  oscilação  do  sinal  nos  terminais  da  bomba.  Foram adotados  neste  projeto  degraus  de  0,5  Hz,  de  forma  a  realizar  variações  suaves  no acionamento. 
u [Hz]u [Hz]fS(u)fS(u)fLR(fS(u))fLR(fS(u))fQ(fLR(fS(u))) = f [Hz]fQ(fLR(fS(u))) = f [Hz]Limitador Limitador de rampade rampaSaturadorSaturadorQuantizadorQuantizador Figura 5.14. Detalhamento do filtro de sinal aplicado entre o controlador e o atuador. 
As funções aplicadas ao sinal de controle são dadas pelas Equações (5.19), (5.20) e (5.21). 
>uu≤≤uu<uumax(uumin(u),max==)(ufS,uu (5.19) minmaxS),min+−),−−>(tuS−−)1u<(tu+−)1≤min−−)1(tuS(tu(tu)1',)(tu(tuS)(tu'umax)(tuS'uumaxS==≤+−)(t((tu))'(tu)1'ufumaxLRSLRSS )1',u(5.20) minminSSSondeaéu'derivadaude(t)notempot.
S 67 +−(,5.0)1
tLR−(),1t−−(,5.0)1
t≥(t5.0)1
≤(t+−<LR−−)(tuLR−−(t)(tu5.0)1
<)(ut5.0)1
uuLRuuuLRuLR==+−)(tu((t))(t5.0)1
fuu (5.21) QQLRLRLRLRLRCom  este  filtro,  caso  haja  qualquer  problema  com  o  cômputo  do  sinal  de  controle acionando  a  BCS  indevidamente,  o  sinal  mais  crítico  a  ser  aplicado  à  bomba  é  um  sinal  com variação de meio em meio hertz, com derivada limitada e valor absoluto limitado por mínimos e máximos, permanecendo dentro do universo desejado. 
5.2.4  Histerese com Auto-ajuste Ainda  com  as  melhorias  apresentadas  no  modelo  Classificador  com  Média,  a  transição entre conjuntos nebulosos apresenta a dificuldade de se manter na nova região de trabalho até que a  correção  seja  plenamente  estabelecida,  o  que  leva  a  imaginar  a  aplicação  do  conceito  de histerese  para  fixar  a  variação  da  saída  até  que  o  sistema  retorne  completamente  à  região  de trabalho anterior por efeito do próprio comportamento do processo, e não apenas por correção do controlador.  A  histerese  é  inserida  logo  após  o  cálculo  de  pertinência  média,  de  forma  que  o diagrama  de  blocos  do  sistema  é  dado  pela  Figura  5.15.  Percebe-se  que  não  há  o  controlador nebuloso na malha, uma vez que a histerese define as regiões de trabalho. 
___µ(t)µ(t)µ(t)11110,70,70,70,70,30,30,30,3y(t)y(t)µ(t)µ(t)e(t)e(t)r(t)r(t)u(t)u(t)MédiaMédiaMóvelMóvelProcessoProcessoProcessoFiltroFiltroHistereseHistereseLISPLILI SPSPSPLILSLSLSLSCLASSIFICADORCLASSIFICADORCLASSIFICADORAutoAutoAjusteAjuste Figura 5.15. Diagrama de blocos do controlador Histerese com Auto-ajuste. 
O comportamento da histerese é dado pelas Equações (5.22), (5.23), (5.24), (5.25) e (5.26), de  forma  que  as  regiões  de  trabalho  podem  ser  identificadas  na  Figura  5.16.  Os  diferentes intervalos  ilustrados  na  figura  correspondem  às  regiões  de  trabalho  que  apresentam  um  valor constante de saída, fixando o sinal de controle enquanto o sistema permanecer na respectiva faixa de  trabalho.  A  alternância  entre  as  equações  apresentadas  depende  das  variações  na  variável avaliada - a pertinência média - cujo universo de trabalho é normalizado no intervalo [-1,1]. 
 68 PBuu≥<−−δµµ2δµµµ(2)(t)(t,),=µ()2u(5.22)  PB2PSµµµ(u2<PSu)(t−δµµµ(u1≥)(t−1)(t),,,)PB=<µ()µµδµ2u(5.23)  1≤PS1ZuZuuµµµ(1)(tµ1≥<−≤)(tµµµ11)(t,),,)PSµ)(=−µµ(<u(5.24)  ZNSµµ(u−NSuu−≥)(t<µµ2−≤)(t+δµ11−<)(tµ2,),),Z=+µ()δµ1u(5.25)  1NSµµ(NBNBuuµµµ(δµ2δµ2−<−≥++,),)(t)(tµ()=2u (5.26) NB2NSA  associação  das  funções  uNB(µ),  uNS(µ),  uZ(µ),  uPS(µ)  e  uPB(µ)  constitui  a  função aplicada ao sinal de controle para gerar seu valor de saída. Este valor de saída por sua vez é dado pelas  constantes  uNB,  uNS,  uZ,  uPS  e  uPB,  dependendo  do  intervalo  onde  a  pertinência  média estiver localizada e dependendo também do sinal de derivada de seu valor absoluto, que indica se o valor está se afastando ou se aproximando de zero. 
Por  sua  vez,  os  valores  µ1,  µ2  e  seus  opostos  -µ1  e  -µ2  são  os  valores  de  transição  entre regiões  de  trabalho  quando  a  derivada  do  módulo  da  pertinência  média  for  positiva.  Esta condição é chamada de histerese de subida. Por outro lado, caso o módulo da pertinência média estiver decrescendo, ou seja, caso a derivada de seu valor absoluto for negativa, é caracterizada a condição de histerese de descida, e neste caso o valor de transição entre as regiões de trabalho é deslocado em direção ao zero de um valor δ, chamado de intervalo de histerese. Assim, pode-se concluir  que  a  transição  entre  regiões  de  operação  na  condição  de  histerese  de  descida  é  dada pelos valores (µ1 – δ1), (µ2 – δ2) e seus valores opostos (-µ1 + δ1) e (-µ2 + δ2). Obviamente, como as  pertinências  usadas  para  os  conjuntos  nebulosos  de  entrada  variam  no  intervalo  [-1,1],  o  69 universo  de  trabalho  da  histerese  também  está  compreendido  neste  intervalo  normalizado, podendo ser visualizado na forma de porcentagens. A aplicação dos conceitos aqui apresentados será realizada no Capítulo 6, onde são apresentados os resultados. 
Histerese Histerese Histerese de subidade subidade subidauNBuNBuNBu(t) =  uZu(t) =  uZu(t) =  uZuNSuNSuNSuPSuPSuPSuPBuPBuPBHisterese Histerese de descidade descidauNBuNBuNBuNSuNSuNSuZuZuZuPSuPSuPSuPBuPBuPB___µµµpertinência médiapertinência média-µ2-µ2-µ2+δ2-µ2+δ2-µ1-µ1-µ1+δ1-µ1+δ1µ1-δ1 µ1µ1-δ1 µ1µ2-δ2 µ2µ2-δ2 µ200 Figura 5.16. Esquemático ilustrativo do comportamento da histerese. 
A Figura 5.16 ilustra os conceitos de histerese de subida e de descida, bem como as regiões de trabalho rotuladas através do valor da respectiva constante de saída. Nesta, é possível verificar um curioso efeito da histerese sobre as regiões de trabalho, a saber:  •  Quando a região está ativa, o valor de transição para as regiões vizinhas é dado pelo maior delta dentre os valores de transição em seu entorno. Assim, pode-se dizer que o intervalo de trabalho é dado pela região expandida no entorno do valor médio da pertinência para aquela região. 
•  Quando a região não está ativa, para fins de transição de regiões, ela se afasta do zero de um  valor  igual  ao  intervalo  de  histerese.  Dessa  forma  pode-se  dizer  que  o  intervalo  de trabalho  inativo  total  é  dado  pela  região  retraída  fora  do  entorno  do  valor  médio  da pertinência. 
Este efeito nos permite verificar que a soma das regiões de trabalho ativas é maior do que o intervalo  de  operação  total  de  um  valor  igual  à  soma  de  todos  os  intervalos  de  histerese encontrados  entre  as  fronteiras  de  operação.  Esta  maior  região  de  trabalho  real  permite  reduzir significativamente os acionamentos do atuador, zelando pela sua vida útil. Dessa forma, a Figura 5.16 ilustra a região expandida no entorno da pertinência média igual a zero. O valor da saída da  70 histerese u(t), como dado no diagrama de blocos, é dado pela função uZ(µ), cujo valor de saída é uZ.  
Neste  ponto,  é  interessante  retomar  uma  das  considerações  desenvolvidas  na  modelagem física  do  sistema  VASPS  –  a  dinâmica  da  variação  da  pressão.  Havia  sido  considerado  que  o tempo de resposta da variação de pressão de gás era muito maior do que o do sistema de controle de nível, de forma que trabalhando no transiente do controle de nível, este não seria afetado pela dinâmica  da  pressão.  Assim,  embora  os  efeitos  da  variação  da  pressão  não  estejam  claros  na malha de controle de nível, caso seja avaliado um tempo muito grande de avaliação da dinâmica interna do VASPS, talvez a amplitude de variação da pressão influencie a tal ponto que os valores constantes  de  saída  uNB,  uNS,  uZ,  uPS  e  uPB  não mais  estejam  adequados  às  regiões  de  trabalho definidas  para  estes.  Ou  ainda,  considerando  tempos  maiores,  a  depleção  do  reservatório  pode implicar  na  alimentação  do  sistema  VASPS  com  uma  pressão  de  admissão  –  ou  uma  vazão  de líquido – declinante, causando o mesmo efeito. 
Assim, considerando-se o problema de minimização de esforço de controle, e na tentativa de adaptar o controlador a condições dinâmicas de operação do sistema ao longo do tempo, foi desenvolvido um mecanismo de correção do valor do sinal de controle no equilíbrio, uZ, de forma que caso o sistema opere certa proporção de seu tempo fora da região de pertinência média igual a zero, o valor de uZ seja atualizado proporcionalmente. A importância desta correção é ilustrada por  observações  realizadas  em  simulação  para  um  sistema  dinamicamente  variante  no  tempo, onde  a  faixa  de  erro  nulo  aplicando  o  sinal  de  controle  u(t)  invariante  no  valor  de  uZ,  gerou atuações  que  não  mantiveram  o  sistema  em  equilíbrio,  sendo  necessária  a  atuação  da  faixa  de operação vizinha para corrigir o sinal de saída y(t) e retornar a minimizar o erro. Com isso, um diagrama esquemático para este controlador, ilustrando entradas e saídas dos parâmetros de cada bloco, pode ser representado pela Figura 5.17. 
 71 ___µ(t)µ(t)µ(t)Max(u(t))Max(u(t))Min(u(t))Min(u(t))uZuZCLASSIFICADORCLASSIFICADORCLASSIFICADORMédia MóvelMédia MóvelMédia MóvelMédia MóvelHistereseHistereseHistereser(t)r(t)µ(t)µ(t)u(t)u(t)y(t)y(t)111nnntttFiltroFiltro1111µ1µ1µ1µ1µ2µ2µ2µ2∑∑∑ProcessoProcesso===µµµµµµ)()()(tttLimite superiorLimite superiorLimite inferiorLimite inferiorδδδ−=−=−=ntntntiiinnLISPLILI SPSPSPLILSLSLSLSy(t)y(t)___u(t)u(t)u(t)Max(u(t))Max(u(t))Min(u(t))Min(u(t))ReguladorReguladorReguladorMédiaMédiaMóvelMóveltrigger(u(t))trigger(u(t))trigger(u(t))trigger(u(t))uZuZ Figura 5.17. Diagrama esquemático do controlador Histerese com Auto-ajuste. 
Para  realizar  o  auto-ajuste,  o  regulador  utiliza  a  média  móvel  do  sinal  de  controle  e  a monitora até que esta  atinja um valor entre uZ  e  uPS – por exemplo, 70% da distância  entre os patamares  –  permanecendo  ainda  mais  próximo  do  valor  de  equilíbrio,  mas  já  indicando  a tendência  do  sinal  de  controle  se  deslocar  em  direção  a  uma  das  extremidades  da  região  de trabalho. Após este valor da média móvel ser atingido, uZ assume este valor, e o sistema passa a ser referenciado a partir daí, sendo este o novo ponto de equilíbrio. 
Este  controlador  engloba  todos  os  conceitos  anteriormente  propostos  e  apresenta adicionalmente  conceitos  de  robustez  e  a  histerese.  Tendo  sido  idealizado  para  aplicações  com uma grande constante de tempo, o controlador também apresenta ferramentas que o permite lidar com sistemas mais rápidos, dado o alto grau de informações que este utiliza para definir a política de  controle.  A  formulação  do  controlador  real  pode  ser  também  mais  ou  menos  conservadora, uma  vez  que  os  parâmetros  do  sistema  permitem  definir  os  limites  permitidos  para  a  variável controlada e para a variável manipulada. 
O mérito de minimizar o esforço de controle requer, como reforçado no início da discussão, uma  flexibilidade  operacional  dos  parâmetros  de  desempenho.  Não  obstante,  as  tentativas  de minimizar  o  erro  estacionário  foram  desenvolvidas  de  forma  a  contemplar  tanto  o  sinal  de controle, quanto de permitir brechas para que o compromisso com o desempenho fosse deixado para a decisão do projetista, podendo este dar um maior peso ao desempenho.  
 72     Capítulo 6  6  Resultados  6.1  Solução pelo Desempenho A  aplicação  do  controle  híbrido  Fuzzy-PID  segundo  o  controlador  apresentado  na  seção 5.1.1  foi  simulada  para  o  sistema  apresentado  e  pelas  suas  equações.  Além  disso,  para  fins  de comparação,  também  foi  aplicado  um  controle  PID  simples,  cujos  resultados  são  apresentados nas mesmas figuras dos resultados do controle FPID. 
Então,  em  ambos  os  sistemas  a  variável  manipulada,  u(t),  é  a  freqüência  com  a  qual  o inversor  alimenta  a  BCS,  cuja  relação  com  a  vazão  de  saída  do  sistema  é  direta,  e  a  variável controlada, y(t), é o nível da ‘piscina’. A referência, r(t), é fixada no valor de 30 metros. 
6.1.1  Fuzzy-PID Idealmente, o controle FPID do tipo supervisor que é apresentado na seção 5.1.1 representa uma  melhoria  para  o  sistema  de  controle  do  VASPS,  devido  a  não-intrusão  no  processo, considerando  que  já  havia  um  controle  PID  em  campo  operando.  Diante  desse  fato,  o  sistema com  supervisor  não  apresentaria  pioras  no  controle,  uma  vez  que  o  controlador  original  seria mantido, sofrendo apenas correções em seus ganhos. 
Foram realizadas simulações que levaram em consideração uma partida do sistema com o nível do reservatório em seu valor mínimo de forma a avaliar o desempenho em um caso crítico e com  leitura  real  abaixo  da  referência.  Esta  situação  permite  avaliar  a  resposta  do  sistema  no enchimento,  que  é  mais  crítico  que  o  esvaziamento,  uma  vez  que  a  bomba  deve  ser  acionada apenas  após  estar  submersa,  sendo  estritamente  necessário  um  comportamento  controlado.  A  73 referência  de  nível  para  o  sistema  foi  de  30  metros  e  as  simulações  foram  realizadas  com  o sistema  supervisório  e  sem  este  para  efeito  de  comparação  e  mensuração  da  melhoria  no desempenho. 
a)a)]]mm[[  ooiirróóttaavvrreesseerr  oodd353535303030N com PIDN com PIDN com PIDN com FuzzyN com FuzzyN com Fuzzy  lleevvííNN252525000500500500100010001000150015001500200020002000250025002500300030003000350035003500400040004000450045004500500050005000Tempo [s]Tempo [s]b)b)  ooããççaattoorr  585858]]zzHH565656545454525252505050eeddaa[[  SSCCBBaadd  iiccnnêêüüqqeerrFF  u com PIDu com PIDu com PIDu com Fuzzyu com Fuzzyu com Fuzzy484848000500500500100010001000150015001500200020002000250025002500300030003000350035003500400040004000450045004500500050005000Tempo [s]Tempo [s] Figura 6.1. Comparativo da resposta e do sinal de controle entre o PID e o FPID. 
A  situação  crítica  imposta  permite  a  avaliação  da  resposta  em  regime  transiente  e  seu estacionamento após este período. Este efeito está reproduzido na Figura 6.1, onde é apresentada a resposta do sistema com o controlador PID contra a resposta com o controlador FPID. Além da resposta do sistema, está sendo avaliado o sinal de controle que gerou a dada resposta. 
Conforme apresentado na Figura 6.1, nota-se uma melhoria significativa no sobresinal e no tempo  de  estabilização  do  sistema,  tão  embora  o  sinal  de  controle  seja  muito  similar. 
Considerando que o módulo supervisor aumenta a constante D em torno do zero, é natural que a resposta possua menor sobressinal, dado que o amortecimento foi aumentado. Entretanto, há erro estacionário  no  sistema,  causado  pela  saturação  do  efeito  integral  em  valores  negativos  muito altos. Ambos estes efeitos podem ser observados na Figura 6.2, que apresenta o comportamento das constantes ao longo da simulação, bem como a decomposição do sinal de controle entre as contribuições individuais de cada constante. 
 74 a)a)b)b)c)c)665050222  eelloorrttnnoocc  eedd00055  eelloorrttnnoocc  eedd  eelloorrttnnoocc  eedd00-2-2-244-50-50-4-4-4]]zzHHuI com PIDuI com PIDuI com PIDcom FPIDuucom FPIDucom FPIDIIIuDcom PIDuDcom PIDcom FPIDuucom FPIDDD33]]zzHH]]zzHH-6-6-6[[  llaannooiiccrrooppoorrPP-100-100  llaanniiss  oodd  eedduuttiill  llaanniiss  oodd  eedduuttiill[[  oovviittaavviirreeDD[[  llaarrggeettnn  llaanniiss  oodd  eedduuttiill22-8-8-8-150-150-10-10-1011II-12-12-12-200-20000-14-14-14ucom PIDuucom PIDcom PIDPPPuPcom FPIDuPcom FPIDuPcom FPID-250-250ppmmAA-1-1ppmmAAppmmAA-16-16-16-2-2-18-18-18-300-300001000100020002000300030004000400050005000001000 2000 3000 4000 50001000 2000 3000 4000 50000001000 2000 3000 4000 50001000 2000 3000 4000 50001000 2000 3000 4000 5000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]d)d)e)e)f)f)x 10-4x 10-4141414llaannooiiccrrooppoorrPP  eettnnaattssnnooccaaddeedduuttiill200200200121212aavviittaavviirreeDD  eettnnaattssnnooccaaddeedduuttiill121212180180180llaarrggeettnn101010160160160101010888140140140II  eettnnaattssnnooccaaddeedduuttiillD com PIDD com PIDD com PID888120120120D com FPIDD com FPIDD com FPIDI com PIDI com PIDI com PID666666100100100I com FPIDI com FPIDI com FPID444808080444      222606060  222    P com PIDP com PIDP com PIDP com FPIDP com FPIDP com FPID404040000000ppmmAA202020ppmmAAppmmAA-2-2-2-2-2-2000001000 2000 3000 4000 50001000 2000 3000 4000 50000001000 2000 3000 4000 50001000 2000 3000 4000 50001000 2000 3000 4000 50000001000 2000 3000 4000 50001000 2000 3000 4000 50001000 2000 3000 4000 5000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.2. Sinal de controle e comportamento das constantes entre o PID e o FPID. 
Na  Figura  6.2,  o  sinal  de  controle  apresentado  na  Figura  6.1b  é  decomposto  em  suas componentes proporcional (Figura 6.2a), integral (Figura 6.2b) e derivativa (Figura 6.2c). Estes sinais são as contribuições de cada ganho na composição do sinal de controle total, verificando a saturação de sinal causada pelo efeito integral. Além disso, é apresentado nos gráficos inferiores o  comportamento  ao  qual  as  constantes  foram  submetidas.  Como  exemplo,  nota-se  o  reforço aplicado  ao  sinal  derivativo  na  Figura  6.2c  próximo  à  região  onde  o  Nível  cruzou  com  a referência,  indicando  erro  pequeno.  Comparando  com  a  Figura  6.2f,  há  a  indicação  de  que  o reforço foi causado pelo aumento no valor da constante KD, com uma variação positiva de 90%, saindo de 100 e indo para 190, obtendo-se um sinal de controle mais expressivo, mesmo com o sinal cx, a variação relativa do erro, inalterado em relação ao controle PID. 
Embora o sinal de controle proporcional apresentado na Figura 6.2a seja menor no sistema com  supervisório,  isso  se  deve  ao  fato  de  que  o  erro  no  sistema  final  é  menor,  conforme observado na Figura 6.1a. Ainda assim, há um aumento no valor da constante KP apresentada na Figura 6.2d, reforçando a ação. Dessa forma, observa-se uma melhoria geral na resposta causada por  diversas  ações  pontuais  combinadas.  Além  disso,  o  sinal  de  controle  foi  praticamente  75 mantido,  de  forma  que  a  energia  de  controle  e  a  variação  imposta  ao  atuador  são  as  mesmas, viabilizando um projeto sobre um controlador que atendia o requisito de energia de controle. O 
desempenho obtido, que era o objeto de estudo do trabalho, foi alcançado sem perda de qualidade no  sinal  de  controle  e  sem  perda  de  estabilidade.  Para  os  resultados  dos  modelos  derivados  do FPID, consultar o Apêndice A. 
6.2  Soluções pelo Esforço de Controle Nesta  seção,  as  variáveis  controlada  e  manipulada  continuam  sendo  as  mesmas,  dado  o mesmo  processo  a  controlar.  Entretanto,  o  objetivo  de  controle  é  formulado  com  o  intuito  de minimizar  alterações  no  sinal  de  controle  de  forma  que  o  sistema  permaneça  com  um  sinal  de controle  u(t)  próximo  do  constante,  e  a  saída,  y(t),  oscilante.  A  saída,  no  entanto,  representada pelo  nível  de  líquido  no  VASPS,  deve  permanecer  dentro  da  faixa  estipulada  para  projeto,  de forma que seria interessante conceber um sistema que evite muitas oscilações. Estas oscilações, por  sua  vez,  são  geradas  pelo  distúrbio  proporcionado  pelo  gerador  de  golfadas  e,  nos  projetos para  minimização  do  esforço  de  controle,  ao  passo  que  bons  resultados  são  adquiridos  para  o sinal de controle, o gerador de golfadas é substituído por um mais agressivo, que vá dificultar o controle, conforme apresentado anteriormente. 
O VASPS em campo é um sistema com alta constante de tempo, conforme experimentado em seus projetos iniciais, de forma que variações no nível de líquido não sofrem oscilações tão bruscas quanto às simuladas para a validação dos controladores deste estudo. No entanto, utilizar um gerador de golfadas agressivo reforça o projeto computacional para futuras experimentações com o sistema. 
6.2.1  Monitoramento da Média Móvel Com  o  controlador  adaptado  para  o  VASPS,  foram  realizadas  simulações  para  testar  o conceito  proposto  neste  modelo,  usando  o  primeiro  gerador  de  golfadas.  Os  parâmetros manipulados  nas  simulações  foram  o  nível  inicial  do  reservatório  e  o  número  de  pontos  usado para  o  cálculo  da  média  móvel,  doravante  referenciado  por  n.  O  nível  inicial  do  reservatório seguiu a referência (30 metros) no primeiro conjunto de simulações, e foi variado para 60 metros posteriormente, ou seja, com o anular do VASPS completamente cheio. Este nível inicial é usado para  as  partidas  do  sistema  com  óleo  diesel  antes  de  abrir  a  entrada  de  fluido  multifásico,  e permite  avaliar  a  resposta  do  sistema  no  regime  transiente  para  uma  condição  de  erro  inicial muito grande. A média móvel por sua vez, assumiu os valores de 500, 2000 e 5000 pontos a uma  76 taxa de amostragem de 0,1 segundos, cobrindo assim uma janela de tempo 10 vezes menor que o número de pontos. 
Os resultados totalizaram seis simulações, cujas curvas são apresentadas separadamente em duas figuras. A Figura 6.3 apresenta a resposta para o nível inicial de 30 metros, com o nível nos gráficos superiores e o sinal de controle nos gráficos inferiores, tendo sido ordenados da esquerda para  a  direita  os  casos  de  n  igual  a  500,  2000  e  5000  pontos.  O  mesmo padrão  foi  adotado  na Figura 6.4, que apresenta os resultados para o nível inicial de 60 metros. 
As curvas permitem verificar o efeito de n. Quanto menor, mais próximo o nível médio está do instantâneo e, portanto, maiores são as variações no sinal de saída, uma vez que os picos estão refletidos  no  nível  médio.  Do  contrário,  quanto  maior,  mais  lenta  e  gradual  é  a  reação  do controlador, o que permite picos mais distantes da referência. Em ambas as simulações, nota-se este  comportamento  de  forma  que  para  o  valor  intermediário  de  n,  de  2000,  não  há  picos destacados  na  resposta,  como  ocorre  com  o  valor  de  500  pontos,  bem  como  há  um comportamento  mais  descendente  e  ascendente  do  sinal  de  controle,  ao  invés  de  uma  resposta retardada em relação à instantânea, como ocorre com o valor de 5000 pontos.  
 77 b)b)b)b)a)a)a)a)c)c)c)c)Resposta do Nível para n=500Resposta do Nível para n=500Resposta do Nível para n=500Resposta do Nível para n=500Resposta do Nível para n=2000Resposta do Nível para n=2000Resposta do Nível para n=2000Resposta do Nível para n=2000Resposta do Nível para n=5000Resposta do Nível para n=5000Resposta do Nível para n=5000Resposta do Nível para n=5000353535353535353535353535353535NNNNNNNNNNNNNNNNNNNNNNNNmedmedmedmed343434343434343434343434343434(t)(t)(t)(t)(t)(t)(t)(t)(t)(t)(t)(t)medmedmedmedmedmedmedmed333333333333333333333333333333323232323232323232323232323232]]]]]]]]]]]]mmmmmmmmmmmm313131313131313131313131313131[[[[    llll[[[[    llll[[[[    lllleeeevvvvNNNNeeeevvvvNNNNeeeevvvvNNNN303030303030303030303030303030íííííííííííí292929292929292929292929292929282828282828282828282828282828272727272727272727272727272727262626262626262626262626262626252525252525252525252525252525000005005005005005001000100010001000100015001500150015001500200020002000200020000000050050050050050010001000100010001000150015001500150015002000200020002000200000000500500500500500100010001000100010001500150015001500150020002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]d)d)d)d)e)e)e)e)f)f)f)f)Rotação da Bomba para n=500Rotação da Bomba para n=500Rotação da Bomba para n=500Rotação da Bomba para n=500Rotação da Bomba para n=2000Rotação da Bomba para n=2000Rotação da Bomba para n=2000Rotação da Bomba para n=2000Rotação da Bomba para n=5000Rotação da Bomba para n=5000Rotação da Bomba para n=5000Rotação da Bomba para n=5000626262626262626262626262626262freffreffreffreffreffreffreffreffreffreffreffref606060606060606060606060606060]]]]zzzzHHHH]]]]zzzzHHHH]]]]zzzzHHHH[[[[    [[[[    aaaa[[[[    aaaa585858585858585858585858585858aaaaiiiiiiiiiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFFccccnnnnêêêêüüüüqqqqeeeerrrrFFFFccccnnnnêêêêüüüüqqqqeeeerrrrFFFF565656565656565656565656565656545454545454545454545454545454525252525252525252525252525252505050505050505050505050505050484848484848484848484848484848000005005005005005001000100010001000100015001500150015001500200020002000200020000000015001500150015001500200020002000200020000000050050050050050050050050050050010001000100010001000100010001000100010001500150015001500150020002000200020002000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.3. Curvas de resposta para o controlador Média Móvel, com nível inicial em 30 metros. 
Pelas  simulações  percebe-se  que  o  sinal  de  controle  se  comportou  conforme  esperado, apresentando poucas oscilações quando estabilizado. No entanto, a simulação realizada para 2000 segundos  permitiu  avaliar  correções  sobre  o  nível  apenas  no  caso  de  nível  inicial  igual  a  60 metros, com a média móvel usando 5000 pontos, caso no qual há oscilações devido à transição entre  conjuntos  nebulosos.  Dessa  forma  já  é  possível  notar  qual  será  o  efeito  de  um  distúrbio prolongado  tentando  desestabilizar  o  sistema  –  erro  estacionário  pela  duração  do  distúrbio  e oscilações do sinal de controle na fronteira entra a faixa de estabilidade e a faixa de transição. 
 78 b)b)b)b)a)a)a)a)c)c)c)c)Resposta do Nível para n=500Resposta do Nível para n=500Resposta do Nível para n=500Resposta do Nível para n=500Resposta do Nível para n=2000Resposta do Nível para n=2000Resposta do Nível para n=2000Resposta do Nível para n=2000Resposta do Nível para n=5000Resposta do Nível para n=5000Resposta do Nível para n=5000Resposta do Nível para n=5000353535353535353535353535353535NNNNNNNNNNNNNNNNNNNNNNNN343434343434343434343434343434(t)(t)(t)(t)(t)(t)(t)(t)(t)(t)(t)(t)medmedmedmedmedmedmedmedmedmedmedmed333333333333333333333333333333323232323232323232323232323232]]]]]]]]]]]]mmmmmmmmmmmm313131313131313131313131313131[[[[    llll[[[[    llll[[[[    lllleeeevvvvNNNNeeeevvvvNNNNeeeevvvvNNNN303030303030303030303030303030íííííííííííí292929292929292929292929292929282828282828282828282828282828272727272727272727272727272727262626262626262626262626262626252525252525252525252525252525000005005005005005001000100010001000100015001500150015001500200020002000200020000000050050050050050010001000100010001000150015001500150015002000200020002000200000000500500500500500100010001000100010001500150015001500150020002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]d)d)d)d)e)e)e)e)f)f)f)f)Rotação da Bomba para n=500Rotação da Bomba para n=500Rotação da Bomba para n=500Rotação da Bomba para n=500Rotação da Bomba para n=2000Rotação da Bomba para n=2000Rotação da Bomba para n=2000Rotação da Bomba para n=2000Rotação da Bomba para n=5000Rotação da Bomba para n=5000Rotação da Bomba para n=5000Rotação da Bomba para n=5000626262626262626262626262626262ffffrefrefrefrefffffrefrefrefrefffffrefrefrefref606060606060606060606060606060]]]]zzzzHHHH]]]]zzzzHHHH]]]]zzzzHHHH[[[[    [[[[    aaaa[[[[    aaaa585858585858585858585858585858aaaaiiiiiiiiiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFFccccnnnnêêêêüüüüqqqqeeeerrrrFFFFccccnnnnêêêêüüüüqqqqeeeerrrrFFFF565656565656565656565656565656545454545454545454545454545454525252525252525252525252525252505050505050505050505050505050484848484848484848484848484848000005005005005005001000100010001000100015001500150015001500200020002000200020000000015001500150015001500200020002000200020000000050050050050050050050050050050010001000100010001000100010001000100010001500150015001500150020002000200020002000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.4. Curvas de resposta para o controlador Média Móvel, com nível inicial em 60 metros. 
Finalmente,  é  possível  afirmar  que  este  controlador  deve  ser  aplicado  apenas  a  sistemas onde o sinal de referência não sofre muitas variações, ou quando for possível projetar a faixa de trabalho  do  controlador,  considerando  uma  variação  limitada  na  referência,  de  tal  forma  que  a situação crítica continue dentro dos limites de estabilidade do sistema. Essas condições devem ser respeitadas como fatores determinantes da garantia de estabilidade do sistema. Essa formulação também é possível para o sistema VASPS. 
6.2.2  Classificador por Regiões Este controlador foi realizado com o intuito de robustez máxima, uma vez que monitora a faixa  de  estabilidade  e  possui  uma  grande  região  de  rotação  constante  no  centro  da  faixa  de pertinência.  Dessa  forma,  foram  tomadas  medidas  para  checar  tal  característica.  A  primeira  foi utilizar um sinal de referência variável para todas as simulações, avaliando se é possível perturbar a estabilidade do sinal de controle. Além disso, as constantes  LI e  LS foram simuladas para os valores de 20 e 40 metros, apresentadas nos gráficos à esquerda, e depois variadas para os valores  79 24 e 38 metros, apresentadas nos gráficos à direita, de forma a avaliar o efeito causado por um controle mais rígido no processo.  
A Figura 6.5 apresentada a simulação para o nível inicial de 30 metros. Este nível inicial representa a continuidade da operação do sistema para qualquer instante de tempo, sendo o valor operacional  ideal  do  nível.  É  necessário  verificar  também  como  o  sistema  reage  na  transição, tendo sido realizadas as mesmas simulações para o nível inicial de 60 metros, conforme a Figura 6.6. 
a)a)a)a)b)b)b)b)Resposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=25 m e LS=38 mResposta do Nível para LI=25 m e LS=38 mResposta do Nível para LI=25 m e LS=38 mResposta do Nível para LI=25 m e LS=38 m4040404040404040NNNNReferênciaReferênciaReferênciaReferênciaNNNNReferênciaReferênciaReferênciaReferência383838383838383836363636363636363434343434343434]]]]]]]]mmmmmmmm3232323232323232[[[[    lllleeeevvvvííííNNNN[[[[    lllleeeevvvvííííNNNN3030303030303030282828282828282826262626262626262424242424242424222222222222222220202020202020201000100010001000200020002000200030003000300030004000400040004000100010001000100020002000200020003000300030003000Tempo [s]Tempo [s]Tempo [s]Tempo [s]40004000400040000000500050005000500000005000500050005000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c)c)c)c)d)d)d)d)Rotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=25 m e LS=38 mRotação da Bomba para LI=25 m e LS=38 mRotação da Bomba para LI=25 m e LS=38 mRotação da Bomba para LI=25 m e LS=38 m6262626262626262freffreffreffreffreffreffreffref6060606060606060]]]]zzzzHHHH]]]]zzzzHHHH5858585858585858[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF56565656565656565454545454545454525252525252525250505050505050504848484848484848100010001000100020002000200020003000300030003000400040004000400010001000100010002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]300030003000300040004000400040000000500050005000500000005000500050005000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.5. Resposta para o Classificador por Regiões para o nível inicial de 30 metros.  
 80 a)a)a)a)b)b)b)b)Resposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=25 m e LS=38 mResposta do Nível para LI=25 m e LS=38 mResposta do Nível para LI=25 m e LS=38 mResposta do Nível para LI=25 m e LS=38 m4040404040404040NNNNReferênciaReferênciaReferênciaReferênciaNNNNReferênciaReferênciaReferênciaReferência383838383838383836363636363636363434343434343434]]]]]]]]mmmmmmmm3232323232323232[[[[    llll[[[[    llll3030303030303030eeeevvvvNNNNeeeevvvvNNNNíííííííí282828282828282826262626262626262424242424242424222222222222222220202020202020201000100010001000200020002000200030003000300030004000400040004000100010001000100020002000200020003000300030003000Tempo [s]Tempo [s]Tempo [s]Tempo [s]40004000400040000000500050005000500000005000500050005000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c)c)c)c)d)d)d)d)Rotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=25 m e LS=38 mRotação da Bomba para LI=25 m e LS=38 mRotação da Bomba para LI=25 m e LS=38 mRotação da Bomba para LI=25 m e LS=38 m6262626262626262freffreffreffreffreffreffreffref6060606060606060]]]]zzzzHHHH]]]]zzzzHHHH5858585858585858[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF56565656565656565454545454545454525252525252525250505050505050504848484848484848100010001000100020002000200020003000300030003000400040004000400010001000100010002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]300030003000300040004000400040000000500050005000500000005000500050005000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.6. Resposta para o Classificador por Regiões para o nível inicial de 60 metros. 
Conforme  esperado,  o  controlador  mostrou-se  bastante  robusto  e  teve  a  transição  mais suave apresentada até agora. No entanto, o efeito colateral foi bastante prejudicial – o nível não acompanha  nenhuma  das  variações  da  referência,  pois  não  há  ajuste  na  região  de  projeto,  uma vez que na base de regras o valor do acionamento da bomba para todo o intervalo da região de estabilidade é único. Isso explica as oscilações, que ocorrem porque o nível se estabiliza próximo à região de transição, assim que adentra a região de estabilidade, não minimizando o erro. 
6.2.3  Classificador com Média Este  controlador  apresentou  um  resultado  bastante  satisfatório,  conforme  apontado  pelas simulações  para  níveis  iniciais  de  30  metros  e  60  metros  de  altura,  com  o  sinal  de  referência mantido constante, conforme a Figura 6.7, e para sinal de referência variável, conforme a Figura 6.8. 
 81 a)a)a)a)b)b)b)b)Resposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 m4040404040404040NNNNReferênciaReferênciaReferênciaReferênciaNNNNReferênciaReferênciaReferênciaReferência383838383838383836363636363636363434343434343434]]]]]]]]mmmmmmmm3232323232323232[[[[    llll[[[[    llll3030303030303030eeeevvvvNNNNeeeevvvvNNNNíííííííí282828282828282826262626262626262424242424242424222222222222222220202020202020201000100010001000200020002000200030003000300030004000400040004000100010001000100020002000200020003000300030003000Tempo [s]Tempo [s]Tempo [s]Tempo [s]40004000400040000000500050005000500000005000500050005000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c)c)c)c)d)d)d)d)Rotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 m6262626262626262freffreffreffreffreffreffreffref6060606060606060]]]]zzzzHHHH]]]]zzzzHHHH5858585858585858[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF56565656565656565454545454545454525252525252525250505050505050504848484848484848100010001000100020002000200020003000300030003000400040004000400010001000100010002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]300030003000300040004000400040000000500050005000500000005000500050005000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.7. Resposta e Sinal de Controle para controlador Classificador com Média, com referência constante. 
 82 a)a)a)a)b)b)b)b)Resposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 m4040404040404040NNNNReferênciaReferênciaReferênciaReferênciaNNNNReferênciaReferênciaReferênciaReferência383838383838383836363636363636363434343434343434]]]]]]]]mmmmmmmm3232323232323232[[[[    lllleeeevvvvííííNNNN[[[[    lllleeeevvvvííííNNNN3030303030303030282828282828282826262626262626262424242424242424222222222222222220202020202020201000100010001000200020002000200030003000300030004000400040004000100010001000100020002000200020003000300030003000Tempo [s]Tempo [s]Tempo [s]Tempo [s]40004000400040000000500050005000500000005000500050005000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c)c)c)c)d)d)d)d)Rotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 m6262626262626262freffreffreffreffreffreffreffref6060606060606060]]]]zzzzHHHH]]]]zzzzHHHH5858585858585858[[[[    aaaa[[[[    iiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFFaaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656565656iiii5454545454545454525252525252525250505050505050504848484848484848100010001000100020002000200020003000300030003000400040004000400010001000100010002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]300030003000300040004000400040000000500050005000500000005000500050005000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.8. Resposta e Sinal de Controle para controlador Classificador com Média, com referência variável. 
É  possível  notar  nestas  simulações  que  há  algumas  poucas  oscilações  curtas  ao  longo  da operação do sistema, tão embora estas se apresentem bem menos freqüentes que nos modelos de controlador  anterior.  Além  disso,  percebe-se  que  o  sinal  acompanha  as  alterações  do  set  point permitindo  uma  melhoria  significativa  de  desempenho  em  relação  aos  outros  modelos.  Assim, devido  ao  bom  resultado  que  este  controlador  apresentou  usando  o  gerador  de  golfadas  com freqüência de golfadas aleatória, foi realizado um novo teste, ainda com set point variável para um gerador de golfadas com amplitude de golfadas aleatórias, de acordo com a Figura 6.9.  
 83 a)a)a)a)b)b)b)b)Resposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 m4040404040404040NNNNReferênciaReferênciaReferênciaReferênciaNNNNReferênciaReferênciaReferênciaReferência383838383838383836363636363636363434343434343434]]]]]]]]mmmmmmmm3232323232323232[[[[    llll[[[[    llll3030303030303030eeeevvvvNNNNeeeevvvvNNNNíííííííí282828282828282826262626262626262424242424242424222222222222222220202020202020201000100010001000200020002000200030003000300030004000400040004000100010001000100020002000200020003000300030003000Tempo [s]Tempo [s]Tempo [s]Tempo [s]40004000400040000000500050005000500000005000500050005000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c)c)c)c)d)d)d)d)Rotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 m6262626262626262freffreffreffreffreffreffreffref6060606060606060]]]]zzzzHHHH]]]]zzzzHHHH5858585858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF[[[[    aaaaiiii5656565656565656iiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5454545454545454525252525252525250505050505050504848484848484848100010001000100020002000200020003000300030003000400040004000400010001000100010002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]300030003000300040004000400040000000500050005000500000005000500050005000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.9. Resposta e Sinal de Controle para controlador Classificador com Média, com o último gerador de golfadas, de freqüência e amplitude variáveis. 
Pela figura, nota-se que mesmo com um gerador de golfadas agressivo, tanto o desempenho quanto a manipulação do sinal de controle são mantidos, provendo o processo com um resultado conforme  o  desejado  –  o  sinal  de  controle  corrigiu  o  sinal  de  saída  (nível  da  piscina)  em  uma faixa  bastante  próxima  de  variação  com  picos  mais  largos  e  suaves  do  que  os  obtidos  com  os outros modelos. 
6.2.4  Histerese com Auto-ajuste Uma vez que este controlador abrange ambos os conceitos introduzidos para os outros dois, possuindo  um  classificador  na  entrada  e  o  cômputo  da  média  móvel,  é  necessário  realizar simulações  para  todo  o  conjunto  de  parâmetros.  No  entanto  serão  feitas  duas  análises separadamente – uma para o controlador em si e sua dinâmica junto ao processo, e outra para a avaliação  do  efeito  do  mecanismo  de  auto-ajuste.  Para  conseguir  uma  simulação  apenas avaliando o controlador, sem o mecanismo de auto-ajuste, basta manter a entrada do gerador de golfadas  do  sistema  como  vinha  sendo  mantida  até  então,  pois  o  mecanismo  de  auto-ajuste  84 apenas tem efeito após o sistema sofrer mudanças dinâmicas, como proposto em seu projeto no Capítulo 5. No caso do VASPS, essa mudança dinâmica seria a depleção do reservatório de óleo, com o decaimento da pressão na formação. Já para a simulação apenas do mecanismo de auto-ajuste,  pode-se  simular  uma  vazão  de  entrada  decaindo  e  manter  os  parâmetros  do  controlador constantes,  de  forma  a  avaliar  as  correções  impostas  às  freqüências  de  acionamento,  uZ,  uPS  e uNS. 
6.2.4.1  Avaliação do Controlador Para a avaliação do controlador, foram realizadas inicialmente simulações variando apenas o nível inicial e o sinal de referência, a fim de avaliar o transiente. Os demais parâmetros, como as fronteiras entre regiões de trabalho, µ1 e µ2, a janela de histerese, δ, o valor da saída em cada região,  uNB,  uNS,  uZ,  uPS  e  uPB,  os  limites  de  estabilidade  do  sistema, LI  e  LS,  e  o  número  de pontos  utilizados  na  Média  Móvel,  n,  foram  mantidos  constantes  nas  simulações  iniciais.  A Figura  6.10  apresenta  um  esquemático  para  estas  configurações,  com  os  valores  de  µ1  igual  a 0,35 e µ2 igual a 0,75, δ igual a 0,1, uZ valendo 54 Hz, uPS valendo 56 Hz, uNS em 52 Hz, uPB em 60 Hz e uNB em 48 Hz. Por fim, n foi configurado para 2000 pontos, a taxa de amostragem para 0,1 segundo, LI em 20 metros e LS em 40 metros. 
Histerese Histerese Histerese de subidade subidade subida48 Hz48 Hz48 Hz52 Hz52 Hz52 Hz54 Hz54 Hz54 Hz56 Hz56 Hz56 Hz60 Hz60 Hz60 HzHisterese Histerese de descidade descida48 Hz48 Hz48 Hz52 Hz52 Hz52 Hz54 Hz54 Hz54 Hz56 Hz56 Hz56 Hz60 Hz60 Hz60 Hz___µµµpertinência médiapertinência média-0,75-0,75-0,65-0,65-0,35-0,35-0,25-0,250,250,250,350,350,650,650,750,75 Figura 6.10. Esquemático da histerese adaptado para o caso VASPS. 
Foram  realizadas  quatro  simulações  com  estes  parâmetros.  Para  este  controlador,  que  é conceitualmente  mais  robusto  que  os  anteriores,  foi  utilizado  o  último  gerador  de  golfadas apresentado,  com  amplitude  e  freqüência  das  golfadas  de  líquido  variáveis.  O  nível  inicial assumiu  o  valor  de  30  metros  nos  gráficos  à  esquerda,  e  o  valor  de  60  metros  nos  gráficos  à direita. A referência foi mantida constante (30 metros) na Figura 6.11, e foi variada no segundo conjunto de simulações conforme o sinal pontilhado apresentado na Figura 6.12. 
 85 Este  modelo  apresentou,  pelas  simulações,  um  melhor  sinal  de  controle,  sem  oscilações curtas e freqüentes, bem como um erro estacionário condicionalmente proporcional. No entanto, o grau de compromisso entre qualidade do sinal de controle e desempenho, pode ser manipulado pelos  parâmetros  que  foram  mantidos  constantes  nestas  simulações,  como  pode  ser  visto  no Apêndice B, onde são apresentadas simulações exaustivas para todos os parâmetros. Além disso, o  controlador  foi  submetido  a  bruscas  variações  da  referência,  não  apresentando  oscilações indevidas no sinal de controle, e acompanhando a referência dentro de uma faixa de proximidade. 
a)a)a)a)b)b)b)b)Resposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 m4040404040404040NNNNReferênciaReferênciaReferênciaReferênciaNNNNReferênciaReferênciaReferênciaReferência383838383838383836363636363636363434343434343434]]]]]]]]mmmmmmmm3232323232323232[[[[    llll[[[[    llll3030303030303030eeeevvvvNNNNeeeevvvvNNNNíííííííí282828282828282826262626262626262424242424242424222222222222222220202020202020201000100010001000200020002000200030003000300030004000400040004000100010001000100020002000200020003000300030003000Tempo [s]Tempo [s]Tempo [s]Tempo [s]40004000400040000000500050005000500000005000500050005000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c)c)c)c)d)d)d)d)Rotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 m6262626262626262freffreffreffreffreffreffreffref6060606060606060]]]]zzzzHHHH]]]]zzzzHHHH5858585858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF[[[[    aaaaiiii5656565656565656iiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5454545454545454525252525252525250505050505050504848484848484848100010001000100020002000200020003000300030003000400040004000400010001000100010002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]300030003000300040004000400040000000500050005000500000005000500050005000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.11. Resposta para o controlador Histerese com Auto-ajuste, com referência constante. 
 86 a)a)a)a)b)b)b)b)Resposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 m4040404040404040NNNNReferênciaReferênciaReferênciaReferênciaNNNNReferênciaReferênciaReferênciaReferência383838383838383836363636363636363434343434343434]]]]]]]]mmmmmmmm3232323232323232[[[[    llll[[[[    llll3030303030303030eeeevvvvNNNNeeeevvvvNNNNíííííííí282828282828282826262626262626262424242424242424222222222222222220202020202020201000100010001000200020002000200030003000300030004000400040004000100010001000100020002000200020003000300030003000Tempo [s]Tempo [s]Tempo [s]Tempo [s]40004000400040000000500050005000500000005000500050005000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c)c)c)c)d)d)d)d)Rotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 m6262626262626262freffreffreffreffreffreffreffref6060606060606060]]]]zzzzHHHH]]]]zzzzHHHH5858585858585858[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF56565656565656565454545454545454525252525252525250505050505050504848484848484848100010001000100020002000200020003000300030003000400040004000400010001000100010002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]300030003000300040004000400040000000500050005000500000005000500050005000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.12. Resposta para o controlador Histerese com Auto-ajuste, com referência variável. 
As  variações  da  amplitude  do  sinal  de  saída,  a  rotação  da  bomba,  para  esta  resposta parecem  ser  excedentes  ao  desejado  para  o  VASPS,  mas  isso  ocorre  devido  à  quantidade  de variações na referência no curto período de tempo. Caso o operador venha a fazê-lo em campo, o sistema obedecerá, pois está sendo projetado para isso. A recomendação, no entanto, é que caso se  deseje  a  vida  útil  mais  longa  possível  para  a  BCS,  menores  devem  ser  as  variações  na referência. 
O sistema apresentou uma transição de estados suave ao sair do patamar de nível inicial de 60  metros.  A  transição  foi  tão  paulatina  quanto  a  variação  do  nível  permitiu.  Embora  este controlador  apresente  uma  qualidade  visível  no  sinal  de  controle,  as  simulações  iniciais apresentaram  um  desempenho  que  ainda  deixa  a  desejar  no  tempo  de  resposta  e  no  erro estacionário, tão embora os resultados se apresentem muito próximo do desejado para o VASPS. 
As  oscilações  obviamente  não  permitem  um  controle  de  nível  exemplar,  mas  o  controle  de rotação, que é o foco deste modelo, apresenta-se adequado para as simulações de longa duração que foram tomadas a partir de então. 
 87 O Apêndice B apresenta um conjunto de experimentos computacionais realizados sobre o controlador  Histerese  com  Auto-ajuste  para  o  teste  do  controlador  adaptado  ao  VASPS,  ainda sem  testar  o  auto-ajuste.  Estas  simulações  visam  encontrar  a  configuração  ideal  para  os parâmetros, bem como seu efeito na dinâmica do sistema. O apêndice conclui com propostas para experimentação  real  de  uma  implementação  dos  conceitos  desenvolvidos  e  propostos  neste trabalho. Para fins de referência, a Tabela 6.1 apresenta os grupos de experimentos desenvolvidos computacionalmente. 
Tabela 6.1. Planejamento dos experimentos computacionais para verificação da relação entre parâmetros, sinal de controle e resposta do sistema. 
Variáveis µ1 - µ2 Simulação  Ordem [uNB uNS uZ uPS uPB] δ1 – δ2 N0  SP 30  30  2000 30  30  4000 30  var  2000 30  var  4000 60  var  2000 60  var  2000 60  var  2000 60  30  2000 60  30  2000 60  30  2000 30  30  2000 30  30  2000 30  30  6000 30  30  4000 30  30  4000 30  30  6000 30  30  6000 n rsl/fsl 2% 2% 2% 2% 2% 2% 2% 2% 2% 2% 5% 5% 10% 5% 5% 10% 10% 11 12 21 22 1 2 3 1 2 3 1 2 3 1 2 1 2  10% - 10% 10% - 10% 10% - 10% 10% - 10% 20% - 20% 20% - 20% 20% - 20% 10% - 10% 15% - 15% 20% - 20% 10% - 10% 20% - 20% 40% - 30% 20% - 20% 20% - 20% 40% - 30% 40% - 30% 35% - 75% 35% - 75% 35% - 75% 35% - 75% 40% - 80% 40% - 80% 40% - 80% 35% - 75% 35% - 75% 40% - 80% 35% - 75% 40% - 80% 40% - 80% 40% - 80% 40% - 80% 40% - 80% 40% - 80% [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] A B [60 55.5 54 52.5 48] [60 55 54 53 48] [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] [60 55 54 53 48] [60 55 54 53 48] [60 55 54 53 48] [60 56 54 52 48] [60 55 54 53 48] C 1 2 [60 55.5 54 52.5 48] 3 [60 55 54 53 48]         Ademais,  as  curvas  conclusivas  do  melhor  desempenho  encontrado  são  apresentadas  na Figura 6.13, onde se pode notar a melhoria em relação às simulações iniciais. É importante notar que o tempo de simulação destas curvas são estendidos em relação às simulações anteriores, de forma a realizar uma avaliação mais rigorosa, e que os parâmetros para esta simulação são dados na Tabela 6.1 para a simulação 3, ordem 2. 
 88 Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040NNNNNNNNNNSP NívelSP NívelSP NívelSP NívelSP Nível1.5 Hz1.5 Hz1.5 Hz1.5 Hz1 Hz1 Hz1 Hz1 Hz3535353535]]]]mmmm[[[[    lllleeeevvvvííííNNNN3030303030252525252520202020200000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba62626262626060606060ffffref 1.5 Hzref 1.5 Hzref 1.5 Hzref 1.5 Hzf reff reff reff ref]]]]zzzzHHHH1 Hz1 Hz1 Hz1 Hz5858585858[[[[    aaaa5656565656iiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF54545454545252525252505050505048484848480000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000 Figura 6.13. Simulação 3, teste de uZ, apresentando as curvas 3.1 e 3.2. 
É possível notar que após uma avaliação mais profunda do controlador, é possível concluir sobre o sistema a ponto de configurá-lo para alguns poucos acionamentos por dia, de forma que mesmo sob as condições mais severas de trabalho, caso o sistema permaneça dentro do escopo de atuação  da  bomba,  é  possível  corrigir  os  distúrbios  e  trabalhar  com  acionamentos  mais demorados e suaves. 
6.2.4.2  Avaliação do Auto-ajuste É possível notar pela Figura 6.13 que talvez houvesse uma rotação constante para a zona de trabalho  próxima  ao  erro  nulo,  que  permitisse,  idealmente,  o  equilíbrio  para  um  distúrbio conhecido  e  controlado,  dada  pela  média  ponderada  das  rotações  ativadas  pelos  tempos  de atuação  decorridos.  Essa  rotação  proporcionaria  uma  vazão  de  saída  que  correspondesse  ao balanço  de  massa  do  sistema.  Sabe-se,  no  entanto,  que  a  vazão  recebida  pelo  VASPS  advinda do(s) poço(s) se altera conforme as golfadas evoluem, de forma que o sistema está sendo sempre perturbado, e é impossível manter um equilíbrio perfeito com uma vazão de saída constante. 
 89 Conceitualmente,  entretanto,  é  desejado  que  a  vazão  de  saída  no  equilíbrio  seja  o  mais próxima  possível  da  média  das  oscilações  da  vazão  de  entrada,  de  forma  a  minimizar  as alterações  no  sinal  de  controle.  Assim,  considerando  que  a  rotação  de  saída  é  ativada  em patamares  constantes  e  que  oscilam  em  torno  da  vazão  ideal  de  saída,  é  possível  computar  a média  móvel  do  sinal  de  controle  ativado,  da  mesma  forma  que  é  feito  na  entrada  com  a pertinência classificada, e compará-lo com os patamares de saída parametrizados, encontrando a distância  que  a  média  móvel  está  de  cada  um  deles.  No  sistema  VASPS,  esta  distância  foi configurada como sendo uma ponderação de 90% do valor do valor de equilíbrio, uZ, e 10 % do valor da faixa subseqüente, uNS ou uPS, de forma que o valor de uZ é dado pela Equação (6.1).  
u90.0
90.0
t1n∑⋅−⋅<<⋅+⋅uuuu,90,0(10,0))(tu90,0(10,0)seZNSZPSZ−nt⋅10,0t1n1n∑∑⋅+⋅≥⋅+uuuuu10.0
,)(tu90,0()se(6.1) 
ZZPSZPS−ntt⋅−⋅≤⋅−⋅uuuu10.0
,)(tu90,0(10,0)seZNSNSZ−nt A arbitragem sobre estes pesos advém das conclusões experimentais que apontaram para a necessidade  de  mudanças  suaves  no  valor  da  rotação  de  equilíbrio,  pois  quando  esta  está deslocada  do  centro  da  faixa  de  operação  do  sinal  de  controle,  mudanças  maiores  tornam-se muito bruscas no sentido onde há maior margem de variação do nível, a região distante da crítica. 
Ainda,  quando  o  sistema  busca  novo  patamar  de  equilíbrio  devido  a  mudanças  bruscas  no sistema,  alterações  de  maior  magnitude  no  patamar  de  equilíbrio  provaram  que  o  retorno  do sistema à condição de erro nulo tem dificuldades em corrigir o valor de uZ devido à necessidade de uma média de ativações muito alta – ou muito baixa – no sentido oposto do acionamento, o que dificilmente ocorre quando o sistema retorna de um ponto de operação crítico. 
Por simplicidade computacional, o valor de saída do sinal de controle na faixa de transição, uNS ou uPS, é parametrizado pelo valor da saída nos outros intervalos, uZ e uNB ou uPB, de forma que  ao  se  alterar  o  valor  de  uZ,  automaticamente  todos  os  outros  patamares  para  o  sinal  de controle  também  sejam  corrigidos,  de  tal  forma  que  o  cômputo  dos  valores  de  uNS  ou  uPS  são dados  pelas  Equações  (6.2)  e  (6.3).  É  interessante  notar  que  um  acionamento  para  uNS  ou  uPS mais  distante  que  a  avaliação  da  média  móvel  do  sinal  de  controle  proporciona    às  faixas  de correção  um  poder  significativo  de  atuação,  permitindo  variações  na  média  móvel  condizentes com os pesos de 90% e10% propostos. 
 90 (2)⋅⋅+u3u(6.2) 
ZNB=u NS(2)⋅⋅+u3u(6.3) 
=ZPBu PS a) Resposta do sistema – Nível em metrosa) Resposta do sistema – Nível em metrosb) Resposta do sistema – Nível em metrosb) Resposta do sistema – Nível em metros404040404040353535353535]]]]]]mmmmmm[[[   lll[[[   lll303030303030eeevvvNNNeeevvvNNNíííííí2525252525252020202020200000200002000020000200001000010000100001000050005000500050001500015000150001500000002000020000200002000010000100001000010000500050005000500015000150001500015000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c) Sinal de distúrbio - Vazão de entrada [m³/s]c) Sinal de distúrbio - Vazão de entrada [m³/s]d) Sinal de distúrbio - Vazão de entrada [m³/s]d) Sinal de distúrbio - Vazão de entrada [m³/s]]]]sss]]]sss///³³³0.02
0.02
0.02
0.02
0.02
0.02
///³³³mmmmmm[[[   [[[   aaadddaaarrrtttnnneeeeeedddoooãããzzzaaaVVV0.015
0.015
0.015
0.015
0.015
0.015
aaadddaaarrrtttnnneeeeeedddoooãããzzzaaaVVV0.01
0.01
0.01
0.01
0.01
0.01
      0.005
0.005
0.005
0.005
0.005
0.005
      0000000000000020000200002000020000200002000020000200001000010000100001000010000100001000010000500050005000500015000150001500015000500050005000500015000150001500015000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]e) Sinais de Controle Total e de Equilíbrioe) Sinais de Controle Total e de Equilíbriof) Sinais de Controle Total e de Equilíbriof) Sinais de Controle Total e de Equilíbrio6262626262626262ffffffffrefrefrefref]]]]zzzzHHHH]]]]zzzzHHHHrefrefrefref6060606060606060uuuuuuuuEQEQEQEQEQEQEQEQ[[[[aaaaccccnnnneeeeüüüüqqqqeeeerrrrFFFF[[[[aaaaccccnnnneeeeüüüüqqqqeeeerrrrFFFF5858585858585858iiiiiiii565656565656565654545454545454545252525252525252505050505050505048484848484848480000000020000200002000020000200002000020000200001000010000100001000010000100001000010000500050005000500015000150001500015000500050005000500015000150001500015000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s] Figura 6.14. Curvas para as simulações de teste do mecanismo de auto-ajuste. 
Finalmente,  para  realizar  as  simulações,  também  é  importante  ponderar  sobre  o  valor  do número de pontos usado na média móvel do sinal de controle. Diferentemente do n utilizado na pertinência  de  entrada,  não  se  deseja  que  o  este  parâmetro  para  o  sinal  de  controle  seja  muito grande,  pois  o  tempo  de  reação  que  o  sinal  de  controle  deve  possuir  sobre  o  sistema  deve  ser muito menor, ou seja, sua alteração deve ser mais rápida, que o tempo de reação da resposta, uma vez que é o sinal de controle que propicia uma condição de trabalho estável. Assim, utilizando  91 inicialmente  um  n  para  o  sinal  de  controle  no  valor  de  2000  pontos  em  vez  dos  4000  pontos propostos  para  o  sistema  conforme  o  Apêndice  B,  foram  realizadas  as  simulações  cujos resultados foram apresentados na Figura 6.14. 
As  curvas  apresentam  a  resposta  do  nível,  o  sinal  de  controle  e  o  valor  de  uZ  para  duas condições simuladas, com valores da vazão de entrada do gerador de golfadas, o distúrbio, dadas pelos  gráficos  c)  e  d).  A  primeira  condição  simula  uma  transição  descontínua  de  grande amplitude  no  sistema,  como,  por  exemplo,  se  um  segundo  poço  ou  manifold  tivesse  de  ser interrompido bruscamente. Há duas transições de forma a melhor avaliar o transiente. A segunda condição representa um declínio linear na magnitude da vazão, representando uma queda linear de  pressão  no  poço.  Essa  queda  seria  muito  mais  suave  em  campo,  uma  vez  que  a  simulação possui uma duração de 20000 segundos, o que corresponde a um período de cinco horas e meia de trabalho. 
Em ambas as simulações é possível notar pelo valor de uZ três patamares de trabalho que foram buscados pelo mecanismo de auto-ajuste, bem como o seu transiente, bastante evidente e representado  pelas  mudanças  em  degrau,  que  também  foram  refletidas  no  sinal  de  controle.  É interessante notar que embora houvesse ativações das faixas de transição, em momento algum o sistema  apresentou  instabilidade  na  alteração  de  patamares,  apresentando  o  comportamento desejado. 
6.2.5  Avaliação de resultados Uma  síntese  das  dificuldades  e  vantagens  de  cada  modelo  desenvolvido  segundo  a estratégia de minimização do esforço de controle é apresentada na Tabela 6.2. 
 92 Tabela 6.2. Comparação dos controladores voltados à minimização do esforço. 
MODELO CARACTERÍSTICAS VANTAGENS DESVANTAGENS •  Sinal de controle oscilatório entre as os patamares de saída; •  Cálculo do Nível Médio; •  Amplas regiões de estabilidade para o sinal de controle; •  Estacionamento do sinal de controle entre as regiões de trabalho; •  Ajuste do sinal de controle com Lógica Nebulosa; Monitoramento da Média Móvel •  Transição suave da condição crítica para a estável. 
•  Regiões de Trabalho definidas pelos Conjuntos Nebulosos. 
•  Variações limitadas do setpoint; •  Limitação na escolha do sinal de controle. 
•  setpoint variável; •  Insensibilidade a variações no setpoint; •  Sinal de controle mais sensível a alterações; •  Ajuste do sinal de controle com Lógica Nebulosa; •  Sinal de controle oscilatório entre os patamares de saída; Classificador de •  Permite estreitar a faixa de estabilidade; Regiões •  Definição de limites móveis de estabilidade. 
•  Limitação na escolha do sinal de controle. 
•  Intervalo contínuo para a seleção do sinal de controle. 
•  Cálculo da Média; •  Sinal de controle mais sensível a alterações; •  Classificação da entrada relativamente ao setpoint; •  setpoint variável; •  Sinal de controle oscilatório entre as os patamares de saída; •  Definição de limites móveis de estabilidade; •  Sinal de controle estável próximo ao setpoint; •  Estacionamento do sinal de controle entre as regiões de trabalho; •  Ajuste do sinal de controle com Lógica Nebulosa Classificador por •  Permite estreitar a faixa de estabilidade; Regiões com Média •  Regiões de Trabalho definidas pelos Conjuntos Nebulosos;  •  Limitação na escolha do sinal de controle. 
•  Amplas regiões de estabilidade para o sinal de controle; •  Parametrizável; •  Transição suave da condição crítica para a estável. 
•  Relação clara entre parâmetros e requisitos. 
•  Sinal de controle mais sensível a alterações; •  Cálculo da Média; •  Classificação da entrada relativamente ao setpoint; •  setpoint variável; •  Sinal de controle estável próximo ao setpoint; •  Definição de limites móveis de estabilidade; Classificador por •  Limitação na escolha do sinal de controle. 
Regiões com Média •  Permite estreitar a faixa de estabilidade; •  Regiões de Trabalho definidas pela Histerese; e Histerese •  Amplas regiões de estabilidade para o sinal de controle; •  Parametrizável; •  Relação clara entre parâmetros e requisitos. 
•  Transição suave da condição crítica para a estável.  
Na Tabela 6.2 pode-se notar a evolução do trabalho partindo de dois conceitos distintos de controlador,  representados  pelos  dois  primeiros  modelos.  Embora  ambos  utilizem  a  Lógica  93 Nebulosa  como  ferramenta,  a  diferença  na  estratégia  de  controle  propiciou  resultados  distintos. 
Enquanto no primeiro modelo, Média Móvel, a estabilização é suave e as regiões de trabalho são mais  amplas,  mas  a  variação  do  setpoint  é  limitada,  no  segundo  modelo,  o  Classificador  de Regiões,  há  uma  maior  flexibilidade  na  seleção  do  sinal  de  controle  e  o  controle  é  mais  rígido devido às regiões de estabilidade menores o que acarreta no detrimento da qualidade da resposta. 
Ainda  assim,  ambos  apresentaram  limitação  na  escolha  do  sinal  de  controle  e  dificuldades  no tratamento da variação do setpoint. 
Mais  adiante,  as  outras  duas  estratégias  de  controle,  composições  destes  dois  conceitos, permitiram  corrigir  as  dificuldades  complementares  dos  controladores,  como  a  parametrização dos conjuntos nebulosos através do  classificador, minimizando as dificuldades com a oscilação entre regiões de trabalho, e como a conjugação do estreitamento da faixa de estabilidade com o alargamento  da  faixa  de  trabalho  do  sinal  de  controle,  que  permite  minimizar  as  alterações  no acionamento  da  bomba.  Ainda,  para  este  último  aspecto,  o  uso  da  histerese  no  lugar  dos conjuntos nebulosos reforçou o resultado obtido  anteriormente, e a aplicação do mecanismo de auto-ajuste  das  constantes  de  saída  permitiu  a  adequação  do  controlador  à  dinâmica  de  longo prazo  do  VASPS,  garantindo  a  longa  vida  útil  do  controlador,  evitando  necessidades  de reprogramação. 
Finalmente,  uma  desvantagem  presente  em  todos  os  modelos  apresentados  na  tabela  é  a limitação  na  escolha  do  sinal  de  controle.  Isto  ocorre  como  conseqüência  da  opção  de preservação  do  atuador,  sendo  parte  do  conceito  da  estratégia  adotada,  um  detrimento  do desempenho  em  função  da  estabilidade  operacional.  Este  resultado  era  esperado  e  o  retorno adquirido ao se abrir mão desta característica do sistema apareceu claramente no sinal de controle adotado. 
 94     Capítulo 7  7  Conclusões Neste  trabalho  buscou-se  abordar  o  problema  de  controle  do  VASPS  com  estratégias  de controle diferentes das tradicionais, focando nos requisitos do sistema e da bomba BCS, e não se restringindo às tecnologias clássicas presentes no controlador industrial. O primeiro ganho desta abordagem pôde ser notado na seção 6.1.1, mais detalhada no Apêndice A, que apresentou que o uso de uma técnica de controle mais adequada é possível se melhorar o sinal de controle sem a perda do desempenho do sinal de  resposta,  e também sem a interferência direta no controlador usado em campo. A estratégia apresentada propicia adicionalmente outro efeito positivo, que é o constante  monitoramento  da  operação  do  sistema  através  da  linguagem  intuitiva  aplicada  à  sua operação  manual,  funcionando  como  uma  redundância  e  conseqüentemente  provendo  maior segurança para o operador e robustez para o sistema. 
Ao  passo  que  se  foi  permitido  interferir  na  tecnologia  presente  no  sistema,  foram  então estudados novos conceitos e novos modelos de controladores, em diferentes níveis de exigência para  o  sistema,  de  forma  que  as  técnicas  de  controle  inteligente  aplicadas  se  mostraram adequadas  para  o  tratamento  de  sistemas  contínuos  e  proveram  maior  facilidade  na  tomada  de decisão  automática.  Uma  síntese  das  dificuldades  e  vantagens  de  cada  modelo  desenvolvido segundo  a  estratégia  de  minimização  do  esforço  de  controle  é  apresentada  na  Tabela  6.2.  Com isso, inúmeros ganhos foram encontrados: •  Melhoria  de  desempenho  operacional:  A  adoção  de  uma  estratégia  adequada permitiu o balanceamento do compromisso desempenho versus esforço de controle, com a proposição de controladores que visam reduzir o custo da operação em alto mar  através  da  redução  no  número  de  intervenções  submarinas  causada  pelo  95 aumento  da  vida  útil  da  bomba  BCS.  Isso  provou  ser  possível  a  melhoria  do desempenho operacional no uso do BCS, criticado em Devegowda e Scott (2003); •  Flexibilidade  do  controlador:  O  gerenciamento  do  compromisso  desempenho versus esforço de controle permite alternar entre diversas condições de operação do sistema,  comprovando  a  flexibilidade  da  tecnologia  de  controle  inteligente.  Isso também mostrou que a suavização do sinal de controle implica na geração de picos na resposta e vice-versa; •  Interface intuitiva: O uso da Lógica Nebulosa permite acompanhar o processo da mesma forma que se faz quando em campo, ao ler as curvas de operação do sistema. 
Esta característica é mais evidente nas subseções da seção 6.2 do que na seção 6.1.1, 
e permite a reformulação do sistema supervisório para que este tenha uma interface mais amigável para com o usuário; •  Concepção  de  um  Simulador:  A  coesão  da  lógica  aplicada  no  sistema,  com  o monitoramento de diversas variáveis-chave e com o uso de um gerador de golfadas mais  agressivo  que  o  sinal  obtido  em  campo  permite  a  simulação  da  operação  de forma intuitiva, o que pode ser usado no treinamento e desenvolvimento de pessoas, inclusive com a possibilidade de treinamento de situações emergenciais, que pó si só  pode  evitar  complicações  em  situações  de  risco,  dada  a  dificuldade  de  se encontrar, capacitar e manter mão-de-obra adequada para o ambiente de exploração em águas profundas; •  Aumento  do  entendimento  geral  sobre  o  sistema:  O  conhecimento  da  dinâmica física  do  VASPS  propiciado  pelas  curvas  de  resposta  permite,  em  longo  prazo,  a maior  adequação  das tecnologias  e  com  menor tempo  despendido  com experimentação  em  campo,  dada  a  existência  do  simulador.  Pode-se  citar  como conhecimento adquirido sobre o sistema sua alta constante de tempo de resposta – algo desconhecido antes da primeira operação e evidente nos resultados obtidos –, os limites de oscilação da resposta do sistema e as tendências geradas pelos sinais de erro e média do erro – que antes do tratamento com o Classificador ou com os Conjuntos  Nebulosos,  eram  variáveis  sem  uma  correlação  muito  clara  e  cuja conclusão sobre seu impacto no sistema não era tão intuitiva;  96 •  Ajuste  automático:  A  contribuição  gerada  pela  elaboração  do  mecanismo independente  de  auto-ajuste  do  controlador  é  uma  ferramenta  de  automação,  que pode ser aplicada a outros conceitos de controlador, adequando o funcionamento do equipamento  à  conhecida  dinâmica  de  decaimento  de  vazão  de  produção  e  de pressão de poços. Esta ferramenta reduz a necessidade da reprogramação periódica dos equipamentos. 
Como  propostas  para  trabalhos  futuros  usando  os  conceitos  desenvolvidos  neste  trabalho sugerem-se as seguintes atividades: •  A  Tabela  6.1  apresenta  uma  série  de  configurações  possíveis  para  o  modelo  do último  controlador  desenvolvido,  o  Classificador  por  Regiões  com  Média  e Histerese,  e pode ser usada como  guia para a experimentação em laboratório. Um trabalho  de  aplicação  é  o  próximo  passo  para  a  validação  do  desenvolvimento obtido neste trabalho; •  O  modelo  físico  do  VASPS  proposto  neste  trabalho  supõe  algumas  considerações realizadas no Capítulo 3 que podem ser estudadas mais a fundo a fim de obter um modelo mais refinado. Este trabalho poderia inclusive minimizar os desvios a serem encontrados  em  um  estudo  experimental  e  poderia  se  dar  nas  seguintes  frentes  de trabalho: o  Curva  da  Bomba:  poderia  ser  estudado  o  efeito  de  variação  da  curva  de carga do sistema ocaionada pela variação de velocidade (vazão) do fluido; o  Dinâmica do Nível: considerar os efeitos da pressão na variação do nível ou estudar a viabilidade de se trabalhar com o vaso pressurizado, mapeando  a relação entre as variáveis; o  Controle de pressão  e temperatura:  adaptar os  controladores obtidos para  a realização de malhas de controle adicional no sistema, propondo a utilização de atuadores adequados para cada situação, como por exemplo o uso de uma válvula choke para controle da pressão do gás; o  Cruzamento de variáveis: realizar um estudo fenomenológico para encontrar a  interrelação  das  variáveis  volume,  pressão  e  temperatura,  possivelmente incluindo os efeitos na bomba, como sua vibração;  97 •  Os  controladores  propostos  neste  trabalho  podem  também  ser  aplicados  a  outros processos  contínuos.  Estudos  com  grandes  potenciais  de  otimização  de  sistemas podem  se  seguir  na  adaptação  dos  controladores  para  controle  de  pressão, temperatura e vazão em outros tipos de separadores ou em transporte em gasodutos. 
Também  poderia  ser  estudado  o  controle  de  outro  tipo  de  atuado,  com  outros métodos de elevação artificial, como o BCP; •  Para  a  área  de  controle  inteligente,  há  estudos  possíveis  na  integração  de  maior capacidade de inferência, conclusão e decisão nos controladores, como por exemplo utilização  de  redes  neurais  para  aprendizado  do  processo  e  previsão  de  condições futuras baseadas na leitura dos distúrbios de entrada em campo. É possível imaginar que com o conhecimento do escoamento, sua sensorização pode permitir um ajuste do  controlador  para  uma  condição  prevista  em  futuro  próximo,  não  necessitando correções por realimentação, que esperam haver um erro real para corrigi-lo.  
•  Outras  técnicas  de  controle  também  podem  ser  empregadas,  como  o  controle distribuído que permita a integração de sistemas trabalhando concorrentemente, de forma  a  gerenciar,  por  exemplo,  as  entradas  advindas  da  produção  na  plataforma. 
Este controle distribuído pode lançar mão da técnica de agentes inteligentes.  
 98  Referências Biblográficas  Aström, K. J., Wittenmark, B. On Self Tuning Regulators. Automatica, 1973. 
Aström, K. J., Wittenmark, B. Adaptive Control. Addison-Wesley Longman Publishing Co., Inc. 
Boston, MA, USA, 1994.  
Babŭska, R. Fuzzy modeling for control. Publication Boston. Kluwer, 1998. 
Boullart,  L.,  Krijgsman,  A.  J.,  Vingerhoeds,  A.  Application  of  Artificial  Intelligence  in  process control. Pergamon Press.Ltd, Headington Hill Hall, Oxford, 1992. ISBN 0 08 042017 6. 
Campos, M. C. M., Loureiro, P., Filho, A. B. Novas estratégias de controle para a plataforma P-55.  Rio  Oil  &  Gás  Expo  and  Conference,  2006,  Rio  de  Janeiro,  11-14  Setembro, IBP1910_06. 
Clarke, D. W., Gawthrop, P. J. Self-tuning controller. Proc. IEE, 1975. 
de  Melo,  A.  V.,  Mendes,  J.  R.  P.,  Serapião,  A.  B.  S.  Controle  inteligente  para  o  separador VASPS.  4º  Congresso  Brasileiro  de  Pesquisa  e  Desenvolvimento  em  Petróleo  e  Gás, Campinas, 2007, 21-24 Outubro, 2.3.0078-2. 
de  Melo,  A.  V.,  Mendes,  J.  R.  P.,  Serapião,  A.  B.  S.,  Guilherme,  I.  R.,  Estevam,  V.  Controle supervisório  inteligente  para  o  separador  submarino  VASPS.  IV  Congresso  Rio Automação, 2007, Rio de Janeiro, 9-10 Maio, IBP568_07. 
de Melo, A. V., Mendes, J. R. P., Serapião, A. B. S., Estevam, V. Fuzzy tuned PID control for the VASPS  subsea  separator.  6th  Brazilian  Conference  on  Dynamics,  Control  and  their Applications, 2007, São José do Rio Preto., 22–25 Maio. 
do  Vale,  O.  R.,  Garcia,  J.  E.,  Villa,  M.  VASPS  installation  and  operation  at  Campos  Basin. 
Offshore Technology Conference, OTC 14003, Houston, Texas, Maio de 2002. 
Devegowda,  D.,  Scott,  S.  L.  An  Assessment  of  Subsea  Production  Systems.  SPE  Annual Technical Conference and Exhibition, 2003, Denver, Colorado, 5–8 Outubro, SPE 84045. 
Estevam, V. Uma Análise Fenomenológica da Operação de Bomba Centrífuga com Escoamento Bifásico. Tese de Doutorado, FEM/IG, Unicamp, Março de 2002. 
 99 França, F. A., Rosa, E. S., Bannwart, A. C., Moura, L. F., Alhanati, F. J. Hydrodynamic studies on  a  cyclonic  separator.  Offshore  Technology  Conference,  OTC  8059,  Houston,  Texas, Maio de 1996. 
Griffith, P., Wallis, G. B. Two-Phase Slug Flow. 1965. Transactions ASME. J. Heat Transfer, 83, 307. 
Jager, R. Fuzzy logic in control. Ph.D. Thesis, Technich University Delft, ISBN 90-9008318-9, Dutsh, 1995. 
Jager,  R.,  Verbruggen,  H.  B.,  Brujin,  P.  M.,  Krijgsman,  A.  J.  Real-time  Fuzzy  expert  control. 
International Conference on Control 1991. pp 966-970, vol 2. 
Jantzen, J. Tuning of Fuzzy PID controllers. Technical Report n°. 98-H 871, Technical University of Denmark, Department of Automation, Lyngby, DENMARK, 1998. 
Krstic, M., Kokotovic, P. V., Kanellakopoulos, I. Nonlinear and Adaptive Control Design. John Wiley & Sons, Inc. New York, NY, USA, 1995.  
Ogata,  K.  Engenharia  de  controle  moderno.  Publication  Upper  Saddle  River.  Prentice-Hall, 1996. 
Passino,  K.  M.,  Yurkovich,  S.  Fuzzy  control.  ISBN  0-201-18074-X.  Publication  Menlo  Park, California. Addison Wesley Longman, Inc., 1998. 
Peixoto,  G.  A.,  Ribeiro,  G.  A.  S.,  Barros,  P.  R.  A.,  Meira,  M.  A.,  Barbosa,  T.  M.  VASPS Prototype  in  Marimba  Field  —  Workover  and  Restart.  2005  SPE  Latin  American  and Caribbean Petroleum Engineering Conference, Rio de Janeiro, 20–23 Junho, SPE 95039. 
Riid,  A.  Transparent  Fuzzy  Systems:  modeling  and  control.  Ph.D.  Thesis  on  Informatics  and system engineering, Tallinn Technical University, Estonia, 2002. 
Santos,  M.,  Dormido,  S.,  de  la  Cruz,  J.  M.  Fuzzy-PID  Controllers  vs.  Fuzzy-PI  Controllers. 
Proceedings of the Fifth IEEE International Conference on Fuzzy Systems, 1996. Volume 3, pp 1598-1604. 
Santos,  M.,  Dormido,  S.,  de  la  Cruz,  J.  M.,  de  Madrid,  A.  P.  Between  Fuzzy-PID  and  PID-Conventional Controllers: a Good Choice. Proceedings of the 1996 Biennial Conference of the  North  American  Fuzzy  Information  Processing  Society-NAFIPS,  pp.  123-127. 
Berkeley, IEEE, 1996. 
 100 Shoham,  O.,  Kouba,  G.  E.  State  of  the  art  cylindrical-cyclone  compact-separator  technology. 
SPE Distinguished Author Series. 1998. SPE 39600. 
Skogestad, S., Postlethwaite, I. Multivariable Feedback Control. Publication Baffins Lane. John Wiley & Sons, 1996. 
Storkaas, E., Skogestad, S. Cascade Control of Unstable Systems with Aplication to Stabilization of  Slug  Flow.  Apresentado  no  IFAC-Symposium  Adchem  2003,  Hong  Kong,  Janeiro  de 2004. 
Storkaas, E., Skogestad, S., Godhavn, J.-M. A low-dimensional dynamic model of severe slugging for control design and analysis. Apresentado no Multiphase 2003, San Remo, Itália, 11-13 Junho. 
Takagi,  T.,  Sugeno,  M.  Fuzzy  identification  of  systems  and  its  applications  to  modeling  and control. IEEE Transactions on Systems, Man, and Cybernetics, 1985. 
Tanaka,  K.,  Sugeno,  M.  Stability  analysis  and  design  of  fuzzy  control  systems.  Fuzzy  Sets  and Systems, 1992. 
Teixeira, A. F., Mendes, J. R. P., Serapião, A. B. S., Guilherme, I. R. Controle inteligente para o sistema  de  separação  e  bombeamento  submarino  –  VASPS.  Rio  Oil  &  Gás  Expo  and Conference 2006, IBP1802_06. 
Teixeira, A. F., Mendes, J. R. P., Estevam, V., Guilherme, I. R., Morooka, C. K., Rigo, J. R. Um controlador Fuzzy para o sistema de separação e bombeamento submarino – VASPS. Rio Oil & Gás Expo and Conference 2004, IBP11804. 
Tzafestas,  S.,  Papanikolopoulos,  N.  Incremental  Fuzzy  expert  PID  control.  IEEE  Trans.  on Industrial Electronics, 37(5):365–371, Outubro de 1990. 
Van  Nauta  Lemke,  H.  R.,  De-Zhao,  W.  Fuzzy  PID  supervisor.  Proceedings  of  the  24th  IEEE Conference on Decision and Control, Fort Lauderdale, Florida, USA, 1985. 
Wang,  S.,  Mohan,  R.  S.,  Shoham,  O.,  Kouba,  G.  E.  Dynamic  Simulation  and  Control-System Design for Gas/Liquid Cylindrical Cyclone Separators. SPE 71308, SPE Journal, 2001. 
Wang,  L.-X.  Adaptive  Fuzzy  systems  and  control:  design  and  stability  analysis.  Publication Englewood Cliffs, Prentice Hall, 1994. 
White, F. M. Mecânica dos Fluidos. Editora McGraw Hill, 4ª Edição, 2002. 
 101 Zhao, Z., Tomizuka, M., Isaka, S. Fuzzy gain scheduling of PID controllers. IEEE transactions on systems, man. and cybernetics, vol 23., n°. 5, Setembro/Outubro de 1995. 
 102  Apêndice A  Dados de Projeto para o Modelo Supervisório             103 1  PROJETO DOS CONTROLADORES PID 1.1  PI referênciareferênciaPKPKPlantaPlanta++++--++(Processo)(Processo)∫∫IKIK Figura A.1. Diagrama de Blocos do Controlador PI. 
=.0
10001KK+.0
s10001sp=→=)(sK i⋅)(+s10(s⋅+⋅.3
)()(sPsK+)(sPsK10(+.0
+011.3)001⋅.0
10(+²s.3)001.0
s11.30
s011−3011e===)(sH ⋅+1².3)001011s5−−−[:,11.30
10e]pólos 1.2  PI COM DERIVADA referênciareferênciaIKIKPlantaPlanta++++++----++(Processo)(Processo)dddtdtPKPK Figura A.2. Diagrama de Blocos do Controlador PI com derivada. 
=100=18.0
KKp→=+)(sK10018.0
s i−3⋅)(+s100(s⋅+s⋅794e)()(sPsK+)(sPsK100(+.3)18.0
+⋅01110(.0
+97.9)001.1
se===)(sH −3⋅1.3)18.0
011s−3−.1:
794póloe  104 1.3  PD referênciareferênciaPKPKPlantaPlanta++++--++(Processo)(Processo)dddtdtDKDK Figura A.3. Diagrama de Blocos do Controlador PD. 
=10=300KKp→=+)(sK30010s d−3+s⋅33.3)001e33.3
e+s300(s⋅⋅)()()(sPsK+)(sPsK300(+.3)10+⋅01110(.0
+s===)(sH −2⋅1.3)10011s−2−33.3:
epólo 2  PROJETO DOS CONTROLADORES INTELIGENTES 2.1  CONTROLE FPID 0P0P++P∆ +P∆ +PKfPPKfPeeeK xeK x11rrPPOOÃÃÇÇAACCFFZZZZUUFFEEDDBASE BASE ||||OOÃÃÇÇAACCFFZZZZUUFF0I0I++I∆ +I∆ +PKfIPKfIieie11rrixixIIieKieKIIDEDEIIII||||0D0D++IID∆ +D∆ +PKfDPKfDREGRASREGRAScececxcx11rrDDceKceK|||| Figura A.4. Diagrama de blocos do controlador FPID. 
 105 a)a)b)b)µµµµµµµNBNBNBNBNSNSNSNSZZZZPSPSPSPSPBPBPBPBNSNSNSZZZPSPSPSPMPMPMPBPBPBNBNBNB-1       -0,9-1       -0,9-1       -0,9-1       -0,9-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,30,9       10,9       10,9       10,9       1-1--1--1--0,5--0,5--0,5-0000,50,50,5111c)c)µµµµµLEGENDALEGENDALEGENDAZZZPSPSPSPBPBPBNBNBNBNB: Negative Big (Muito Negativo)NB: Negative Big (Muito Negativo)NB: Negative Big (Muito Negativo)NS: Negative Small (Pouco Negativo)NS: Negative Small (Pouco Negativo)NS: Negative Small (Pouco Negativo)Z: ZeroZ: ZeroZ: ZeroPS: Positive Small (Pouco Positivo)PS: Positive Small (Pouco Positivo)PS: Positive Small (Pouco Positivo)PM: Positive Medium (Positivo Médio)PM: Positive Medium (Positivo Médio)PM: Positive Medium (Positivo Médio)PB: Positive Big (Muito Positivo)PB: Positive Big (Muito Positivo)PB: Positive Big (Muito Positivo) -0.5
-1                   -1                   -0.5
-1                   -0.5
---0000.5
0.5
0.5
111Figura A.5. Conjuntos Nebulosos para o controlador FPID. a) Variáveis de entrada (x, ix, cx). b) Variação da constante KP, ∆P. c) Variação das constantes KI e KD, ∆I e ∆D. 
Tabela A.1. Base de regras do controlador supervisor FPID Variação do Erro Integral do Erro Variação do Erro Pf If Df NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z  4.0  4.0  4.0  4.0  4.0 
PS  4.0  5.0  6.3  5.0  4.0 
PB  4.0  4.0  4.0  4.0  4.0 
NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z  1.0  1.0  5.0  4.0  3.0 
PS  1.0  1.0  4.0  3.0  3.0 
PB  1.0  1.0  3.0  3.0  3.0 
NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z  1.0  1.0  5.0  4.0  3.0 
PS  1.0  1.0  4.0  3.0  3.0 
PB  1.0  1.0  3.0  3.0  3.0 
   orrEorrEorrE  2.2  CONTROLE FPI 0P0P++P∆ +P∆ +PKfPPKfPeeeK xeK x11rrPPOOÃÃÇÇAACCFFZZZZUUFFEEDDBASE BASE ||||OOÃÃÇÇAACCFFZZZZUUFFIIDEDEIIIIII0I0I++I∆ +I∆ +PKfIPKfIieieREGRASREGRASixix11rrieKieKII|||| Figura A.6. Diagrama de blocos do controlador FPI. 
 106 a)a)c)c)µµµµµµµNBNBNBNBNSNSNSNSZZZZPSPSPSPSPBPBPBPBNSNSNSZZZPSPSPSPMPMPMPBPBPBNBNBNB-1       -0,9-1       -0,9-1       -0,9-1       -0,9-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,30,9       10,9       10,9       10,9       1-1--1--1--0,5--0,5--0,5-0000,50,50,5111b)b)µµd)d)µµµµµµNBNBNBNBNSNSNSNSZZZZPSPSPSPSPBPBPBPBZZZPSPSPSPBPBPBNBNBNB -1       -0.9
-1       -0.9
-1       -0.9
-1       -0.9
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
0.9       10.9       10.9       10.9       1-0.5
-1                   -1                   -0.5
-1                   -0.5
---0000.5
0.5
0.5
111Figura A.7. Conjuntos Nebulosos para o controlador FPI. a) Erro relativo, x. b) Integral relativa do erro, ix.. c) Variação da constante KP, ∆P. d) Variação da constante KI, ∆I. 
Tabela A.2. Base de regras do controlador supervisor FPI Integral do Erro  Integral do Erro Pf If NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z 4.0  4.0  4.0  4.0  4.0 
PS  7.0  6.5  5.5  5.0  4.0 
PB  4.0  4.0  4.0  4.0  4.0 
NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z 1.0  1.0  5.0  4.0  3.0 
PS  1.0  1.0  4.0  3.0  3.0 
PB  1.0  1.0  3.0  3.0  3.0 
  orrorrEE2.3  CONTROLE FPI COM DERIVADA 0I0I++I∆ +I∆ +PKfIPKfIeeeK xeK x11rrIIOOÃÃÇÇAACCFFZZZZUUFFEEDDBASE BASE ||||OOÃÃÇÇAACCFFZZZZUUFFIIDEDEIIII0P0P++IIP∆ +P∆ +PKfPPKfPREGRASREGRAScececxcx11rrPPceKceK|||| Figura A.8. Diagrama de blocos do controlador FPI com derivada. 
 107 a)a)b)b)µµµµµµµNBNBNBNBNSNSNSNSZZZZPSPSPSPSPBPBPBPBZZZPSPSPSPBPBPBNBNBNB-0.5
-1                   -1                   -0.5
-1                   -0.5
---0000.5
0.5
0.5
111-1       -0,9-1       -0,9-1       -0,9-1       -0,9-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,30,9       10,9       10,9       10,9       1c)c)µµµLEGENDALEGENDALEGENDANSNSNSZZZPSPSPSPMPMPMPBPBPBNBNBNBNB: Negative Big (Muito Negativo)NB: Negative Big (Muito Negativo)NB: Negative Big (Muito Negativo)NS: Negative Small (Pouco Negativo)NS: Negative Small (Pouco Negativo)NS: Negative Small (Pouco Negativo)Z: ZeroZ: ZeroZ: ZeroPS: Positive Small (Pouco Positivo)PS: Positive Small (Pouco Positivo)PS: Positive Small (Pouco Positivo)PM: Positive Medium (Positivo Médio)PM: Positive Medium (Positivo Médio)PM: Positive Medium (Positivo Médio)PB: Positive Big (Muito Positivo)PB: Positive Big (Muito Positivo)PB: Positive Big (Muito Positivo) -1--1--1--0,5--0,5--0,5-0000,50,50,5111Figura A.9. Conjuntos Nebulosos para o controlador FPID. a) Variáveis de entrada (x, ix, cx). b) Variação da constante KP, ∆P. c) Variação da constante KI, ∆I. 
 Tabela A.3. Base de regras do controlador supervisor FPI com derivada Variação do Erro  Variação do Erro Pf If NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z 1.0  1.0  3.0  3.0  3.0 
PS  1.0  1.0  5.0  4.0  3.0 
PB  1.0  1.0  3.0  3.0  3.0 
NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z 4.0  4.0  4.0  4.0  4.0 
PS  7.0  6.5  5.5  5.0  4.0 
PB  4.0  4.0  4.0  4.0  4.0 
  orrorrEE2.4  CONTROLE FPD 0P0P++P∆ +P∆ +PKfPPKfPeeeK xeK x11rrPPOOÃÃÇÇAACCFFZZZZUUFFEEDDBASE BASE ||||OOÃÃÇÇAACCFFZZZZUUFFIIDEDEIIII0D0D++IID∆ +D∆ +PKfDPKfDREGRASREGRAScececxcx11rrDDceKceK|||| Figura A.10. Diagrama de blocos do controlador FPD. 
 108 a)a)µµb)b)µµµNBNBNBNBNS Z PSNS Z PSNS Z PSNS Z PSPBPBPBPBNSNSNSZZZPSPSPSPMPMPMPBPBPBNBNBNB-1       -0.9
-1       -0.9
-1       -0.9
-1       -0.9
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
0.9       10.9       10.9       10.9       1-1--1--1--0,5--0,5--0,5-0000,50,50,5111c)c)µµµµLEGENDALEGENDALEGENDAZZPSPSPBPBNBNBNB: Negative Big (Muito Negativo)NB: Negative Big (Muito Negativo)NB: Negative Big (Muito Negativo)NS: Negative Small (Pouco Negativo)NS: Negative Small (Pouco Negativo)NS: Negative Small (Pouco Negativo)Z: ZeroZ: ZeroZ: ZeroPS: Positive Small (Pouco Positivo)PS: Positive Small (Pouco Positivo)PS: Positive Small (Pouco Positivo)PM: Positive Medium (Positivo Médio)PM: Positive Medium (Positivo Médio)PM: Positive Medium (Positivo Médio)PB: Positive Big (Muito Positivo)PB: Positive Big (Muito Positivo)PB: Positive Big (Muito Positivo) -0.5
-1                   -1                   -0.5
--000.5
0.5
11Figura A.11. Conjuntos Nebulosos para o controlador FPD. a) Variáveis de entrada (x, ix, cx). b) Variação da constante KP, ∆P. c) Variação da constante KD, ∆D. 
 Tabela A.4. Base de regras do controlador supervisor FPD Variação do Erro  Variação do Erro Pf Df NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z 4.0  4.0  4.0  4.0  4.0 
PS  7.0  7.0  7.0  5.0  4.0 
PB  4.0  4.0  4.0  4.0  4.0 
NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z 1.0  1.0  5.0  4.0  3.0 
PS  1.0  1.0  4.0  3.0  3.0 
PB  1.0  1.0  3.0  3.0  3.0 
  orrorrEE3  RESULTADOS COMPUTACIONAIS As  simulações  levaram  em  consideração  uma  partida  do  sistema  com  o  nível  do reservatório  em  seu  valor  mínimo  de  forma  a  avaliar  o  desempenho  em  um  caso  crítico  e  com leitura  real  abaixo  da  referência.  Esta  situação  permite  avaliar  a  resposta  do  sistema  no enchimento,  que  é  mais  crítico  que  o  esvaziamento,  uma  vez  que  a  bomba  deve  ser  acionada apenas  após  estar  submersa,  sendo  estritamente  necessário  um  comportamento  controlado.  A referência  de  nível  para  o  sistema  foi  de  30  metros  e  as  simulações  foram  realizadas  com  o sistema  supervisório  e  sem  este  para  efeito  de  comparação  e  mensuração  da  melhoria  no desempenho. 
A  situação  crítica  imposta  permite  a  avaliação  da  resposta  em  regime  transiente  e  seu estacionamento  após  este  período.  Este  efeito  está  reproduzido  na  Figura  A.12,  onde  é apresentada  a  resposta  do  sistema  com  o  controlador  PID  puro  contra  a  resposta  com  o  109 controlador FPID. Além da resposta do sistema, está sendo avaliado o sinal de controle que gerou a dada resposta. 
Comparativo do NívelComparativo do Nível3535]]mm3030[[  llN com PIDN com PIDN com PIDN com FuzzyN com FuzzyN com FuzzyeevvNNíí252500500500100010001500150020002000250025003000300035003500400040004500450050005000Tempo [s]Tempo [s]Comparativo do Sinal de ControleComparativo do Sinal de Controle62626060585856565454525250504848]]zzHH[[  aaiiccnnêêüüqqeerrFFu com PIDu com PIDu com PIDu com Fuzzyu com Fuzzyu com Fuzzy00500500100010001500150020002000250025003000300035003500400040004500450050005000Tempo [s]Tempo [s] Figura A.12. Comparativo da resposta e do sinal de controle entre o PID e o FPID. 
Conforme apresentado na Figura A.12, nota-se uma melhoria significativa no sobresinal e no  tempo  de  estabilização  do  sistema,  tão  embora  o  sinal  de  controle  seja  muito  similar. 
Considerando que o supervisor Fuzzy aumenta a constante D em torno do zero, é natural que a resposta possua menor sobresinal, dado que o amortecimento foi aumentado. Entretanto, há erro estacionário  no  sistema,  causado  pela  saturação  do  efeito  integral  em  valores  negativos  muito altos. Ambos estes efeitos podem ser observados na Figura A.13, que apresenta o comportamento das constantes ao longo da simulação, bem como a decomposição do sinal de controle entre as contribuições individuais de cada constante. 
Através da análise da Figura A.13, é possível afirmar que no sistema com controle PID, o sinal integral foi saturado na saída do controlador, gerando o atraso na resposta em acompanhar o setpoint, e consequentemente os piores requisitos de desempenho. No sistema FPID, a constante I foi anulada, não contribuindo negativamente para o desempenho, uma evidência de melhoria no sistema. 
 110 Sinal de controle ProporcionalSinal de controle ProporcionalSinal de controle IntegralSinal de controle IntegralSinal de controle DerivativoSinal de controle Derivativo50502266uDcom PIDuDcom PIDuDcom PIDcom FPIDuucom FPIDucom FPIDDDD005500-2-2uI com PIDuI com PIDuI com PIDcom FPIDuucom FPIDucom FPIDIII44PPooããççuubbiirrtt-50-50DDooããççuubbiirrtt-4-4II      ooããççuubbiirrtt33-6-6-100-100iiiiii-8-822-150-150-10-10nnooCCnnooCCnnooCC11-12-12-200-20000uPcom PIDuPcom PIDuPcom PIDuPcom FPIDuPcom FPIDuPcom FPID-14-14-250-250-1-1-16-16-300-300-18-18-2-2001000 2000 3000 4000 50001000 2000 3000 4000 5000001000 2000 3000 4000 50001000 2000 3000 4000 5000001000 2000 3000 4000 50001000 2000 3000 4000 5000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Variação da constante PVariação da constante PVariação da constante IVariação da constante IVariação da constante DVariação da constante D-4-4x 10x 101414200200121218018012121010160160101014014088I com PIDI com PIDI com PIDI com FPIDI com FPIDI com FPIDPPKKeedd  rrooaaVVDDKKeedd  rrooaaVVIIKKeedd  rrooaaVV88120120      666610010044llll8080ll44606022224040P com PIDP com PIDP com PIDP com FPIDP com FPIDP com FPIDD com PIDD com PIDD com PIDD com FPIDD com FPIDD com FPID00002020-2-2-2-200001000 2000 3000 4000 50001000 2000 3000 4000 5000001000 2000 3000 4000 50001000 2000 3000 4000 5000001000 2000 3000 4000 50001000 2000 3000 4000 5000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura A.13. Sinal de controle e comportamento das constantes entre o PID e o FPID. 
Para as variações no controle PID, foram realizadas também simulações, que apresentaram um comportamento das constantes e sua composição no sinal de controle muito parecidas com as do controle PID completo. O desempenho, no entanto, mostrou-se diferente no caso do controle PD e do PI com derivada, que não possuem a entrada integral. E embora essa característica tenha imprimido  uma  diferença  de  sobresinal  menor  e  pouco  perceptível  no  caso  do  controle  PD,  o sinal de controle apresentado foi bastante parecido. Tais efeitos são observados na Figura A.14, que apresenta a resposta comparativa entre PD e FPD. 
Neste caso do controle  FPD, os conjuntos nebulosos tiveram de ser refinados muito mais que  o  dos  outros  arranjos,  de  forma  a  proporcionar  uma  resposta  com  desempenho  mais significativo. Além disso, houve um reforço de sinal na base de  regras, que permitiu o sistema agir um pouco antes  e ter uma leve melhoria de desempenho. É possível, no entanto, utilizar a mesma abordagem para os outros supervisores, refinando as bases e melhorando o controle, pois essa metodologia é comumente aplicada em lógica Fuzzy. 
 111 Comparativo do NívelComparativo do Nível3535]]mm3030[[  lleevvííNNN com PDN com PDN com PDN com FuzzyN com FuzzyN com Fuzzy252500200200400400600600800800100010001200120014001400160016001800180020002000Tempo [s]Tempo [s]Comparativo do Sinal de ControleComparativo do Sinal de Controle62626060585856565454525250504848]]zzHH[[  aaiiccnnêêüüqqeerrFFu com PDu com PDu com PDu com Fuzzyu com Fuzzyu com Fuzzy00200200400400600600800800100010001200120014001400160016001800180020002000 Tempo [s]Tempo [s]Figura A.14. Comparativo da resposta e do sinal de controle entre o PD e o FPD. 
Já  no  caso  do  controle  PI  com  derivada  a  diferença  foi  bastante  expressiva.  Esta configuração  apresentou  um  desempenho  completamente  diferente  das  outras,  parecendo  ser  a mais adequada, uma vez que não apresentou sobresinal e que suavizou a resposta do sistema. A 
resposta apresentou ainda uma atuação preditiva sobre o nível, antes que este atingisse o valor de referência. No entanto, o supervisor aumentou o tempo de estabilização, como é visível na Figura A.15.  Isso  pode  ser  resolvido  com  o  refinamento  dos  conjuntos  nebulosos,  conforme  realizado para o controle FPD. 
 112 Comparativo do NívelComparativo do Nível3535]]mm3030[[  llN com PIN com PIN com PIN com FuzzyN com FuzzyN com FuzzyeevvNNíí252500200200400400600600800800100010001200120014001400160016001800180020002000Tempo [s]Tempo [s]Comparativo do Sinal de ControleComparativo do Sinal de Controle62626060585856565454525250504848]]zzHH[[  aaiiccnnêêüüqqeerrFFu com PIu com PIu com PIu com Fuzzyu com Fuzzyu com Fuzzy00200200400400600600800800100010001200120014001400160016001800180020002000 Tempo [s]Tempo [s]Figura A.15. Comparativo da resposta e do sinal de controle entre o PI com derivada e o FPI com derivada. 
Comparativo do NívelComparativo do Nível3535]]mm3030[[  llN com PIN com PIN com PIN com FuzzyN com FuzzyN com FuzzyeevvNNíí252500200200400400600600800800100010001200120014001400160016001800180020002000Tempo [s]Tempo [s]Comparativo do Sinal de ControleComparativo do Sinal de Controle62626060585856565454525250504848]]zzHH[[  aaccnnêêüüqqeerrFFiiu com PIu com PIu com PIu com Fuzzyu com Fuzzyu com Fuzzy00200200400400600600800800100010001200120014001400160016001800180020002000Tempo [s]Tempo [s] Figura A.16. Comparativo da resposta e do sinal de controle entre o PI e o FPI. 
 113  Apêndice B  Simulação de experimentos para o controlador Histerese com Auto-ajuste             114 O controlador Histerese com Auto-ajuste, selecionado para validação experimental, passou por  uma  série  de  simulações  computacionais  de  forma  a  verificar  suas  condições  limite. 
Idealmente, as simulações deveriam ser testadas para t→∞, e então o sinal de controle deveria ser reduzido o máximo possível. Dada a impossibilidade, é necessário ao menos verificar a resposta para tempos de simulação muito grandes. Além disso, é essencial considerar que o modelo atual do  Gerador  de  Golfadas  está  super-reforçado  para  representar  o  pior  caso  de  golfadas  durante todo o tempo de simulação, o que nos permite creditar maior confiabilidade ao modelo simulado. 
Assim, aliando a condição de tempo de simulação estendido ao Gerador de Golfadas em situação crítica,  é  possível  se  ter  a  idéia  visual  de  seu  comportamento  conforme  apresentado  na  Figura B.1,  o  que  permite  entender  que  as  golfadas  simuladas  no  projeto  são  muito  mais  constantes  e repentinas do que em um caso real. 
0.018
0.018
0.016
0.016
]]ss//³³mm[[  ssaaddaaffllooGGeedd  rrooddaarreeGGooddooããzzaaVV0.014
0.014
  0.012
0.012
0.010
0.010
    0.008
0.008
0.006
0.006
000.2
0.2
0.4
0.4
0.6
0.6
0.8
0.8
111.2
1.2
1.4
1.4
1.6
1.6
1.8
1.8
22x 10x 1044Tempo [s]Tempo [s] Figura B.1. Sinal do Gerador de Golfadas para o tempo de 20000 segundos. 
Com isso, diversos experimentos foram planejados com o intuito de estabelecer a relação que  os  parâmetros  operacionais  têm  com  a  qualidade  do  sinal  de  controle  e  o  desempenho  do sistema  em  termos  de  faixa  de  variação  do  Nível.  Os  parâmetros  avaliados  se  restringiram àqueles  que  têm  maior  influência  nesta  relação,  e  podem  ser  observados  com  seus  valores  em negrito  para  cada  simulação  na  Tabela  B.1,  que  apresenta  também  os  valores  utilizados  para todas  as  outras  variáveis.  Ademais,  as  simulações  A,  B  e  C  foram  simuladas  no  período  de 20.000  segundos,  enquanto  que  a  1,  a  2  e  a  3  foram  feitas  com  o  tempo  estendido  de  100.000  115 segundos, mantendo constantes todos as variáveis cujos valores permanecem clareados em cinza na Tabela B.1. 
Tabela B.1. Planejamento dos experimentos computacionais para verificação da relação entre parâmetros, sinal de controle e resposta do sistema. 
Variáveis Simulação  Ordem n h2 N0  SP 30  30  2000  10% - 10% 30  30  4000  10% - 10% 30  var  2000  10% - 10% 30  var  4000  10% - 10% 60  var  2000  20% - 20% 60  var  2000  20% - 20% 60  var  2000  20% - 20% 60  30  2000  10% - 10% 60  30  2000  15% - 15% 60  30  2000  20% - 20% 30  30  2000  10% - 10% 30  30  2000  20% - 20% 30  30  6000  40% - 30% 30  30  4000  20% - 20% 30  30  4000  20% - 20% 30  30  6000  40% - 30% 30  30  6000  40% - 30% h1 [uNB uNS uZ uPS uPB] rsl/fsl 11 12 21 22 1 2 3 1 2 3 1 2 3 1 2 1 2  35% - 75% 35% - 75% 35% - 75% 35% - 75% 40% - 80% 40% - 80% 40% - 80% 35% - 75% 35% - 75% 40% - 80% 35% - 75% 40% - 80% 40% - 80% 40% - 80% 40% - 80% 40% - 80% 40% - 80% [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] 2% 2% 2% 2% 2% 2% 2% 2% 2% 2% 5% 5% 10% 5% 5% 10% 10% A B [60 55.5 54 52.5 48] [60 55 54 53 48] [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] [60 55 54 53 48] [60 55 54 53 48] [60 55 54 53 48] [60 56 54 52 48] [60 55 54 53 48] C 1 2 [60 55.5 54 52.5 48] 3 [60 55 54 53 48]         Os  símbolos  apresentados  na  Tabela  B.1  têm  seu  significado  e  valores  utilizados  para simulação apresentados na Tabela B.2, que explica as abreviações utilizadas para cada parâmetro.  
A transição entre regiões de operação e a janela de histerese são dadas pelos parâmetros µ1, µ2 , δ1 e δ2, conforme apresentado no Capítulo 5, onde a histerese é modelada. Na Tabela B.2, os grupos de valores variantes são agrupados sob os parâmetros µ e δ, respectivamente. 
 116 Tabela B.2. Explanação dos parâmetros de simulação. 
Abreviação Valores Significado 30 60 N0 Nível inicial fixo (30) Setpoint SP variável (var) 2000 4000 6000 Número de pontos usados no cálculo da n média da pertinência de saída do classificador 10%-10% 20%-20% 15% - 15% 40%-30% 35%-75% 40%-80% Janelas de histerese. Corresponde aos δ valores δ1 e δ2 Pertinências de transição entre regiões. 
µ Corresponde aos valores µ1 e µ2. 
[60 56 54 52 48] [60 55.5 54 52.5 
Conjunto de patamares da rotação da f bomba. Corresponde a  48] [uNB uNS uZ uPS uPB] [60 55 54 53 48] 2% 5% 10% Rampa de aceleração/desaceleração rsl/fsl (rising/falling slew rate)    1  SIMULAÇÃO A Conforme apresentado na Tabela B.1, a simulação A testou os efeitos de n na resposta do sistema,  variando-a  de  2000  para  4000  pontos  enquanto  as  outras  variáveis  se  mantiveram constantes.  As  quatro  simulações  foram  agrupadas  em  dois  conjuntos,  onde  o  primeiro, apresentado na Figura B.2, foi realizado com o setpoint constante em 30 metros, e o segundo, na Figura B.3, foi realizado com o sinal de referência variando conforme apresentado. Em cada uma das duas figuras, há duas curvas, referentes às simulações com n em 2000 e n em 4000. 
A influência do parâmetro n no sinal de controle é clara: quanto maior o número de pontos utilizados para computar o valor da pertinência média, mais lenta é sua modificação com os picos de  pertinência  instantânea,  e  portanto  mais  tempo  o  patamar  de  velocidade  da  bomba  será mantido,  e  menor  a  quantidade  de  transições  de  velocidade.  Dessa  forma,  espera-se  poder maximizar o valor de n para simulações reais, sendo limitado apenas pela constante de tempo do sistema, pois um valor muito alto de n pode atrasar uma resposta necessária de correção de nível. 
Este  efeito  de  atraso  da  resposta  e  conseqüente  menor  tempo  de  reação  também  é  perceptível, embora mais suavemente, na Figura B.2 e na Figura B.3. 
 117 Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040N p/ n=2000N p/ n=2000N p/ n=2000N p/ n=2000N p/ n=4000N p/ n=4000N p/ n=4000N p/ n=4000SP NívelSP NívelSP NívelSP Nível3535353535]]]]mmmm[[[[    llll3030303030eeeevvvvNNNNíííí2525252525202020202000000200020002000200020004000400040004000400060006000600060006000800080008000800080001000010000100001000010000Tempo [s]Tempo [s]Tempo [s]Tempo [s]12000120001200012000120001400014000140001400014000160001600016000160001600018000180001800018000180002000020000200002000020000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba62626262626060606060p/ n=2000ffffp/ n=2000p/ n=2000p/ n=2000refrefrefreff ref p/ n=4000f ref p/ n=4000f ref p/ n=4000f ref p/ n=4000]]]]zzzzHHHH5858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656iiii545454545452525252525050505050484848484800000200020002000200020004000400040004000400060006000600060006000800080008000800080001000010000100001000010000Tempo [s]Tempo [s]Tempo [s]Tempo [s]12000120001200012000120001400014000140001400014000160001600016000160001600018000180001800018000180002000020000200002000020000 Figura B.2. Simulação A, teste de n, apresentando as curvas A11 e A12. 
Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040N p/ n=2000N p/ n=2000N p/ n=2000N p/ n=2000N p/ n=4000N p/ n=4000N p/ n=4000N p/ n=4000SP NívelSP NívelSP NívelSP Nível3535353535]]]]mmmm[[[[    llll3030303030eeeevvvvNNNNíííí2525252525202020202000000200020002000200020004000400040004000400060006000600060006000800080008000800080001000010000100001000010000Tempo [s]Tempo [s]Tempo [s]Tempo [s]12000120001200012000120001400014000140001400014000160001600016000160001600018000180001800018000180002000020000200002000020000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba62626262626060606060fp/ n=2000fffp/ n=2000p/ n=2000p/ n=2000refrefrefreff ref p/ n=4000f ref p/ n=4000f ref p/ n=4000f ref p/ n=4000]]]]zzzzHHHH5858585858[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656545454545452525252525050505050484848484800000200020002000200020004000400040004000400060006000600060006000800080008000800080001000010000100001000010000Tempo [s]Tempo [s]Tempo [s]Tempo [s]12000120001200012000120001400014000140001400014000160001600016000160001600018000180001800018000180002000020000200002000020000 Figura B.3. Simulação A, teste de n, apresentando as curvas A21 e A22. 
 118 Com o tempo de amostragem de 0,1 segundo, o valor de 4000 pontos usa os últimos 400 segundos para realizar a média da pertinência. No sistema real, espera-se que a configuração de n seja tão maior quanto o histórico de variação do Nível permita concluir sobre o nível corrente e tão pequeno quanto seja suficiente para um tempo de reação efetivo. 
2  SIMULAÇÃO B A influência dos patamares de velocidade também é bastante relevante. As três simulações realizadas  apresentaram  variação  no  valor  da  velocidade  alta  e  baixa  para  todos  os  outros parâmetros  constantes,  e  foram  plotadas  juntas  na  Figura  B.4.  Nesta  figura,  a  legenda  faz referência à diferença de magnitude entre a velocidade intermediária e a alta ou baixa, de forma que, por exemplo, a curva B1 indexada na Tabela B.1 como tendo os patamares [60 56 54 52 48], é  apresentada  na  Figura  B.4  como  2  Hz,  já  que  entre  os  patamares  56  e  54  Hz  há  2  Hz  de diferença. 
Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040N 2 HzN 2 HzN 2 HzN 2 HzN 1.5 HzN 1.5 HzN 1.5 HzN 1.5 HzN 1 HzN 1 HzN 1 HzN 1 HzSP NívelSP NívelSP NívelSP Nível3535353535]]]]mmmm[[[[    lllleeeevvvvííííNNNN30303030302525252525202020202000000200020002000200020004000400040004000400060006000600060006000800080008000800080001000010000100001000010000Tempo [s]Tempo [s]Tempo [s]Tempo [s]12000120001200012000120001400014000140001400014000160001600016000160001600018000180001800018000180002000020000200002000020000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba626262626260606060602 Hz2 Hz2 Hz2 Hz1.5 Hz1.5 Hz1.5 Hz1.5 Hzffffrefrefrefrefffffrefrefrefreffref 1 Hzfref 1 Hzfref 1 Hzfref 1 Hz]]]]zzzzHHHH5858585858[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656545454545452525252525050505050484848484800000200020002000200020004000400040004000400060006000600060006000800080008000800080001000010000100001000010000Tempo [s]Tempo [s]Tempo [s]Tempo [s]12000120001200012000120001400014000140001400014000160001600016000160001600018000180001800018000180002000020000200002000020000 Figura B.4. Simulação B, teste de f, apresentando as curvas B1, B2 e B3. 
A  divisão  entre  os  patamares  de  velocidade  no  sinal  de  controle  é  clara,  já  que  as amplitudes são diferentes. No entanto, o parâmetro f não influencia no sinal de Nível, uma vez que a energia de controle é a mesma nos três casos, já que as áreas compensam sua diferença de  119 magnitude  com  períodos  diferentes,  implicando  em  melhor  sinal  de  controle  para  variações menores da velocidade de acionamento da bomba. Curiosamente, a quantidade de acionamentos do  patamar  é  a  mesma  para  os  três  casos,  o  que  é  lógico  uma  vez  que  o  sinal  de  resposta  do sistema é o mesmo. 
3  SIMULAÇÃO C A  última  das  simulações  para  o  período  de  20.000  segundos  é  o  teste  dos  valores  e  das janelas de histerese, genericamente agrupados e chamados de parâmetro  h. O valor apresentado na  legenda  para  cada  curva,  de  10%,  15%  e  20%  para  as  simulações  C1,  C2  e  C3 respectivamente, representa a janela de histerese δ. 
Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)40404040C1: h=10%C1: h=10%C1: h=10%C2: h=15%C2: h=15%C2: h=15%C3: h=20%C3: h=20%C3: h=20%SP NívelSP NívelSP Nível35353535]]]mmm[[[   lll30303030eeevvvNNNííí25252525202020200000200020002000200040004000400040006000600060006000800080008000800010000100001000010000Tempo [s]Tempo [s]Tempo [s]1200012000120001200014000140001400014000160001600016000160001800018000180001800020000200002000020000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba6262626260606060C1: h=10%C1: h=10%C1: h=10%C2: h=15%C2: h=15%C2: h=15%C3: h=20%C3: h=20%C3: h=20%]]]zzzHHH58585858[[[   aaacccnnnêêêüüüqqqeeerrrFFF56565656iii545454545252525250505050484848480000200020002000200040004000400040006000600060006000800080008000800010000100001000010000Tempo [s]Tempo [s]Tempo [s]1200012000120001200014000140001400014000160001600016000160001800018000180001800020000200002000020000 Figura B.5. Simulação C, teste de h, apresentando as curvas C1, C2 e C3. 
Curiosamente,  a  variação  isolada  do  parâmetro  h  –  ou  seja,  dos  parâmetros  µ  e  δ  –  não causou  modificações  muito  perceptíveis  nem  no  sinal  de  controle  tanto  quanto  na  resposta  do Nível. Podem-se notar os sinais caminhando muito próximos, e a quantidade de acionamentos do sinal de controle, igual – ou muito parecido – para os três. Isso pode se dever ao fato de que ao acionar um patamar de velocidade diferente, a variação imposta na resposta seja muito sensível,  120 fazendo-o  retornar  muito  rápido  para  a  faixa  de  trabalho  desejada.  Assim  sendo,  é  interessante que  maiores  faixas  de  histerese  sejam  testadas,  aliadas  também  a  efeitos  causados  por  outras variáveis  que  retardem  o  processo  de  retorno  do  nível  à  faixa  desejada,  como  os  dois  efeitos observados anteriormente. Assim sendo, este teste foi efetuado com maior cuidado na Simulação 1, onde pôde-se verificar uma correlação mais clara entre o parâmetro h e a qualidade do sinal de controle. 
4  SIMULAÇÃO 1 As  simulações  com  o  tempo  estendido  para  100.000  segundos  permitem  extrapolar  a dimensão  tomada  nas  avaliações  anteriores,  de  5.000  e  20.000  segundos,  pois  permitem  se  ter uma  idéia  do  funcionamento  da  bomba  ao  longo  de  mais  de  um  dia  inteiro.  Essa  perspectiva permite  entender  a  importância  da  minimização  das  pequenas  alterações  de  patamar  em quantidade e em duração, e qual a influência destas no processo de utilização da BCS. Para se ter uma  idéia  desta  diferença,  pode-se  analisar  a  Figura  B.6,  que  apresenta  a  simulação  1.1,  cujos parâmetros  são  muito  parecidos  com  os  da  simulação  A11,  apresentada  na  Figura  B.2  com n=2000. A diferença está na rampa de aceleração, que passa de 2% para 5%, e no parâmetro f, com  patamares  em  55  Hz  e  53  Hz  em  vez  de  56  Hz  e  52  Hz,  o  que  provoca  um  aumento  na duração dos patamares e uma manutenção de sua quantidade, conforme concluído na simulação B. 
 121 Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040NNNNSP NívelSP NívelSP NívelSP Nível3535353535]]]]mmmm[[[[    llll3030303030eeeevvvvNNNNíííí252525252520202020200000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba6262626262f reff reff reff ref6060606060]]]]zzzzHHHH5858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656iiii54545454545252525252505050505048484848480000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000 Figura B.6. Simulação 1, teste de h, apresentando a curva 1.1. 
Para o período de 20.000 segundos, os oito acionamentos de patamar baixo de velocidade refletem  em  algo  em  torno  de  40  acionamentos  para  o  tempo  de  100.000  segundos,  o  que representa  40  modificações  na  rotação  da  BCS  a  cada  dia  de  operação.  Como  o  objetivo  do controlador é reduzir a quantidade e aumentar a duração desses acionamentos, identifica-se aqui um grande potencial de melhoria através da manipulação das variáveis de configuração. 
Dando andamento à simulação 1, foram tomadas três medidas para evidenciar a relação do parâmetro  de  teste  –  a  histerese  –  com  as  saídas  desejadas  –  o  sinal  de  controle  e  o comportamento  do  nível.  A  primeira  foi  a  extensão  do  tempo  de  simulação,  o  que,  como  já discutido, permite avaliar melhor a qualidade do sinal de controle. A segunda foi a utilização de um  valor  mais  radical  para  a  janela  de  histerese,  o  que  é  possível  notar  pela  Tabela  B.1,  que apresenta as janelas de 10%, 20% e 40% para as simulações 1.1, 1.2 e 1.3 respectivamente. Esta configuração é condizente com a conclusão tomada na Simulação C. Finalmente, a última medida foi  a  redução  da  variação  dos  patamares  de  velocidade,  que  passaram  de  [60  56  54  52  48]  na simulação  C  para  [60  55  54  53  48]  nesta  simulação,  de  forma  a  permitir  que  a  variação  de  122 pertinência seja menor após acionar outra velocidade na bomba, e daí uma transição mais lenta para as três simulações realizadas. 
Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040NNNNSP NívelSP NívelSP NívelSP Nível3535353535]]]]mmmm[[[[    llll3030303030eeeevvvvNNNNíííí252525252520202020200000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba6262626262f reff reff reff ref6060606060]]]]zzzzHHHH5858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656iiii54545454545252525252505050505048484848480000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000 Figura B.7. Simulação 1, teste de h, apresentando a curva 1.2. 
A  Figura  B.7  apresenta  a  simulação  para  a  curva  1.2,  onde  foi  utilizada  a  janela  de  20% para a histerese. Diferentemente do ocorrido na outra bateria de testes, aqui já é perceptível que ao  aumentar  a  janela  de  histerese,  a  quantidade  de  disparos  da  rotação  é  reduzida,  pois  para pertinência retornar ao valor anterior toma-se mais tempo. Ainda assim, haveria por volta de 30 mudanças diárias na BCS. 
A  apresentação  das  três  curvas  em  gráficos  separados  mostrou-se  necessária  nesta simulação por efeito dos pequenos períodos de permanência dos patamares no sinal de controle. 
Além disso, com as curvas separadas, é possível tomar as comparações com as outras simulações de  forma  mais  clara.  Dessa  forma,  a  última  das  curvas  é  apresentada  na  Figura  B.8,  onde  os parâmetros  de  simulação  foram  alterados  para  valores  críticos.  A  intenção  desta  era  poder calibrar  o  controlador  para  uma  das  melhores  condições  operacionais  possíveis,  de  forma  a continuar a análise do sinal de controle que está em curso durante a simulação 1. 
 123 Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040NNNNSP NívelSP NívelSP NívelSP Nível3535353535]]]]mmmm[[[[    llll3030303030eeeevvvvNNNNíííí252525252520202020200000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba6262626262f reff reff reff ref6060606060]]]]zzzzHHHH5858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656iiii54545454545252525252505050505048484848480000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000 Figura B.8. Simulação 1, teste de h, apresentando a curva 1.3. 
Conforme a Tabela B.1, além da alteração em f, mantida constante frente às curvas 1.1 e 1.2, mas mais estreita em relação às outras simulações, o valor de n de 6000 pontos para a curva 1.3, provê uma redução na quantidade de transições e um aumento na duração de cada patamar de velocidade. Finalmente, uma janela de 40% para as velocidades alta e baixa, e um de 30% para as rotações  críticas,  permite  configurar  o  sinal  de  controle  para  o  resultado  apresentado  na  Figura B.8. 
Com o limiar de transição de velocidade configurado para pertinência 0 quando da redução da  amplitude  da  pertinência  média,  o  nível  oscilou  muito  mais  do  que  o  apresentado  para  os outros casos, apresentando um efeito direto da manipulação da histerese – quanto maior a janela, mais oscilatório estará a variação do nível. Esse efeito é positivo dado que deseja-se que ele varie dentro da faixa onde se  é possível controlar, ficando o máximo possível dentro desta região de variação. 
Da mesma forma, esta variação se refletiu na qualidade do sinal de controle, uma vez que a oscilação do nível era no sentido oposto do anterior à alteração do patamar, resultando num total de por volta de 10 transições de velocidade para  um dia inteiro de trabalho da bomba, ou seja,  124 uma média de uma alteração a cada 2 horas  e meia de trabalho. Percebe-se, por conseguinte, a necessidade de se fixar janelas grandes para a histerese, que permitam manipular as oscilações da variação da média no sentido desejado. 
5  SIMULAÇÃO 2 A simulação 2 testa a influência do parâmetro f utilizando uma janela de histerese maior, de 20%, e um n também maior, de 4000 pontos. Como a relação de f já foi testada na simulação B, e consolidada  através  da  comparação  da  simulação  1  com  a  C,  já  se  sabe  a  conclusão  a  tirar.  A diferença é que é possível analisar como os outros parâmetros se relacionam com os patamares de velocidade. 
Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040NNNNNNNNNNSP NívelSP NívelSP NívelSP NívelSP Nível2 Hz2 Hz2 Hz2 Hz1 Hz1 Hz1 Hz1 Hz3535353535]]]]mmmm[[[[    llll3030303030eeeevvvvNNNNíííí252525252520202020200000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba62626262626060606060ffffref 2 Hzref 2 Hzref 2 Hzref 2 Hzf reff reff reff ref1 Hz1 Hz1 Hz1 Hz]]]]zzzzHHHH5858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656iiii54545454545252525252505050505048484848480000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000 Figura B.9. Simulação 2, teste de f, apresentando as curvas 2.1 e 2.2. 
A Figura B.9 apresenta as curvas 2.1 e 2.2, referenciadas pela legenda como 2 hz e 1 Hz, para o período de 100.000 segundos. Novamente, os valores 2 Hz e 1 Hz representam a diferença entre o patamar de velocidade central e o adjacente. 
Conforme esperado, nota-se que com a variação do parâmetro f, quanto menor é a diferença entre patamares, maior é a permanência do sinal no patamar, tão embora o número de disparos  125 seja  igual,  pois  a  energia  de  controle  é  a  mesma.  No  entanto,  comparando  a  Figura  B.9  com  a Figura B.4 da simulação B, pode-se perceber que houve um número muito menor de transições por efeito de valor de 4000 pontos para o n. Da mesma forma, ao comparar a curva 2.1 da Figura B.9  (linha  contínua),  com  a  curva  A12  da  Figura  B.2  (linha  tracejada),  para  as  quais  a  única diferença além do tempo de simulação é a histerese, verifica-se que a janela maior, de 20% em vez de 10%, não apresentou mudança na qualidade do sinal de controle, conforme concluído na simulação  1,  onde  percebe-se  que  apenas  uma  janela  maior  têm  influência  significativa  na simulação. 
6  SIMULAÇÃO 3 Finalmente, utilizando o valor crítico da histerese – a janela de 40% conforme a Tabela B.1 
–  e  usando  n=6000,  foi  testada  a  influência  de  uma  leve  alteração,  de  1,5  Hz  para  1  Hz,  no parâmetro f, compondo as curvas 3.1 e 3.2 na Figura B.10. 
Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040NNNNNNNNNNSP NívelSP NívelSP NívelSP NívelSP Nível1.5 Hz1.5 Hz1.5 Hz1.5 Hz1 Hz1 Hz1 Hz1 Hz3535353535]]]]mmmm[[[[    llll3030303030eeeevvvvNNNNíííí252525252520202020200000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba62626262626060606060ffffref 1.5 Hzref 1.5 Hzref 1.5 Hzref 1.5 Hzf reff reff reff ref]]]]zzzzHHHH1 Hz1 Hz1 Hz1 Hz5858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656iiii54545454545252525252505050505048484848480000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000 Figura B.10. Simulação 3, teste de f, apresentando as curvas 3.1 e 3.2. 
A curva 3.2 é idêntica à curva 1.3 apresentada na Figura B.8. Comparando-a com a curva 3.1, cujos parâmetros diferem apenas em f, de [60 55 54 53 48] na 3.2 para [60 55.5 54 52.5 48]  126 na 3.1, o efeito de aumento da duração dos patamares é perceptível, mas desta vez, a quantidade de disparos foi levemente diferente. Isso já é uma forma de expressão da janela de histerese e do valor de 4000 pontos de n, pois ambos agem sobre o cômputo de retorno do valor de pertinência média após a atuação do novo patamar de velocidade, criando uma situação onde se permanece mais  tempo  sujeito  às  influências  do  sistema.  Como  o  período  de  permanência  no  patamar aumenta, o retorno ao antigo patamar não instantâneo e uma variação na vazão de entrada pode afetar apenas o sistema que demorou mais para retornar. 
Além disso, é possível comparar a curva 3.2 com a 2.2, onde apenas a janela de histerese e o  valor  do  n  são  diferentes.  O  efeito  combinado  destas  duas  variáveis  alterou  a  quantidade  de disparos de 16 no segundo caso para 11 no primeiro ao longo de um dia inteiro de simulação. É 
uma variação bastante sensível frente a ao resultado após todos os ajustes realizados ao longo das simulações. 
7  CONCLUSÃO Os  testes  desenvolvidos  para  o  controlador  permitiram  partir  de  uma  configuração  com cerca  de  40  acionamentos  curtos  de  velocidades  diferentes  no  sinal  de  controle,  para  algo  em torno  de  apenas  10  para  1  dia  de  trabalho,  e  com  duração  maior,  o  que  está  condizente  com  a informação de campo de que cada alteração na rotação da bomba é seguida de um intervalo de 2 a  3  horas  no  procedimento  manual  com  acompanhamento  de  um  operador.  O  sistema  aqui simulado,  no  entanto,  utilizou  um  sinal  de  distúrbio  de  entrada  mais  agressivo  que  a  média encontrada  em  campo,  justamente  para  suplantar  a  desconfiança  inerente  a  um  modelo computacional. 
A robustez do sistema pode ainda ser aumentada de acordo com o comportamento previsto para  sinais  de  campo  de  vazão  de  entrada  através  do  ajuste  do  parâmetro  n,  que  pode  ser aumentado caso a constante de tempo do sistema permita - ou seja, se o tempo necessário para causar alteração significativa no nível, e consequentemente na pertinência média, for superior ao aqui simulado, de 600 segundos para n = 6000 pontos. Da mesma forma, o aumento da histerese para intervalos ainda maiores também é um recurso, tão embora este ajuste já se mostre próximo de um limite matemático dentro do universo de trabalho. Além disso, ainda há a calibração dos patamares  de  velocidade,  que  serão  necessários  para  cada  sistema,  e  passíveis  de  estudos  de vazão ideal para cada BCS. 
 127 De qualquer forma, há bastante credibilidade na flexibilidade que o controlador provê para se  ajustar  a  uma  situação  real.  É  necessário  que  haja  validação  experimental,  e  esta  pode  ser guiada pelas simulações computacionais desenvolvidas, de forma a criar uma gama de resultados passíveis de comparação e análise, tanto para refinamento do modelo, quanto para verificação do controlador. A agressividade do sistema em laboratório deve ser representada por um distúrbio de entrada, de forma que os experimentos pedem ser gradativamente reforçados para representar a situação  de  campo  ou  a  situação  computacional.  Também  é  possível  realizar  leituras experimentais,  e  usar  o  sinal  de  entrada  adquirido  em  laboratório  para  criar  situação  similar computacionalmente comparando o experimento com o simulador. 
 128  Apêndice C   Modelos computacionais utilizados no Simulink®             129 1  PLANTA  Figura C.1. Planta do controle de nível. No bloco do controle de nível, Planta Nível, fica a equação da variação do nível, Equação (3.4). No bloco da bomba, fica sua curva, Equação (3.1). 
No bloco de vazão de entrada, Qoe, fica o gerador de golfadas. 
 Figura C.2. Primeiro gerador de golfadas. 
 Figura C.3. Segundo gerador de golfadas – amplitude variável. 
 Figura C.4. Componente do segundo e terceiro gerador de golfadas – sinal em onda para gerar amplitude variável. 
 130  Figura C.5. Terceiro gerador de golfadas – amplitude e freqüência variáveis. Detalhe do gerador de sinais para teste do mecanismo de auto-ajuste. 
2  SUPERVISOR FUZZY PID  Figura C.6. Malha de controle do controlador Fuzzy PID supervisor. 
 Figura C.7. Controlador Fuzzy PID Supervisor. 
 131 3  MONITORAMENTO DA MÉDIA MÓVEL  Figura C.8. Malha de controle do controlador Monitoramento da Média Móvel. 
4  CLASSIFICADOR POR REGIÕES  Figura C.9. Malha de controle do controlador Classificador por Regiões. 
 Figura C.10. Controlador Classificador por Regiões. 
 132 5  HISTERESE COM AUTO-AJUSTE  Figura C.11. Malha de controle do controlador Histerese com Auto-ajuste. Detalhe dos geradores de sinal de referência. 
 Figura C.12. Controlador Histerese com auto-ajuste. Detalhes do classificador, da histerese, da parametrização da rotação de transição e dos filtros de saída. 
 Figura C.13. Componente do controlador Histerese com Auto-ajuste – parametrização da rotação de transição. 
 133 UNIVERSIDADE ESTADUAL DE CAMPINAS FACULDADE DE ENGENHARIA MECÂNICA DEPARTAMENTO DE ENGENHARIA DE PETRÓLEO   DISSERTAÇÃO DE MESTRADO  Desenvolvimento de Controladores Inteligentes para o Sistema VASPS  Autor: André Veras de Melo Orientador: Prof. Dr. José Ricardo P. Mendes   ____________________________________________________ Prof. Dr. José Ricardo P. Mendes Universidade Estadual de Campinas   ____________________________________________________ Dr. Valdir Estevam Petrobras   ____________________________________________________ Profa. Dra. Adriane Beatriz de Souza Serapião Universidade Estadual Paulista   ____________________________________________________ Prof. Dr. Sergio N. Bordalo Universidade Estadual de Campinas  Campinas, 17 de Novembro de 2008  ii   Agradecimentos        Agradeço à minha família pelo suporte inquestionável, incondicional, tornando a busca pelo conhecimento não apenas possível como também prazerosa. Meu profundo reconhecimento à minha mãe que tanto chorou de saudade, ao meu pai que tanto batalhou dignamente, à minha querida avozinha que tanto rezou e esplhou a bondade no mundo dos homens e ao meu irmão caçula que me manteve ligado aos melhores momentos de minha vida, residentes em minha memória eternamente. Agradeço também à Raquel, indistinguível em sua força, pelo vasto suporte emocional, pela agradável companhia e pelas lições ímpares de determinação.  
 Saúdo a Prof.ª Adriane pelo trabalho em equipe e pelo esforço realizado no auxílio à minha formação científica. Agradeço ao Prof. José Ricardo pelas oportunidades e compreensão, bem como por ter representado um melhor profissional que qualquer outro no Programa. 
 Agradeço à ANP pelo suporte financeiro. 
 Agradeço a Deus pela bela vida que me deu. 
  iii   Resumo  O  cenário  de  produção  em  campos  de  petróleo  tem  apresentado  nos  anos  recentes condições  cada  vez  mais  severas  e  complexas.  Muitas  descobertas  em  regiões  de  maior profundidade e  com formações  geológicas mais  diversas tem demandado soluções tecnológicas que beiram a fronteira do conhecimento, de forma que a produção tem andado lado a lado com o desenvolvimento de novas tecnologias. Assim, a necessidade do aumento do fator de recuperação para  justificar  os  investimentos  nestas  condições  são  desafios  presentes  nos  novos  projetos  de poços, de elevação artificial e de recuperação secundária, o que vem levando ao desenvolvimento de soluções submarinas e integradas, como o caso do separador submarino VASPS. No entanto, o controle de processos contínuos, como a vazão de produção, a temperatura e a pressão, ainda é tratado  da  mesma  forma  que  era  feito  quando  do  começo  da  produção  offshore  em  campos  de óleo leve. 
Este  trabalho  visa  permitir  a  melhoria  de  desempenho  operacional  do  sistema  VASPS, mensurada  pelos  custos  totais  gerados  pelo  sistema  e  pelos  proventos  gerados  na  produção  de óleo e gás, bem como propor novas metodologias de sistemas de controle para sistemas similares, utilizando tecnologias recentes de controle inteligente. Vale ressaltar que o problema de controle é  atualmente  tratado  em  campo  com  soluções  de  automação,  sem  o  estudo  devido,  causando danos  a  equipamentos  que  exigem  intervenções  custosas.  Os  controladores  propostos  neste trabalho  visam  minimizar  os  esforços  aos  quais  estes  atuadores  estão  expostos,  provendo  uma maior vida útil às tecnologias de elevação artificial de alta vazão e podendo ser aplicado de forma modular a outros processos relacionados. 
 Palavras Chave: Minimização  do  esforço  de  controle,  BCS,  VASPS,  Fuzzy,  Lógica  Nebulosa,  Controle Inteligente, Controle Nebuloso, Produção Submarina, Separação Submarina. 
 iv   Abstract  The oil production scenario has been becoming more and more complex and severe in the recent  years.  Plenty  discoveries  in  deeper  and  more  diversified  formations  have  been  requiring cutting  edge  technological  solutions.,  such  that  the  production  has  been  deployed  side  by  side with  the  technological  development.  Thus,  the  need  for  the  enhancement  of  the  recuperation factor in order to justify the investment in these new conditions are actual challenges within the recent design of wells, artificial lift systems and secondary recuperation projects, which has been leading  to  the  development  towards  subsea  integrated  solutions,  such  as  the  VASPS  subsea separator. However, the  control of  continuous processes, i.e. flow, temperature  and pressure, is still dealt the same way it was done when the offshore production in light oil fields began. 
This  work  envisions  the  enhancement  of  the  operational  performance  of  the  VASPS system, measured as a function of the total costs implied by the technology, altogether with the receipts generated in the gas and oil production, as well as the delivering of new methodologies for  the  design  of  controllers  using  late  technologies  of  intelligent  control.  Also,  it  is  worth recalling  that  nowadays  the  control  task  is  dealt  with  automation  solutions,  without  the  proper handling,  causing  failures  in  equipments  that  require  expensive  rig  intervention  for  workover. 
The controllers proposed in this work are designed to minimize the control effort, to which these actuators  are  exposed,  providing  extended  lifetime  to  the  high  level  production  artificial  lift technologies, being also able to be applied to other related processes in a modular form. 
 Keywords:  Minimization  of  control  effort,  ESP,  VASPS,  Fuzzy,  Intelligent  Control,  Fuzzy  Control, Sebsea Production, Subsea Separation. 
 v Sumário Lista de Figuras ..............................................................................................................................vii Lista de Tabelas................................................................................................................................x 
Nomenclatura ..................................................................................................................................xi 
Introdução..................................................................................................................................1 
1 Organização do Trabalho .........................................................................................2 
2  Panorama Tecnológico ..............................................................................................................4 
Sistemas de Produção Offshore................................................................................4 
Sistema VASPS........................................................................................................7 
3  Modelagem ..............................................................................................................................12 
Escoamento ............................................................................................................12 
Escoamento de entrada...................................................................................12 
Escoamento interno ao vaso...........................................................................14 
Elevação Artificial usando BCS.............................................................................16 
Equacionamento do Sistema VASPS.....................................................................19 
4  Fundamentos Teóricos.............................................................................................................22 
Introdução à Teoria de Conjuntos Nebulosos ........................................................22 
Nebulização....................................................................................................23 
Base de Regras do tipo Mamdani...................................................................28 
Desnebulização para sistemas Mamdani........................................................34 
Sistemas do tipo Sugeno ................................................................................37 
Introdução à Teoria de Controle.............................................................................38 
Controle PID ..................................................................................................43 
Controle Nebuloso..........................................................................................44 
5  Metodologia.............................................................................................................................47 
Controle voltado ao Desempenho ..........................................................................47 
Controle Híbrido Fuzzy-PID..........................................................................48 
Controle voltado à Minimização do Esforço..........................................................57 
Monitoramento da Média Móvel....................................................................58 
Classificador de Regiões ................................................................................62 
Classificador com Média................................................................................64 
Histerese com Auto-ajuste .............................................................................68 
6  Resultados................................................................................................................................73 
Solução pelo Desempenho .....................................................................................73 
Fuzzy-PID ......................................................................................................73 
Soluções pelo Esforço de Controle ........................................................................76 
Monitoramento da Média Móvel....................................................................76 
Classificador por Regiões...............................................................................79 
Classificador com Média................................................................................81 
Histerese com Auto-ajuste .............................................................................84 
Avaliação de resultados..................................................................................92 
7  Conclusões...............................................................................................................................95 
Referências Biblográficas ..............................................................................................................99 
Apêndice A...................................................................................................................................103 Apêndice B...................................................................................................................................114 Apêndice C...................................................................................................................................129 1.1 
2.1 
2.2 
3.1 
3.1.1 
3.1.2 
3.2 
3.3 
4.1 
4.1.1 
4.1.2 
4.1.3 
4.1.4 
4.2 
4.2.1 
4.2.2 
5.1 
5.1.1 
5.2 
5.2.1 
5.2.2 
5.2.3 
5.2.4 
6.1 
6.1.1 
6.2 
6.2.1 
6.2.2 
6.2.3 
6.2.4 
6.2.5 
 vi Relação de Figuras Figura 2.1: Representação da instalação do VASPS no sistema de produção (fora de escala). ......7 
Figura 2.2. Diagrama esquemático do sistema VASPS. ..................................................................8 
 Figura  3.1.  Modelo  preliminar  da  vazão  de  entrada  de  líquido  do  Gerador  de  Golfadas (comunicação direta, Teixeira, 2006).............................................................................................13 
Figura 3.2. Comparativo entre o segundo e terceiro geradores de golfada. ...................................14 
Figura 3.3. Esquemático do escoamento das fases líquido e gás no VASPS.................................15 
Figura 3.4. Exemplo de curvas de bomba BCS para diferentes freqüências de acionamento. ......17 
Figura  3.5.  Curvas  da  bomba  BCS  do  VASPS  para  diferentes  freqüências  de  acionamento (comunicação direta, Teixeira, 2006).............................................................................................18 
Figura 3.6. Modelo para a curva da bomba BCS (comunicação direta, Teixeira, 2006). ..............19 
 Figura 4.1 Sistema nebuloso genérico, adaptado de Riid (2002)...................................................23 
Figura 4.2. Exemplo de três possíveis funções de pertinência para o conjunto nebuloso Baixo. ..24 
Figura 4.3. Representação da variável nebulosa Nível da Piscina.................................................25 
Figura 4.4. Representação da variável nebulosa Variação do Nível da Piscina............................26 
Figura 4.5. Nebulização da variável de entrada Nível da Piscina..................................................27 
Figura 4.6. Nebulização da variável de entrada Variação do Nível da Piscina.............................27 
Figura 4.7. Representação da variável de saída ativada pelas entradas exemplificadas. ...............30 
Figura 4.8. Representação da aplicação da Base de Regras para uma entrada dada......................31 
Figura 4.9. Processo de conversão de variáveis exemplo do VASPS para o domínio nebuloso. ..34 
Figura 4.10. Técnicas de desnebulização aplicadas ao exemplo, com o valor de saída destacado.
........................................................................................................................................................36 
Figura 4.11. Representação de um sistema em malha aberta.........................................................38 
Figura 4.12. Diagrama de blocos para um sistema em malha fechada. .........................................39 
Figura 4.13. Diagrama de blocos com o detalhamento da planta do sistema VASPS. ..................42 
Figura 4.14. Sinal de resposta com o destaque dos parâmetros de desempenho. ..........................42 
Figura 4.15. Diagrama esquemático de controle PID convencional. .............................................43 
Figura 4.16. Processo controlador por sistema nebuloso com entradas Erro e Derivada do Erro. 45 Figura 4.17. Exemplo de aplicação de sistema com controle nebuloso.........................................46 
 Figura 5.1. Diagrama de Blocos do Controlador PID. ...................................................................49 
Figura  5.2.  Diagrama  de  blocos  do  controlador  Supervisório,  adaptado  de  Van  Nauta  Lemke  e De-Zhao (1985). .............................................................................................................................50 
Figura 5.3. Detalhamento do controlador FPID do Modelo Supervisório. ....................................51 
Figura 5.4. Diagrama de blocos do controlador FPID. ..................................................................51 
Figura 5.4. Conjuntos nebulosos para o controlador FPID. ...........................................................53 
Figura 5.6. Comportamento desejado para o sistema voltado à redução do esforço de controle. .58 
Figura 5.7. Diagrama de blocos para o controlador Média Móvel aplicado ao VASPS................59 
Figura 5.8. Funções de pertinência para o controlador Média Móvel aplicado ao VASPS...........60 
Figura 5.6. Ilustração da função utilizada pelo Classificador. .......................................................62 
Figura  5.10.  Diagrama  de  blocos  para  o  controlador  Classificador  de  Regiões  aplicado  ao VASPS. ..........................................................................................................................................63 
Figura 5.6. Conjuntos nebulosos de entrada para o Classificador de Regiões...............................63 
 vii Figura 5.12. Diagrama de blocos para o controlador Classificador com Média. ...........................65 
Figura 5.13. Funções de pertinência para o controlador Classificador com Média. ......................66 
Figura 5.14. Detalhamento do filtro de sinal aplicado entre o controlador e o atuador. ................67 
Figura 5.15. Diagrama de blocos do controlador Histerese com Auto-ajuste................................68 
Figura 5.16. Esquemático ilustrativo do comportamento da histerese...........................................70 
Figura 5.17. Diagrama esquemático do controlador Histerese com Auto-ajuste...........................72 
 Figura 6.1. Comparativo da resposta e do sinal de controle entre o PID e o FPID........................74 
Figura 6.2. Sinal de controle e comportamento das constantes entre o PID e o FPID...................75 
Figura 6.3. Curvas de resposta para o controlador Média Móvel, com nível inicial em 30 metros.
........................................................................................................................................................78 
Figura 6.4. Curvas de resposta para o controlador Média Móvel, com nível inicial em 60 metros.
........................................................................................................................................................79 
Figura 6.5. Resposta para o Classificador por Regiões para o nível inicial de 30 metros. ............80 
Figura 6.6. Resposta para o Classificador por Regiões para o nível inicial de 60 metros. ............81 
Figura  6.7.  Resposta  e  Sinal  de  Controle  para  controlador  Classificador  com  Média,  com referência constante........................................................................................................................82 
Figura  6.8.  Resposta  e  Sinal  de  Controle  para  controlador  Classificador  com  Média,  com referência variável. .........................................................................................................................83 
Figura 6.9. Resposta e Sinal de Controle para controlador Classificador com Média, com o último gerador de golfadas, de freqüência e amplitude variáveis. ............................................................84 
Figura 6.10. Esquemático da histerese adaptado para o caso VASPS. ..........................................85 
Figura 6.11. Resposta para o controlador Histerese com Auto-ajuste, com referência constante. 86 Figura 6.12. Resposta para o controlador Histerese com Auto-ajuste, com referência variável. ..87 
Figura 6.13. Simulação 3, teste de uZ, apresentando as curvas 3.1 e 3.2. ......................................89 
Figura 6.14. Curvas para as simulações de teste do mecanismo de auto-ajuste. ...........................91 
 Figura A.1. Diagrama de Blocos do Controlador PI. ...................................................................104 Figura A.2. Diagrama de Blocos do Controlador PI com derivada. ............................................104 Figura A.3. Diagrama de Blocos do Controlador PD. .................................................................105 Figura A.4. Diagrama de blocos do controlador FPID. ...............................................................105 Figura A.5. Conjuntos Nebulosos para o controlador FPID. a) Variáveis de entrada (x, ix, cx). b) Variação da constante KP, ∆P. c) Variação das constantes KI e KD, ∆I e ∆D. ..........................106 Figura A.6. Diagrama de blocos do controlador FPI. ..................................................................106 Figura A.7. Conjuntos Nebulosos para o controlador FPI. a) Erro relativo, x. b) Integral relativa do erro, ix.. c) Variação da constante KP, ∆P. d) Variação da constante KI, ∆I. ........................107 Figura A.8. Diagrama de blocos do controlador FPI com derivada.............................................107 Figura A.9. Conjuntos Nebulosos para o controlador FPID. a) Variáveis de entrada (x, ix, cx). b) Variação da constante KP, ∆P. c) Variação da constante KI, ∆I. ................................................108 Figura A.10. Diagrama de blocos do controlador FPD................................................................108 Figura A.11. Conjuntos Nebulosos para o controlador FPD. a) Variáveis de entrada (x, ix, cx). b) Variação da constante KP, ∆P. c) Variação da constante KD, ∆D. .............................................109 Figura A.12. Comparativo da resposta e do sinal de controle entre o PID e o FPID...................110 Figura A.13. Sinal de controle e comportamento das constantes entre o PID e o FPID..............111 Figura A.14. Comparativo da resposta e do sinal de controle entre o PD e o FPD. ....................112 Figura A.15. Comparativo da resposta e do sinal de controle entre o PI com derivada e o FPI com derivada. .......................................................................................................................................113  viii Figura A.16. Comparativo da resposta e do sinal de controle entre o PI e o FPI. .......................113  Figura B.1. Sinal do Gerador de Golfadas para o tempo de 20000 segundos..............................115 Figura B.2. Simulação A, teste de n, apresentando as curvas A11 e A12. ..................................118 Figura B.3. Simulação A, teste de n, apresentando as curvas A21 e A22. ..................................118 Figura B.4. Simulação B, teste de f, apresentando as curvas B1, B2 e B3. .................................119 Figura B.5. Simulação C, teste de h, apresentando as curvas C1, C2 e C3. ................................120 Figura B.6. Simulação 1, teste de h, apresentando a curva 1.1. ...................................................122 Figura B.7. Simulação 1, teste de h, apresentando a curva 1.2. ...................................................123 Figura B.8. Simulação 1, teste de h, apresentando a curva 1.3. ...................................................124 Figura B.9. Simulação 2, teste de f, apresentando as curvas 2.1 e 2.2. ........................................125 Figura B.10. Simulação 3, teste de f, apresentando as curvas 3.1 e 3.2. ......................................126  Figura  C.1.  Planta  do  controle  de  nível.  No  bloco  do  controle  de  nível,  Planta  Nível,  fica  a equação da variação do nível, Equação (3.4). No bloco da bomba, fica sua curva, Equação (3.1). 
No bloco de vazão de entrada, Qoe, fica o gerador de golfadas. .................................................130 Figura C.2. Primeiro gerador de golfadas. ...................................................................................130 Figura C.3. Segundo gerador de golfadas – amplitude variável. .................................................130 Figura C.4. Componente do segundo e terceiro  gerador de  golfadas – sinal em onda para  gerar amplitude variável. .......................................................................................................................130 Figura C.5. Terceiro gerador de golfadas – amplitude e freqüência variáveis. Detalhe do gerador de sinais para teste do mecanismo de auto-ajuste. .......................................................................131 Figura C.6. Malha de controle do controlador Fuzzy PID supervisor..........................................131 Figura C.7. Controlador Fuzzy PID Supervisor. ..........................................................................131 Figura C.8. Malha de controle do controlador Monitoramento da Média Móvel........................132 Figura C.9. Malha de controle do controlador Classificador por Regiões. ..................................132 Figura C.10. Controlador Classificador por Regiões. ..................................................................132 Figura C.11. Malha de controle do controlador Histerese com Auto-ajuste. Detalhe dos geradores de sinal de referência....................................................................................................................133 Figura  C.12.  Controlador  Histerese  com  auto-ajuste.  Detalhes  do  classificador,  da  histerese,  da parametrização da rotação de transição e dos filtros de saída......................................................133 Figura C.13. Componente do controlador Histerese com Auto-ajuste – parametrização da rotação de transição...................................................................................................................................133 Figura C.14. Componente do controlador Histerese com Auto-ajuste – mecanismo de auto-ajuste.
......................................................................................................................................................134 Figura  C.15.  Componente  do  mecanismo  de  auto-ajuste  –  monitoramento  da  média  móvel  do sinal de controle. ..........................................................................................................................134   ix Relação de Tabelas Tabela 4.1. Aplicação da Base de Regras a uma entrada ativa. .....................................................30 
Tabela 4.2. Implementações mais comuns de operadores lógicos E e OU. ...................................32 
Tabela 4.3. Aplicação da Base de Regras usando entradas associativas........................................33 
Tabela 4.4. Aplicação da Base de Regras Sugeno. ........................................................................38 
 Tabela 5.1. Representação dos conjuntos nebulosos para a base de regras. ..................................56 
Tabela 5.2. Base de regras do controlador supervisor FPID ..........................................................56 
Tabela 5.3. Base de regras do controlador supervisor FPID ..........................................................57 
Tabela 5.4. Base de regras do controlador Monitoramento da Média Móvel................................61 
Tabela 5.3. Aplicação da Base de Regras usando entradas associativas........................................61 
Tabela 5.6. Base de regras do controlador Classificador por Regiões. ..........................................64 
Tabela 5.7. Base de regras do controlador Classificador com Média adaptado ao VASPS. .........66 
 Tabela  6.1.  Planejamento  dos  experimentos  computacionais  para  verificação  da  relação  entre parâmetros, sinal de controle e resposta do sistema.......................................................................88 
Tabela 6.2. Comparação dos controladores voltados à minimização do esforço...........................93 
 Tabela A.1. Base de regras do controlador supervisor FPID .......................................................106 Tabela A.2. Base de regras do controlador supervisor FPI..........................................................107 Tabela A.3. Base de regras do controlador supervisor FPI com derivada ...................................108 Tabela A.4. Base de regras do controlador supervisor FPD ........................................................109  Tabela  B.1.  Planejamento  dos  experimentos  computacionais  para  verificação  da  relação  entre parâmetros, sinal de controle e resposta do sistema.....................................................................116 Tabela B.2. Explanação dos parâmetros de simulação. ...............................................................117   x Nomenclatura Letras Latinas ce    mudança no erro ce(T)    mudança no erro discretizada cx    mudança relativa normalizada do erro cx(T)    mudança relativa normalizada do erro discretizado de    diâmetro externo da piscina na região interna ao VASPS. 
di   diâmetro interno da piscina na região interna ao VASPS. 
D0    Constante Derivativa Inicial, em uso no controlador PID Df    Variação percentual a ser impressa na constante derivativa e(t) ou e sinal de erro e(T)    sinal de erro discretizado  ou  e   sinal de erro médio )t(ef    freqüência de acionamento da bomba BCS fS   função de saturação fLR   função de limitação de rampa fQ    função de quantização h   nível de líquido Hr    Profundidade do reservatório na formação até a superfície HS   Profundidade de referência da superfície Hwh    Profundidade da cabeça do poço no leito marinho até a superfície HBCS   Profundidade da bomba BCS no poço falso até a superfície ie    integral do erro ie(T)   integral do erro discretizada ix    integral relativa normalizada do erro ix(T)   integral relativa normalizada do erro discretizado I0     Constante Integral Inicial, em uso no controlador PID If   Variação percentual a ser impressa na constante integral Kp ou P  Constante proporcional, ou ganho proporcional, do controlador PID  xi Kd ou D Constante derivativo, ou ganho derivativo, do controlador PID Ki ou I   Constante integral, ou ganho integral, do controlador PID Ke    Constante de ganho de entrada de erro do controlador supervisor Fuzzy-PID Kie   Constante de ganho de entrada da integral do erro do supervisor Fuzzy-PID Kce   Constante de ganho de entrada da mudança no erro do supervisor Fuzzy-PID n   Número de pontos utilizados para realizar a média móvel de um sinal N0    nível inicial da piscina do VASPS, durante a partida do sistema P(s)    Função de transferência qualquer de uma planta não-linear P0    Constante Proporcional Inicial, em uso no controlador PID Pf    Variação percentual a ser impressa na constante proporcional Pr    Pressão estática do reservatório Pin   Pressão de entrada do fluido multifásico no VASPS Pout   Pressão de saída de líquido bombeado pelo BCS no VASPS •oeQ    vazão de entrada do VASPS, impressa pelo escoamento multifásico do poço •osQ    vazão de saída do VASPS, impressa pela bomba BCS r(t) ou r  sinal de referência, ou setpoint r(T)    sinal de referência, ou setpoint, discretizado s   variável de Laplace Treação    Tempo de reação Testab   Tempo de estabilização u(t) ou u sinal de controle, ou esforço de controle u(T)   sinal de controle, ou esforço de controle discretizado  ou  u   sinal de controle médio  )t(uuPB   valor  constante  do  sinal  de  controle  para  operação  no  entorno  do  valor  de  pertinência positiva alta (‘Positive Big’) no controlador Histerese com Auto-Ajuste uPS   valor  constante  do  sinal  de  controle  para  operação  no  entorno  do  valor  de  pertinência positiva baixa (‘Positive Small’)no controlador Histerese com Auto-Ajuste uZ    valor constante do sinal de controle para operação no entorno do valor de pertinência Zero no controlador Histerese com Auto-Ajuste uNS   valor  constante  do  sinal  de  controle  para  operação  no  entorno  do  valor  de  pertinência negativa baixa (‘Negative Small’) no controlador Histerese com Auto-Ajuste  xii uNB    valor  constante  do  sinal  de  controle  para  operação  no  entorno  do  valor  de  pertinência negativa alta (‘Negative Big’) no controlador Histerese com Auto-Ajuste VL   Volume de Líquido x   erro relativo normalizado x(t)    sinal de entrada do sistema x(T)   erro relativo normalizado discretizado y(t) ou y sinal de saída do sistema y(T)   sinal de saída do sistema discretizado Letras Gregas ∆e   derivada do erro ∆D   Variação na constante derivativa ∆I    Variação na constante integral ∆P   Variação na constante proporcional ∆PBCS    Energia de pressão adicionada pela bomba BCS ao fluido bombeado µ(t)    sinal de pertinência atribuído para o erro como saída do Classificador )t(µ     sinal de pertinência média  µA(x)    função de pertinência do conjunto nebuloso A na variável x µB(x)    função de pertinência do conjunto nebuloso B na variável x µ1 e µ2   valores de transição entre regiões de trabalho para a histerese de subida no controlador Histerese com Auto-Ajuste. 
δ   intervalo de histerese. 
Siglas BCS   Bombeio Centrífugo Submerso FT   Função de Transferência FPID     Controlador supervisor Fuzzy PID LI    Limite Inferior de estabilidade para o nível de líquido no VASPS LS   Limite Superior de estabilidade para o nível de líquido no VASPS PID    Proporcional-Integral-Derivativo  xiii PI    Proporcional-Integral PD   Proporcional-Derivativo rsl    rising slew rate, inclinação da rampa de aceleração máxima do atuador fsl    falling slew rate, inclinação da rampa de desaceleração máxima do atuador SP   valor instantâneo do sinal de referência VASPS  Vertical Annular Separation and Pumping System   xiv     Capítulo 1  1  Introdução O  sistema  de  separação  submarina  vertical  VASPS  (vertical  annular  separation  and pumping system), que permite separar ainda no leito marinho as fases líquida e gasosa do fluido produzido  em  poços  de  petróleo,  foi  introduzido  com  sucesso  no  Brasil,  contribuindo  com aumentos significativos de produção conforme reportado por do Vale et al. (2002). No entanto, a tecnologia de elevação artificial presente no sistema – uma bomba BCS – apresentou dificuldades operacionais em seu sistema de controle, conforme Peixoto et al. (2005), devido ao acionamento imposto na bomba, que encurtou sua vida útil. 
Diferentemente da indústria de manufatura, onde processos em batelada são rigorosamente controlados para seguir uma dada trajetória, ou qualquer outro sinal de referência, os processos contínuos, como controle de vazão, temperatura ou pressão, não necessitam de acompanhamento tão próximo do sinal de referência, mas sim de minimizar o desgaste do atuador, maximizando sua  vida  útil  através  do  tratamento  do  sinal  de  controle,  devido  ao  alto  custo  que  o  atuador representa  no  processo.  Em  um  sistema  submarino  como  o  VASPS,  uma  intervenção  para manutenção da bomba BCS (Bombeio Centrífugo Submerso), conforme reportado por Peixoto et al. (2005), implica em elevados custos, que, caso não minimizados, podem inviabilizar a solução. 
Neste contexto o objetivo deste trabalho é aplicar a Teoria de Controle à opção de elevação artificial  de  BCS  usada  no  sistema  VASPS,  objetivando  a  viabilização  da  tecnologia  e  melhor gerenciando  o  comportamento  do  sistema.  Com  isso,  obtém-se  também  uma  ferramenta  de previsão e simulação do sistema, resultado do uso do software Simulink®, disponibilizado como parte integrante do software Matlab®, que permite a construção de sistemas unidimensionais para a simulação de resultados baseados em uma modelagem voltada para sistemas de controle. Esta  1 ferramenta  de  simulação  pode  então  ser  usada  para  o  planejamento  da  produção  e  mesmo  o desenvolvimento de técnicas mais eficientes de operação. Esta última característica do sistema é reforçada pelo uso de técnicas de Inteligência Artificial, que permitem ainda o desenvolvimento de uma interface de operação que facilita a interpretação do sistema, através do uso das mesmas variáveis que são usados na leitura dos sinais monitorados em campo. 
1.1  Organização do Trabalho Este trabalho está organizado em sete capítulos com a seguinte disposição: •  O  Capítulo  2  posiciona  este  trabalho  no  cenário  histórico  do  desenvolvimento  de tenologias submarins, introduzindo detalhes sobre o objeto do estudo, o sistema VASPS; •  O  Capítulo  3  aprofunda  os  detalhes  acerca  do  VASPS,  apresentando  a  modelagem  e  o equacionamento dos componentes principais do sistema. Neste capítulo são realizadas as considerações  que  delimitam  o  escopo  da teoria  desenvolvida  no trabalho, contextualizando também a problemática de controle; •  O  Capítulo  4  apresenta  os  fundamentos  teóricos  da  Teoria  de  Controle,  introduzindo alguns conceitos essenciais usados no desenvolvimento de controladores, que devem ser suficientes  para  o  entendimento  das  técnicas  desenvolvidas  ao  longo  do  trabalho.  O Capítulo  possui  uma  seção  para  tratar  da  Lógica  Nebulosa,  outra  para  a  Teoria  de Controle  Moderno  e  conclui  com  a  fusão  das  duas,  apresentando  o  Controle  Nebuloso, usando  em  todos  eles  exemplos  relacionados  aos  conceitos  do  Sistema  VASPS trabalhados no capítulo anterior; •  No Capítulo 5 as metodologias de síntese de controladores são apresentadas no contexto das  duas  principais  estratégias  de  controle  adotadas.  A  primeira  segue  o  conceito  de melhoria de desempenho do sinal de resposta, uma tendência dos controladores clássicos, enquanto que a segunda  trata da minimização do esforço de controle propriamente dito, que  foca  mais  diretamente  o  objetivo  deste  trabalho.  Modelos  são  apresentados  e discutidos, sem a apresentação dos resultados; •  No  Capítulo  6  são  simulados  os  resultados  para  os  casos  propostos.  Curvas  de  resposta são  avaliadas  individualmente  e  dispositivos  inseridos  na  malha  de  controle  têm  suas  2 características mapeadas, permitindo avaliar como estes trabalham entre si ao se mesclar conceitos nos controladores finais;  •  Finalmente,  o  Capítulo  7  apresenta  as  conclusões  obtidas  no  decorrer  deste  estudo  esão propostas sugestões de trabalhos futuros; O  trabalho  também  possui  três  apêndices.  O  Apêndice  A  se  dedica  ao  detalhamento matemático  dos  modelos  de  controladores  voltados  ao  desempenho,  com  a  definição  dos parâmetros e a apresentação das curvas de resposta para variações desenvolvidas neste trabalho. 
O Apêndice B apresenta todas as simulações computacionais realizadas para o último modelo de controlador  proposto,  voltado  à  minimização  do  esforço  de  controle,  apresentando  resultados preliminares  de  uma  proposta  para  a  experimentação  real.  Por  fim,  o  Apêndice  C  apresenta  os modelos computacionais de todos os controladores desenvolvidos e do sistema físico do VASPS, desenvolvidos na forma de diagrama de blocos no Simulink®. 
 3     Capítulo 2  2  Panorama Tecnológico  2.1  Sistemas de Produção Offshore As  descobertas  mais  recentes  de  reservatórios  de  óleo  têm  ocorrido  cada  vez  mais frequentemente  em  alto  mar  e  em  lâminas  d’água  cada  vez  mais  profundas,  especialmente  no Brasil, onde o volume da reserva sofreu incrementos expressivos nos anos recentes. Com estas novas  descobertas  são  impostos  novos  desafios,  uma  vez  que  as  condições  operacionais  ficam mais  complexas  e  as  tecnologias  existentes  não  são  suficientes  para  a  exploração  dos  novos campos. Um exemplo de adaptação para um novo cenário é dado em Campos et al. (2006), onde a  plataforma  P-55  a  ser  instalada  em  uma  lâmina  d’água  de  1800  metros  teve  de  sofrer  o desenvolvimento  de  um  novo  sistema  de  controle  para  atender  as  condições  críticas  de escoamento em golfadas (variação brusca da vazão) recebida pela plataforma, característica esta causada,  entre  outras  coisas,  pelo  alto  volume  de  produção,  pela  forte  presença  de  gás  -    que causa  uma  diferença  de  velocidade  entre  as  fases  instabilizando  o  fluxo  -  e  pela  geometria  do terreno, mais acidentado devido à sua localização de maior profundidade - o que faz com que a gravidade  gere  este  escoamento  nos  risers  que  levam  a  produção  do  fundo  do  mar  até  a plataforma. 
Assim, a exploração e produção em alto mar na Bacia de Campos que até então lançanva mão  de  tecnologias  consagradas,  como  o  uso  quase  que  exclusivo  da  técnica  de  gas  lift  como solução  de  elevação  artificial,  teve  de  sofrer  novos  desenvolvimentos  e  aplicações  a  fim  de sustentar a operação nas novas condições. Para o exemplo da elevação artificial, a transição para o  cenário  de  água  ultra-profundas  exigiu  em  alguns  casos  soluções  mais  apropriadas  para  4 escoamento  de  grandes  vazões,  como  o  Bombeio  Centrífugo  Submerso  (BCS),  que  conta  com uma bomba elétrica para o incremento da pressão no fluido.  
Com  plataformas  locadas  em  regiões  mais  distantes  do  litoral,  e  com  o  maior  custo  de produção devido à necessidade de se desenvolver novas tecnologias, apenas a produção em maior escala consegue prover o retorno suficiente para estes custos com um risco controlado, de forma que nestas novas condições são usadas plataformas maiores e em menor quantidade, integrando regiões mais vastas, aumentando a distância entre os postos. Com isso, a ocupação de espaço em plataforma  se  torna  uma  questão  crítica,  pois  uma  maior  produção  exige  maiores  tanques  de armazenamento,  maiores  separadores,  maior  mão-de-obra  e  um  descarregamento  da  produção mais frequente. Todo este novo cenário implicou no desenvolvimento de tecnologias ainda mais inovadoras, que têm surgido na forma de sistemas de produção submarinos, campos inteligentes e transporte de produção para longas distâncias através de oleodutos e gasodutos. Junto com todas estas  novas  abordagens  também  aparecem  questões  adicionais,  como  processamento  de produção, garantia de escoamento, monitoramento dos poços em longo prazo e questão de meio ambiente  e  seguraça,  que  no  todo  caracterizam  uma  transição  tecnológica  significativa  das tecnologias de explotação de petróleo. 
As  questões  mencionadas  são  aboradadas  por  Devegowda  e  Scott  (2003),  que  fazem  um levantamento  de  possíveis  soluções  para  este  novo  cenário,  considerando  o  desenvolvimento recente de tecnologias submarinas. Dentre as possibilidades de processamento submarino, cinco alternativas  de  soluções  são  mencionadas  na  referência  e  avaliadas  segundo  os  critérios destacados anteriormente: •  Bombeio Mulifásico •  Separação Gás/Líquido •  VASPS •  Separação Água/Óleo O bombeio multifásico consiste de uma bomba capaz de transmitir fluido nas fases líquida e  gasosa  em  uma  única  linha,  não  necessitando  de  outros  equipamentos  submarinos.  Esta tecnologia consegue lidar com frações de gás de até 97%, tão embora não consiga trabalhar com uma  fração  maior  que  esta.  Além  disso,  patículas  sólidas  podem  danificar  o  sistema  e  seu consumo  de  energia  pode  ser  bastante  alto  quando  o  bombeio  necessitar  ser  realizado  para grandes  distâncias,  o  que  exigiria  uma  maior  manutenção  e  ocupação  de  espaço  na  plataforma  5 para  os  geradores  de  energia.  Ainda  assim,  o  bombeio  multifásico  é  apontado  como  uma “tecnologia comprovada”, e bastante competitiva para bombeio em pequenas distâncias. 
A separação submarina de gás e líquido consiste de um vaso de separação submarino com um sistema de bombeio para transmitir a fase líquida separada por uma linha enquanto o gás e transmitido  por  outra  linha,  independente,  sem  bombeio.  Este  sistema  necessita  de  um  aparato complexo de separação , o que se agrava pela dificuldade de realizar intervenções e pelo uso de instrumentação  adicional,  como  o  uso  de  manifold,  válvulas  e  um  sistema  de  controle.  Além disso,  esta  tecnologia  também  apresenta  dificuldades  com  sólidos  e  com  a  geração  de  energia para  o  bombeio.  No  entanto,  há  diversos  benefícios  inerentes,  como  a  redução  da  pressão  de trabalho na cabeça do poço, aumentando a produção significativamente, a possibilidade do uso do gás separado para a reinjeção no poço, a inibição da formação de hidratos na tubulação devido à segregação  do  metano  em  uma  linha  inedependente  e  a  redução  do  diâmetro  dos  risers  e  das linhas de transmissão, barateando o custo do bombeio para longas distâncias. 
A  diferença  ente  o  VASPS  e  a  separação  submarina  de  gás  e  líquido  convencional  é  a integração do sistema de bombeio com o vaso de separação, que é também mais compacto. Isso implica  em  uma  redução  da  complexidade  do  equipamento,  elimina  a  necessidade  de  linhas independentes de gás e líquido entre a bomba e o separador, podendo ser usada apenas uma linha de alimentação mutifásica de fluido e reduz o consumo de energia por parte da bomba, uma vez que  o  sistema  fica  próximo  da  base  do  riser,  e  não  do  campo  submarino,  reduzindo  o comprimento da linha elétrica. 
A separação de água e óleo consiste de um separador ciclônico instalado no leito submarino ou no fundo do poço que separa a água do óleo e a usa para a reinjeção no poço, bombeando o óleo com uma bomba submersa, seja elétrica (BCS) ou hidráulica. A separação pode ser ciclônica ou  por  gravidade  e  faz  uso  de  duas  linhas  de  saída  –  uma  para  o  gás  e  outra  para  o  óleo  – enquanto que a água é enviada para um dispositivo submarino de tratamento. Este sistema amplia os benefícios da separação de gás e líquido por liberar espaço na plataforma devido à redução do dispositivo  de  separação  e  tratamento  de  água  e  por  inibir  ainda  mais  a  formação  de  hidratos  devido  à  remoção  da  água  da  linha  de  transmissão.  Este  sistema  entretanto  não  foi  elevado  à maturidade,  de  forma  que  com  poucas  aplicações  ainda  não  se  pode  garantir  uma  alta confiabilidade. Além disso, caso a água não seja usada para a injeção, seu descarte torna-se um  6 problema.  Ademais,  todos  os  problemas  de  complexidade  de  equipamento  no  fundo  do  mar continuam valendo, bem como as dificuldades com a energia para as bombas. 
Em Devegowda e Scott (2003), o Bombeio Multifásico é indicado como a tecnologia mais consagrada  e  desenvolvida,  devido  ao  alto  custo  de intervenção  que  pode  inviabilizar  o  uso  de uma bomba BCS, presente nos outros sistemas, mesmo se considerando que este último oferece maiores  benefícios  que  o  primeiro.  Isto  apenas  justifica  o  propósito  deste  trabalho,  que  visa buscar  a  viabilidade  do  sistema  VASPS  através  da  redução  da  quanidade  de  intervenções  na bomba BCS, como será visto nos capítulos seguintes. 
2.2  Sistema VASPS Como  visto  na  seção  anterior,  o  sistema  VASPS  (Vertical  Annular  Separation  and Pumping System) consiste de um separador submarino de óleo e gás instalado no leito marinho com um sistema de bombeio integrado, o Bombeio Centrífugo Submerso (BCS). Juntamente com o BCS, o VASPS usa a técnica de gás lift para a elevação artificial do óleo produzido. 
Plataforma de Plataforma de ProduçãoProduçãoVASPSVASPSVazão de produção Vazão de produção ManifoldManifolddos poçosdos poços Figura 2.1: Representação da instalação do VASPS no sistema de produção (fora de escala). 
O sistema VASPS apresenta um conceito inovador de separação e bombeamento bifásico submarino. Em detalhes, ele é constituído de uma torre de aproximadamente 70 metros de altura cuja  estrutura  interna  contém  um  separador  ciclônico  dividido  em  três  estágios  de  separação  e uma bomba do tipo BCS. Este vaso de separação é parcialmente enterrado em um poço falso na região  dos  poços  e  próximo  à  base  do  riser  de  produção,  possivelmente  integrando  poços próximos através do uso de um manifold. Para uma melhor compreensão, a Figura 2.2 apresenta um esquema do sistema VASPS, onde as dimensões são dadas à esquerda e abaixo, os estágios de  7 separação são indicados à direita e as saídas da produção para as linhas independentes de líquido e gás são dadas acima. 
 Figura 2.2. Diagrama esquemático do sistema VASPS. 
As  principais  condições  operacionais  do  VASPS,  conforme  relatado  por  do  Vale  et  al. 
(2002) e Peixoto et al. (2005), são: •  Utilização de gás lift •  Produção de líquido: 1000 m³/d •  Produção de gás: 100.000 m³/d •  Pressão de admissão do fluido multifásico: 14 kgf/cm²  8 •  Pressão no vaso separador: 8 a 12 kgf/cm² •  Pressão de descarga da BCS: 61 kgf/cm² •  Pressão na linha de gás: 7 kgf/cm² Aliada a estas condições, a saída para a linha de gás é aberta por um longo trecho, de forma que  não  há  uma  válvula  choke  ou  qualquer  outro  dispositivo  de  restrição  de  vazão  de  gás  que permita controlar a pressão no vaso com muita precisão ou velocidade. Considerando também o volume  do  VASPS  -  algo  em  torno  de  6,5  m³  -  há  a  indicação  de  que  este  sistema  não  está pressurizado, pois as pressões da fase gasosa são bastante menores que as do poço, e de que isto não  apresenta  problemas  operacionais,  pois  não  há  dispositivo  que  permita  influenciar diretamente esta variável. Além disso, o pequeno volume que as fases líquidas ocupam frente à produção, considerando-se que sua saída para a linha independente é controlada pela bomba, e a grande  variação  de  pressão  que  sofrem,  indicam  também  que  este  é  o  componente  crítico  do sistema. Considerando ainda que a bomba BCS não deva trabalhar com frações muito altas de gás e notando que há o uso do gás lift, faz-se imperativo que o controle do volume da piscina seja mais elaborado, ou ao menos fortemente monitorado. 
Dadas  a  instalação  e  as  condições  operacionais,  o  sistema  VASPS  atingiu  resultados expressivos  logo  em  sua  primeira  operação  (do  Vale  et  al.,  2002).  Dentre  fatores  positivos importantes no cenário apresentado na seção anterior, como a redução da ocupação de espaço na plataforma, a interligação de regiões produtivas e o bombeio para longas distâncias, o principal balisador da viabilidade deste sistema é a redução da pressão de trabalho na cabeça do poço, que permite o aumento da vazão de produção. 
Em do Vale et al. (2002), foi publicada a experiência com a primeira instalação do VASPS no Brasil, que ocorreu no campo de Marimbá em uma lâmina d’água de 395 metros. O poço que alimentou  o  separador  estava  produzindo  antes  da  intervenção  uma  vazão  de  750  m³/d  de  óleo com uma assistência de 100.000 m³/d de gas lift, a uma pressão de 36 kgf/cm². Após a instalação e  com  o  sistema  estabilizado,  o  gas  lift  foi  interrompido  e  a  nova  condição  de  operação  era  a produção de óleo de 1000 m³/d a uma pressão de 11 kgf/cm² no VASPS. A pressão na linha de líquido, após a saída da BCS, era de 56 kgf/cm² e a pressão na linha de gás era de 8 kgf/cm². Os ganhos  dramáticos  sustentaram  a  operação  do  VASPS  por  muito  tempo,  em  despeito  das dificuldades mencionadas na seção anterior. 
 9 Alguns anos após a primeira operação, um outro trabalho foi publicado relatando algumas das dificuldades que ocorreram no período de 2001 a 2004. O trabalho de Peixoto et al. (2005) relata todo o trabalho de workover (manutenção e correção de falhas de um poço) realizado para retomar  a  produção  do  VASPS.  Como  era  de  se  esperar,  a  intervenção  para  a  realização  deste workover foi ocasionada pela falha da bomba BCS, que fora então trocada. 
A  falha  da  BCS  ocorreu  em  Dezembro,  cinco  meses  depois  da  instalação  do  sistema  que ocorrera em Julho. A causa foi atribuída à parte mais complexa do sistema, o sistema de controle –  o  que  não  comprometeu  o  sucesso  da  nova  tecnologia,  uma  vez  que  o  sistema  de  proteção  e controle  não  reagiu  como  esperado  por  não  ter  detectado  uma  operação  imprópria  de  uma  das válvulas. Para a retomada da produção utilizando o VASPS, esta válvula choke presente na linha de gás foi removida, e proteções adicionais foram implementadas para o aumento da vida útil da nova bomba BCS. 
Após estas correções e depois da realização de ajustes no sistema de controle, a bomba foi trocada  em  Janeiro  de  2004  e  retomou  a  operação  em  Maio  de  2004.  Na  segunda  operação,  a condição operacional do sistema corrigido era bastante similar à primeira operação, apresentando uma vazão de óleo de 860 m³/d sem o uso do gas lift e a uma pressão de 11 kgf/cm².  
No  começo  de  2005,  tendo  sido  verificada  a  estabilidade  operacional  do  sistema  e  a  não reincidencia de falhas, uma nova condição operacional, prevista no projeto inicial, foi posta em produção: o uso de gas lift concomitante à operação do VASPS. Retomando o uso do gas lift, a vazão  de  produção  de  óleo  retornou  ao  patamar  de  1000  m³/d,  a  uma  pressão  de  14  kgf/m³.  A pressão na saída da BCS foi de 61 kgf/cm² e a pressão na linha de gás se manteve no patamar de 7  kgf/cm².  É  interessante  notar  que  embora  o  uso  de  uma  altíssima  vazão  gás  no  sistema  gera alguma  vibração  adicional  na  bomba,  isto  não  implica  necessariamente  na  pressurização  do VASPS  ou  da  linha  de  saída  de  gás,  de  forma  que  o  sistema  continua  a  trabalhar  com  o  vaso despressurizado e conectado diretamente à linha sem a presença da válvula choke. 
É  importante  ressaltar  que  a  necessidade  de  proteções  dinâmicas  e  estáticas  em  um controlador são sempre necessárias, pois são os dispositivos de automação que realizam a parada do  sistema  em  casos  eventuais  de  falhas.  No  entanto,  estes  sistemas  servem  para  apoiar  o gerenciamento, podendo nunca ser ativados ao longo da vida útil de um equipamento. Para que isto  (o  não  acionamento  das  proteções)  ocorra,  é  necessário  que  o  sistema  de  controle  estaja  10 adequado  aos  objetivos  operacionais,  de  forma  que  a  estratégia  de  controle  seja  elaborada  de acordo. 
Enquanto aplicação para um sistema de controle, o VASPS mostra-se altamente propício a ganhos  de  eficiência,  uma  vez  que  é  um  sistema  mecanicamente  eficaz  e  robusto  e  que  trouxe resultados  comprovados  no  campo.  Sendo  o  controlador  o  gargalo  de  uma  tecnologia  tão avançado, é interessante endereçar este problema diretamente com um trabalho focado, que é o caso  deste  estudo  especificamente.  Aqui  serão  propostas  alternativas  para  solucionar  a problemática  de  controle  da  bomba  BCS  –  ou  ao  menos  de  minimizar  os  impactos  desta  –  de forma  que  novas  estratégias  possam  ser  usadas  em  concepções  futuras  do  uso  deste  tipo  de bomba,  ou  novas  formulações  do  problema  possam  ser  tomadas  levando-se  em  conta  as diferentes estratégias de controle que podem ser adotadas, avançando-se o conhecimento através do melhor entendimento geral do problema.  
 11     Capítulo 3  3  Modelagem Neste capítulo o Sistema VASPS é apresentado em detalhes suficientes para a realização do controle.  Considerações  são  realizadas  quanto  à  modelagem  do  escoamento  e  quanto  ao equacionamento da bomba BCS e da dinâmica interna do vaso separador. Com as delimitações discutidas  neste  capítulo,  o  modelo  físico  é  fechado  e  proposto,  de  forma  que  os  capítulos seguintes tratarão mais diretamente da metodologia para a síntese de controladores. 
3.1  Escoamento 3.1.1  Escoamento de entrada Como  visto  no  Capítulo  2,  o  Sistema  VASPS  é  alimentado  diretamente  do  poço  de produção, com o padrão de escoamento em golfadas. Este escoamento alterna a predominância de líquido e de gás, de forma que funciona como um sinal de distúrbio para as condições de pressão e de vazão – ou de nível de líquido na piscina – dentro do vaso. Como visto mais adiante, o sinal de entrada em um dado sistema afeta a resposta, ou estas condições operacionais, de forma que para estabilizá-las é necessário um controlador. Dessa forma, é importante que seja escolhido um padrão de escoamento de entrada de líquido no VASPS que reflita a condição de campo ou que seja  mais  agressiva  do  que  esta,  de  forma  que  o  projeto  de  controladores  considere  a  robustez necessária  para  atingir  o  objetivo  de  controle  mesmo  sob  distúrbios  de  entrada  bastante significativos. 
Com  o  intuito  de  analisar  tanto  a  robustez  dos  controladores  propostos,  quanto  a sensibilidade do sistema a variações no escoamento, este trabalho apresenta simuladores de fluxo de  entrada  de  líquido  paulatinamente  mais  agressivos.  Foram  elaboradas  três  curvas  diferentes para  este  simulador,  chamado  de  ‘Gerador  de  Golfadas’,  que  foram  inseridos  na  malha  de  12 controle para garantir a robustez das soluções propostas. Além disso, ao passo que um objetivo de  controle  é  atingido  e  os  modelos  de  controlador  evoluem,  um  Gerador  de  Golfadas  mais simples é substituído por outro mais agressivo. 
O papel do gerador de golfadas no sistema é importante para a concepção e validação do modelo computacional, pois este é o responsável por simular todos os distúrbios de campo que tornam  complexa  a  operação  do  separador,  constituindo  uma  ferramenta  essencial  para  a avaliação  da  robustez  do  conceito  de  controlador  proposto  e  sua  sensibilidade  às  variações  no escoamento. A primeira curva usada como comportamento da vazão de entrada para o gerador de golfadas é apresentado na Figura 3.1 (comunicação direta, Teixeira, 2006). 
]d/³m1200[ adart1000needoãzaV800 600 010002000300040005000Tempo [s] Figura 3.1. Modelo preliminar da vazão de entrada de líquido do Gerador de Golfadas (comunicação direta, Teixeira, 2006). 
Embora o Gerador de Golfadas inicial apresente uma componente aleatória nos patamares de  amplitude  da  vazão  de  entrada,  este  pode  ser  considerado  bastante  conservador,  por  se assemelhar  bastante  a  uma  onda  quadrada,  previsível.  Assim,  esta  contribuição  da  literatura sofreu três modificações neste trabalho, de forma a compor as outras duas curvas mais agressivas: 1.  O aumento da oscilação aleatória no patamar de vazão; 2.  A variação da freqüência das golfadas, tornando-as imprevisíveis; e, por fim 3.  A  variação  dos  patamares  de  pancada  de  líquido,  tornando  as  golfadas  diferentemente agressivas. 
O  primeiro  efeito  foi  combinado  com  o  segundo  para  compor  o  segundo  modelo  de Gerador de Golfada. A adição do terceiro efeito no gerador permitiu constituir o último modelo para a vazão de entrada, de forma que suas curvas tomam as formas apresentadas na Figura 3.2. 
Nesta  figura  é  mantida  a  curva  primária  do  gerador de  golfadas  (comunicação  direta,  Teixeira,  13 2006)  para  apresentar  o  contraste  entre  esta  e  aquelas  desenvolvidas  como  contribuição  deste trabalho. 
1200]d/³1000m[ 800adart600need1200 1000 oãzaV800600010002000300040005000Tempo [s] Figura 3.2. Comparativo entre o segundo e terceiro geradores de golfada. 
3.1.2  Escoamento interno ao vaso O  escoamento  do  fluido  multifásico  internamente  ao  vaso  passa  por  três  estágios  de separação,  delimitados  pela  geometria  interna  conforme  apresentados  no  Capítulo  2  através  do esquemático  da  Figura  2.2.  A  separação  ocorre  na  Câmara  de  Expansão,  no  Helicóide  de Separação  e  na  ‘Piscina’,  de  forma  que  o  princípio  de  separação  identificado  em  cada  um  dos estágios é o seguinte: •  Separação primária: é composta por uma câmara de expansão onde ocorre a extração de cerca de 50% do gás da mistura gás e líquido (óleo e água). Por efeito da incidência do jato  nas  paredes  cilíndricas  internas,  forma-se  um  filme  de  líquido  que  desce  por gravidade para o helicóide do separador secundário; •  Separação  secundária:  é  composta  por  uma  estrutura  helicoidal  que  visa  aumentar  a eficiência  de  separação  do  sistema.  A  separação  se  dá  pela  combinação  do  efeito centrífugo de segregação do gás livre com o efeito do tempo de residência para a remoção do gás disperso na fase líquida; •  Separação terciária: é composta por uma “piscina” na qual o líquido se acumula e parte do gás é separada por efeito gravitacional. Nesta piscina é onde opera uma bomba elétrica submersa do tipo BCS. 
 14 O  escoamento  que  ocorre  desde  a  admissão  do  fluido  multifásico  no  bocal  de  entrada passando pelos estágios de separação é ilustrado pela Figura 3.3. 
 Figura 3.3. Esquemático do escoamento das fases líquido e gás no VASPS. 
Assim,  a  garantia  da  eficiência  de  separação  no  VASPS  é  o  resultado  da  contribuição  de cada  uma  das  etapas  deste  processo,  sendo  parcialmente  realizada  na  câmara  de  expansão  e parcialmente  causada  pelos  efeitos  de  segregação  centrífuga,  de  tempo  de  residência  e gravitacional.  Estes  últimos  três  são  diretamente  afetados  pelo  nível  em  que  a  piscina  de encontra,  uma  vez  que  caso  a  piscina  esteja  muito  cheia  (e  então  o  nível  é  considerado  ‘alto’, dado que neste trabalho a leitura é realizada do fundo para o topo), o tempo de residência é menor e  consequentemente  o  fluido  é  exposto  ao  efeito  centífugo  por  menos  tempo.  Além  disso,  com uma  fração  de  gás  maior  na  piscina  causada  pela  redução  da  eficiência  de  separação,  o  efeito gravitacional  também  é  impactado.  Toda  esta  interligação  de  efeitos  implica  que  o  nível  da piscina do VASPS deve ser mantido abaixo de um limite superior (LS), para que a eficiência de separação do gás seja garantida. 
Da  mesma  forma,  embora  a  bomba  BCS  presente  no  sistema  seja  resistente  a  uma  certa fração  de  gás,  esta  não  consegue  trabalhar  com  frações  de  vazio  muito  altas.  Isto  implica  em  15 outra restrição do sistema – a operação com a BCS afogada, ou seja, completamente mergulhada no líquido, para que não haja dano. Com isso estabelece-se um limite inferior (LI) de operação. 
Neste  trabalho,  são  considerados  os  parâmetros  usados  em  campo  para  estes  dois  limites propostos. Não há, entretanto, um valor fixo a partir do qual o sistema apresenta problemas, até mesmo porque diversas condições de operação influenciam na capacidade de o sistema absorver com estabilidade as oscilações das variáveis tanto do fluido como do sistema. Será usado, então, um  intervalo  onde  a  operação  possa  ficar  mais  crítica,  restringindo  a  operação  a  uma  faixa  de estabilidade próxima aos valores de referência usados para o nível na operação do sistema atual. 
Uma vez que esta referência sempre se situa próximo dos 30 metros de altura de nível de líquido, oscilando mais ou menos de alguns metros em condições mais severas, será ssumido que a faixa de  estabilidade  se  dá  dos  25  aos  35  metros  de  coluna  de  líquido  e  que  os  valores  críticos  de operação do sistema são atingidos respectivamente em torno dos 20 metros (LI) e em torno dos 40 metros (LS) de altura. 
3.2  Elevação Artificial usando BCS A  vazão  de  saída  de  líquido  do  VASPS  é  impressa  pela  Bomba  BCS,  que  por  sua  vez  é acionada por um inversor de freqüência. Este dispositivo, comum em sistemas automatizados que fazem  uso  de  rotores  elétricos,  permite  variar  a  freqüência  de  alimentação  do  dispositivo acionado  –  no  caso,  a  bomba  –  e  consequentemente  variar  a  vazão  impressa  no  sistema.  Este artifício  é  usado  exatamente  para  adequar  o  funcionamento  dos  equipamentos  a  um comportamento desejado para o sistema, tão embora a modelagem de todos os efeitos resultantes seja bastante intrincada. Com isso, não só a vazão do sistema é alterada, como também a curva de carga  sofre  variações,  uma  vez  que  a  componente  de perda  de  carga  por  escoamento  é  afetada quando da variação da velocidade do fluido. 
Uma ilustração do efeito da variação da freqüência de alimentação em uma bomba BCS é apresentada na Figura 3.4. Esta ilustração representa a relação entre altura de elevação (ou Head, como apresentado) e vazão de saída, para diversas freqüências de acionamento e uma eficiência constante de uma bomba BCS de um estágio, modelo TE1500, retirada do catálogo de produto das  curvas  de  bombas  da  série  538.  Com  isso,  para  uma  dada  eficiência  e  uma  dada  altura  de elevação, pode-se encontrar a relação entre a freqüência de acionamento da bomba pelo inversor e  sua  respectiva  vazão  de  saída,  de  forma  que  a  oscilação  presente  na  vazão  de  saída  depende completamente da forma de acionamento realizada sobre o atuador. 
 16  Figura 3.4. Exemplo de curvas de bomba BCS para diferentes freqüências de acionamento. 
Para a bomba BCS presente no VASPS, será utilizada a relação proposta por Teixeira et al. 
(2004), apresentada na Equação (3.1). 
=&Qos3+8.07862⋅⋅⋅(3.1) 
-0.0577ff-249.18
f-263.36
 •osQNesta  equação,   é  a  vazão  de  saída  em  metros  cúbicos  por  dia  e  f  é  a  freqüência  de alimentação da bomba em Hertz. 
A  realização  da  modelagem  desta  curva  não  é  apresentada  na  referência  mencionada,  de forma  que  se  faz  necessário  esclarecer  as  premissas  assumidas,  bem  como  o  raciocínio  que culminou  em  tal  resultado.  Basicamente,  foram  três  as  principais  considerações  realizadas,  a saber (comunicação direta, Teixeira, 2006): •  As curvas da bomba obtidas do fabricante, relacionando a  altura de  elevação, H, com  a vazão,  Q,  para  uma  série  de  freqüências,  f,  selecionadas,  são  dadas  na  Figura  3.5.  A equação de cada uma das curvas foi obtida através da seleção de pontos de operação no catálogo  do  fabricante  e  de  sua  posterior  interpolação  usando  um  polinômio  de  terceiro grau, com um ajuste maior ou igual a 0,997. 
 17 200018001600f = 50 Hzf = 55 Hz14001200f = 60 Hzf = 65 Hz]m1000[ f = 70 HzH8006004002000050010001500200025003000Q [m3/d] Figura 3.5. Curvas da bomba BCS do VASPS para diferentes freqüências de acionamento (comunicação direta, Teixeira, 2006). 
•  A  alteração  da  freqüência  de  alimentação  da  bomba,  que  implica  em  alternar  entre  as curvas de vazão do sistema apresentadas, implica também em alteração da curva de carga do sistema, uma vez que a velocidade do fluido varia. Uma vez que o sistema de controle tratará  do  transiente  da  variação  de  nível  e  que  as  alterações  no  acionamento  serão pequenas  e  constantes,  este  efeito  da  variação  da  curva  de  carga  do  sistema  será desprezado,  de  forma  que  apenas  a  curva  da  bomba  será  alterada  em  um  dado acionamento. 
•  A profundidade do VASPS no campo é algo em torno de 400 metros. Além desta cota da lâmina  d`água  a  ser  elevada,  há  também  as  perdas  de  carga  no  sistema,  causadas  tanto pelo escoamento quanto pelos dispositivos (válvulas, joelhos, etc) presentes na tubulação. 
A somatória de todos estes efeitos será considerada  constante, de forma  que a  altura de elevação  a  ser  vencida  pela  bomba  será  um  parâmetro  fixo,  de  800  metros,  de  forma  a facilitar a correlação das variáveis para o cômputo da vazão de saída. 
Assim, para o equacionamento da relação entre freqüência de acionamento da bomba  e  a vazão  de  saída,  e  tomando  a  altura  de  elevação  fixa  de  800  metros,  há  apenas  um  ponto  de operação  da  vazão  para  cada  valor  de  freqüência  de  acionamento  da  bomba.  Assim,  ajustando uma curva de terceiro grau entre estes pontos, foi encontrada a curva apresentada na Figura 3.6 
(comunicação direta, Teixeira, 2006). 
 18 25002000]d1500/3m[ 1000QH = -0.0577Q3 + 8.0786Q2 - 249.18Q - 263.36
500R2 = 0.999
04853586368f [Hz] Figura 3.6. Modelo para a curva da bomba BCS (comunicação direta, Teixeira, 2006). 
A modelagem da curva  da bomba proposta por Teixeira et al. foi utilizada neste trabalho para  fins  de  simulação  da  dinâmica  do  VASPS  na  malha  de  controle.  Dadas  as  considerações realizadas,  esta  modelagem  simplificada  atende  as  necessidades  de  um  modelo  físico  para  a aplicação de um sistema de controle e o desenvolvimento de novas técnicas, o que representa o foco deste trabalho. 
3.3  Equacionamento do Sistema VASPS Como apresentado no Capítulo 2, o sistema VASPS é composto por três partes – a câmara de expansão, o helicóide de separação e a piscina, onde fica instalado o sistema de bombeio que destina  a  fase  líquida  para  uma  linha  segregada.  Fica  visível  o  tratamento  independente  do escoamento de cada uma das fases, de gás e de líquido, dentro do vaso.  
O primeiro, mais leve, é transportado e possui a pressão como variável governante. Como visto, o gás também não está altamente pressurizado, possuindo uma leve oscilação de pressão no sistema bocal de entrada – vaso – linha, não tendo apresentado problemas operacionais críticos por acúmulo de massa (aumento de pressão) em todo o sistema e consequentemente não exigindo a inserção de um equipamento restritivo ou de controle, como uma válvula choke, interrompendo a  comunicação  existente  em  toda  esta  extensão  aberta.  Além  disso,  a  longa  extensão  da  linha independente de transporte de gás implica em um volume bastante grande em que o gás pode se expandir,  de  forma  que  a  variação  da  variável  principal  –  a  pressão  –  é  de  ordem  bastante pequena. 
O segundo, ainda multifásico pela presença de diferentes líquidos, precisa ser bombeado e é monitorado na plataforma através do altura do nível no vaso, indicando que o volume é a variável  19 governante.  Este  sistema  por  sua  vez  é  mais  restrito,  uma  vez  que  volume  que  ele  ocupa  é limitado pelo vaso. Além disso, neste sistema existe um dispositivo que necessita de uma atenção redobrada – a bomba – sendo o componente crítico do sistema como um todo. A variação deste nível  de  líquido  é  algo  bastante  mais  dinâmico  e  mais  rápido  que  a  variação  da  grandeza  da pressão no vaso, o que exige a tomada de decisões com relação ao acionamento da bomba muito mais freqüentes. 
Dado este panorama, são feita algumas considerações para o tratamento da dinâmica física deste sistema para este trabalho: •  As  fases  de  líquido  presente  no  escoamento  interno  do  VASPS  compreendem partículas sólidas em pequena escala, uma fase de água salgada e outra fase de óleo, possivelmente  com  alguns  outros  elementos  dissociados.  Estas  fases  serão consideradas  como  uma  única,  sendo  as  partículas  sólidas  desprezadas  da  análise, dado  que  são  poucas  e  devem  ser  retidas  em  algum  tipo  de  filtro  específico  para isso. O tratamento do líquido como monofásico permite simplificações no modelo sem muita parda de credibilidade. 
•  O tratamento de cada uma das fases (líquido e gás) no VASPS após a separação será tratado como sistemas com dinâmica diferente, até mesmo porque as variáveis que os  regem  são  diferentes  e  possuem  transientes  de  ordem  bastante  distintas.  Com isso,  considerando  que  para  a  análise  do  controle  será  usada  apenas  a  resposta transiente,  o  efeito  da  variação  da  pressão  na  dinâmica  do  volume  de  líquido  será desprezada; •  A elaboração do sistema de controle tratará apenas do sistema crítico no VASPS, ou seja,  o  sistema  de  líquido,  focando  inclusive  no  atuador,  a  bomba  BCS,  que  é  o componente  crítico  do  sistema.  Entretanto,  o  trabalho  desenvolvido  para  este atuador não será  completamente perdido no tratamento de um possível sistema de controle  do  gás,  pois  os  conceitos  presentes  nas  estratégias  a  serem  apresentadas podem muito bem ser adaptados para uma nova aplicação. 
•  Para finalmente distinguir os sistemas de líquido e gás, será considerado que após o ingresso  no  vaso  e  conseqüente  separação,  as  fases  de  líquido  e  gás  não  se misturam, não se associam e não seqüestram partículas da outra fase. Considerar o fluxo de massa entre as  fases seria um trabalho  muito elaborado para o  estudo do  20 sistema controlado, devendo ser realizado num estudo a parte utilizando softwares de simulação de escoamento (CFD – Computational Flow Dinamics). 
•  A fase de líquido será considerada incompressível, de forma a facilitar a análise. 
•  Por fim, a leitura do nível de líquido na piscina tomará como referência  a direção emergente,  de  forma  que  o  zero  do  sistema  será  o  ponto  mais  fundo  do  vaso separado. Com o sistema de coordenadas indo no sentido contrário ao gravitacional, o nível alto da piscina será aquele mais próximo do bocal de entrada, e o mais baixo aquele mais próximo do ponto de instalação da bomba. 
Com as devidas considerações realizadas pode-se considerar o equacionamento para o nível de  líquido  da  piscina.  Tomando  a  lei  de  conservação  da  massa  e  sabendo  que  todo  o  volume monofásico de líquido que entra é incompressível e não sofre fluxo de entrada ou saída de massa com a fase gasosa, conclui-se que há conservação do volume, como expresso pela Equação (3.2), •oeQ•osQ  é a vazão de saída de líquido, que podem ser onde  é a vazão de entrada de líquido e expressas em metros cúbicos por dia [m³/d].  
dVLdt•Q•Qos(3.2) 
=− oeAdemais, a variação do nível de líquido é relacionada à variação de volume através do fator ed   é  o  diâmetro  externo  da  piscina, id   é  o  diâmetro geométrico  dado  na  Equação  (3.3),  onde interno,  em  metros,  e  h  é  o  nível  de  líquido,  também  em  metros.  O  fator  geométrico  usado representa a seção constante da área do anel onde a piscina do VASPS é localizada. 
dVLdt12dhdt =(3.3) 
2⋅−()πddei4Associando  as  duas  relações  acima,  a  dinâmica  de  variação  do  nível  da  piscina  é  então regida pela Equação (3.4), em função das vazões de entrada e saída e proporcional ao inverso da área da seção constante. 
dhdt4−•Qos•Q=−(3.4) 
 oe22π(d)dei  21     Capítulo 4  4  Fundamentos Teóricos Neste  capítulo  são  introduzidos  os  conceitos  fundamentais  utilizado  na  síntese  de controladores  apresentada  no  Capítulo  5.  Estes  fundamentos  teóricos  são  as  ferramentas manipuladas  quando  da  redefinição  da  estratégia  de  controle  para  cada  modelo  desenvolvido, aplicado e testado. Por fim, tão embora os exemplos trabalhados no decorrer deste capítulo não correspondam  a  um  modelo  de  controlador  específico  desenvolvido  posteriormente,  estes exemplos servem como base para guiar o entendimento do funcionamento do sistema VASPS no tocante às características e variáveis relevantes para o sistema de controle, de forma que a lógica apresentada corresponde à realidade física proposta e delimitada no Capítulo 3. 
4.1 
Introdução à Teoria de Conjuntos Nebulosos A Teoria de Conjuntos Nebulosos pode ser aplicada a sistemas de controle, provendo uma abordagem  prática.  Nesta  abordagem  é  importante  a  formação  de  uma  Base  de  Conhecimento onde o comportamento do sistema – as Regras – e as informações sobre as variáveis – os Dados – devem ser traduzidas de uma forma matemática. 
Conforme  proposto  por  Riid  (2002),  um  sistema  que  utiliza  a  Teoria  de  Conjuntos Nebulosa pode ser representado pelo esquema da Figura 4.1. 
 22  Figura 4.1 Sistema nebuloso genérico, adaptado de Riid (2002). 
Na Figura 4.1, o primeiro bloco, à esquerda, identifica a etapa de transformação dos dados reais,  numéricos,  em  dados  do  sistema  nebuloso,  lingüísticos.  Esta  transformação  de  variáveis pode ser chamada de Nebulização (ou Fuzzificação, como na referência apresentada). Após esta transformação,  as  variáveis  numéricas  tornam-se  variáveis  lingüísticas,  identificadas  por substantivos,  e  possuem  valores  de  pertinência  (de  0  a  1)  em  ‘conjuntos  nebulosos’, representados por adjetivos, que identificam o ‘valor’ daquela variável. Este processo é detalhado na seção 4.1.1 Nebulização. 
Com as variáveis definidas e classificadas, uma série de regras lógicas, pertencentes a uma Base  de  Regras,  são  aplicadas  através  de  um  mecanismo  de  inferência,  chamado  de  nebuloso. 
Para gerar valores de saída são usados dados de um Banco de Dados que, juntamente com a Base de  Regras,  formam  o  Conhecimento  sobre  o  sistema.  Este  Mecanismo  de  Inferência  Nebuloso pode  possuir  diversas  formas  de  tratar  estes  dados,  e  devem  ser  configurado  de  acordo  com  o sistema em questão. Detalhes são apresentados nas seções 4.1.2 e 4.1.4. 
Finalmente,  após  a  aplicação  das  regras  e  o  cômputo  da  solução,  as  variáveis  de  saída devem  ser  convertidas  de  volta  para  o  sistema  numérico  sendo  necessário  realizar  uma ‘transformada  inversa’.  Este  passo  pode  ser  chamado  de  Desnebulização  (ou  Defuzzificação, como apresentado na referência). Maiores explicações se apresentam nas seções 4.1.3 e 4.1.5. 
4.1.1  Nebulização Para  uma  melhor  compreensão  da  lógica  nebulosa  é  necessário  remeter  à  teoria  de conjuntos. Nesta, pode-se agrupar os elementos de cada conjunto separadamente, de forma que ao avaliar a pertinência µA(x) de uma variável x para um conjunto A em um universo X, pode-se afirmar que:  23 ∈Ax∉Ax,1,0sese(4.1) 
=)(µxA Desta  forma,  ou  o  elemento  pertence  ao  conjunto  A  ou  não  pertence.  Esta  classificação implica  que  a  função  de  pertinência  µA(x)  assume  valores  booleanos,  0  ou  1.  No  entanto,  para diversos  problemas  práticos  é  difícil  classificar  uma  dada  variável  em  apenas  dois  valores.  Por exemplo, qual o critério para classificar o nível da piscina no VASPS como ‘alto’? Ou ‘baixo’? 
Ainda, se o nível da piscina é crítico no valor de 30% superior  a um dado valor de referência, quão  crítico  este  o  é  quando  estiver  em  20%  superior?  Para  trabalhar  com  estes  valores intermediários,  que  muitas  vezes  são  relevantes,  surge  a  teoria  de  conjuntos  nebulosos, apresentada em Jager (1995), Passino e Yurkovich (1998) e Riid (2002). A teoria de conjuntos nebulosos admite a possibilidade de uma pertinência parcial, com um valor percentual entre 0 e 100%, diferente da noção clássica. Assim, um elemento pode pertencer a um dado conjunto com determinado grau de pertinência µA(x) dentro do intervalo [0,1]. 
Como  exemplo,  considere  o  sistema  VASPS  apresentado  no  Capítulo  3.  A  referência  de coordenadas  dimensionais  será  tratada  como  no  sentido  da  emergência,  ou  seja,  o  ponto  mais fundo  do  vaso  separador  equivale  à  cota  de  0  metro.  Adicionalmente,  foi  visto  que  o  limite inferior de trabalho para o nível, LI, é de 20 metros, e o limite superior, LS, é de 40 metros, de forma  pressupõe-se  que  a  região  ideal  de  trabalho  seja  em  torno  do  nível  de  30  metros, eqüidistante  aos  limites operacionais.  Com  isso, um  conjunto  nebuloso  rotulado  de  Baixo  pode caracterizar  o  nível  da  piscina  de  líquido  do  VASPS  fortemente  para  um  valor  entre  20  e  30 metros,  de  forma  que  o  “grau  de  pertinência”  para  o  nível  Baixo  seja  dado  por  uma  função []1,0)( ∈hBaixoµBaixoµ,  onde  h  é  o  nível  da  piscina.  A  pertinência )(h  do  nível  da  piscina  h  no conjunto Baixo pode então ser descrita conforme alguma das funções representada na Figura 4.2. 
BAIXOBAIXOBAIXOBAIXOBAIXOBAIXO111111111111½½½½½½½½½½½½¼¼¼¼¼¼¼¼¼¼¼¼[m][m][m][m][m][m][m][m][m][m][m][m]303030303030303030303030202020204040404020202020404040402020202040404040Nível da PiscinaNível da PiscinaNível da PiscinaNível da PiscinaNível da PiscinaNível da Piscina Figura 4.2. Exemplo de três possíveis funções de pertinência para o conjunto nebuloso Baixo. 
 24 É possível observar pela figura que quanto menor é o valor da variável Nível da Piscina, maior é a pertinência que esta tem no conjunto Baixo. Da mesma forma, diversas podem ser as funções que classificam este conjunto, sendo mais, ou menos gradativas. No entanto, apenas uma pode ser a função que classifica o conjunto Baixo na variável Nível da Piscina, de forma que uma das três funções apresentadas – ou alguma outra – deve ser escolhida para relacionar o conjunto nebuloso em uma variável nebulosa. 
A variável nebulosa Nível da Piscina, entretanto, também pode ser caracterizada por outros conjuntos nebulosos - por exemplo, Alto e Médio - podendo conter mais de um conjunto ativo, com  diferentes  graus  de  pertinência,  ou  seja,  com  diferentes  participações  em  cada  conjunto. 
Desta maneira, a variável Nível da Piscina é modelada como uma variável lingüística nebulosa, assumindo  valores  como  Alto,  Baixo  e  Médio,  chamados  de  rótulos  lingüísticos.  A  variável lingüística é caracterizada pela pertinência que possui em cada um de seus conjuntos nebulosos – no caso, os conjuntos Alto, Baixo e Médio – que possuem, cada um, sua função de pertinência, que  deve  ser  única  para  cada  conjunto.  A  Figura  4.3  mostra  uma  possível  configuração  para  a variável Nível da Piscina. 
BAIXOBAIXOBAIXOMÉDIOMÉDIOMÉDIOALTOALTOALTO1.0
1.0
1.0
0.8
0.8
0.8
µH(h)µH(h)0.6
0.6
0.6
0.4
0.4
0.4
0.2
0.2
0.2
000202020352525253535h, Nível da Piscina [m]h, Nível da Piscina [m]303030404040  Figura 4.3. Representação da variável nebulosa Nível da Piscina. 
Através  da  figura,  pode-se  observar  que  nesta  modelagem  da  variável  de  entrada,  foram cobertos os valores reais de entrada (que podem ser medidos com um sensor no sistema) de 20 a 40  metros  de  altura  do  líquido  da  piscina,  considerando  como  referência  para  medição  a emergência  (início  da  medição  no  fundo  do  vaso).  É  possível  concluir  também  que  caso  os valores estejam acima ou abaixo desta faixa, eles ativam os conjuntos extremos (Alto ou Baixo, respectivamente) com 100% de pertinência.  
Outra variável que pode ser considerada para o sistema VASPS e que pode ser relevante no sistema de controle é a Variação do Nível da Piscina, como uma derivada no tempo, da variável  25 anterior.  Neste  caso,  também  deve  ser  adotado  um  critério  para  a  classificação  do  universo  de operação da variável, a fim de cobri-lo com conjuntos nebulosos.  
Supondo que a variação máxima do nível seja a vazão nominal de entrada, 1000 m³/d, sem vazão de saída, a variação de nível equivale a: &Q−1000(2π−rrei&h===45,4/(4.2) 
cms) )(2AiAeConsiderando  também  que  é  necessário  um  bombeamento  de  igual  taxa  para  manter  o equilíbrio do sistema, no caso crítico inverso – bombeio a 1000 m³/d e vazão de entrada nula – o decrescimento do nível seria no valor oposto, – 4,45 cm/s. Assim, o universo de variação da nova variável  será  dado  pelo  intervalo  [-5;5].  Gerando  rótulos  adequados,  a  representação  desta segunda variável pode ser dada pela Figura 4.4. 
NEGATIVANEGATIVANEGATIVANULANULANULAPOSITIVAPOSITIVAPOSITIVA1.0
1.0
1.0
0.8
0.8
0.8
µH(h)µH(h)0.6
0.6
0.6
0.4
0.4
0.4
0.2
0.2
0.2
0002,52,52,5-5,0-5,0-5,0-2,5-2,5-2,50005,05,05,0.
.
h, Variação do Nível da Piscina [cm/s]h, Variação do Nível da Piscina [cm/s] Figura 4.4. Representação da variável nebulosa Variação do Nível da Piscina. 
Uma vez definidas as variáveis de entrada do sistema e seu universo de valores de entrada, é possível traduzir um valor real em termos lingüísticos aplicando a transformação de variáveis, a Nebulização, conforme  exemplificado na  Figura 4.5, que apresenta a conversão do valor de 32 metros de altura do Nível da Piscina para o valor de 60% Médio e 40% Alto, e na Figura 4.6, que apresenta a conversão do valor – 0,8 cm/s da variável Variação do Nível da Piscina para o valor de 30% Negativa e 70% Nula. 
 26 BAIXOBAIXOBAIXOBAIXOMÉDIOMÉDIOMÉDIOMÉDIOALTOALTOALTOALTO1.0
1.0
1.0
1.0
0.8
0.8
0.8
0.8
0.6
0.6
0.6
0.6
BAIXOBAIXOBAIXOBAIXOBAIXOMÉDIOMÉDIOMÉDIOMÉDIOMÉDIOALTOALTOALTOALTOALTO1.0
1.0
1.0
1.0
1.0
0.4
0.4
0.4
0.4
0.8
0.8
0.8
0.8
0.8
0.2
0.2
0.2
0.2
0.6
0.6
0.6
0.6
0.6
000020202020252525253030303035353535404040400.4
0.4
0.4
0.4
0.4
BAIXOBAIXOBAIXOBAIXOMÉDIOMÉDIOMÉDIOMÉDIOALTOALTOALTOALTO0.2
0.2
0.2
0.2
0.2
1.0
1.0
1.0
1.0
000000.8
0.8
0.8
0.8
2020202020252525252530303030303535353535404040404032 m32 m32 m0.6
0.6
0.6
0.6
h, Nível da Piscina [m]h, Nível da Piscina [m]0.4
0.4
0.4
0.4
0.2
0.2
0.2
0.2
00002020202025252525303030303535353540404040H, Nível da Piscina [m]H, Nível da Piscina [m] Figura 4.5. Nebulização da variável de entrada Nível da Piscina. 
NEGATIVANEGATIVANEGATIVANULANULANULAPOSITIVAPOSITIVAPOSITIVA1.0
1.0
1.0
0.8
0.8
0.8
0.6
0.6
0.6
NEGATIVANEGATIVANEGATIVANEGATIVANULANULANULANULAPOSITIVAPOSITIVAPOSITIVAPOSITIVA0.4
0.4
0.4
1.0
1.0
1.0
1.0
0.8
0.8
0.8
0.8
0.2
0.2
0.2
0.6
0.6
0.6
0.6
000-5,0-5,0-5,0-2,5-2,5-2,50002,52,52,55,05,05,00.4
0.4
0.4
0.4
NEGATIVANEGATIVANEGATIVANULANULANULAPOSITIVAPOSITIVAPOSITIVA0.2
0.2
0.2
0.2
1.0
1.0
1.0
00002,52,52,52,50.8
0.8
0.8
-5,0-5,0-5,0-5,0-2,5-2,5-2,5-2,500005,05,05,05,0-0,8 cm/s-0,8 cm/s-0,8 cm/s-0,8 cm/s.
.
.
h, Variação do Nível da Piscina [cm/s]h, Variação do Nível da Piscina [cm/s]h, Variação do Nível da Piscina [cm/s]0.6
0.6
0.6
0.4
0.4
0.4
0.2
0.2
0.2
000-5,0-5,0-5,0-2,5-2,5-2,52,52,52,50005,05,05,0.
.
.
H, Variação do Nível da Piscina [cm/s]H, Variação do Nível da Piscina [cm/s]H, Variação do Nível da Piscina [cm/s] Figura 4.6. Nebulização da variável de entrada Variação do Nível da Piscina. 
O mesmo processo de definição de variáveis lingüísticas e de conjuntos nebulosos deve ser realizado para as variáveis de saída, de forma que estas sejam expressas em termos lingüísticos e cobrindo o universo conhecido para o atuador. 
 27 4.1.2  Base de Regras do tipo Mamdani Uma vez definidas as variáveis nebulosas de entrada e saída referentes a um determinado processo  é  possível  codificar  o  conhecimento  sobre  tal  por  meio  de  regras  lingüísticas condicionais, com a estrutura “Se <condição>, Então <conseqüência>”. Assim, para uma dada condição  de  ativação  de  uma  variável  de  entrada,  em  que  esta  possua  qualquer  valor  de pertinência diferente de zero em algum de seus conjuntos nebulosos, a conseqüência é a ativação de algum conjunto nebuloso de uma variável de saída, conforme definido pela regra lingüística. 
Considerando  o  exemplo  da  seção  anterior,  um  exemplo  de  regra  lingüística  é  apresentado  a seguir: “Se o Nível da Piscina é Alto, Então a Rotação da Bomba é Alta.” 
Esta regra aciona o conjunto nebuloso Alta da variável de saída Rotação da Bomba quando a variável Nível da Piscina possuir o conjunto Alto ativo. A partir daí, a associação de diversas regras lingüísticas compõe a Base de Regras, que determina o comportamento do sistema. Assim, dando  continuidade  ao  exemplo  da  seção  anterior,  é  possível  construir  um  sistema  nebuloso usando as mesmas duas variáveis de entrada propostas ativando uma variável de saída Rotação da  Bomba,  com  o  objetivo  de  manter  o  Nível  da  Piscina  com  a  maior  pertinência  possível  no conjunto Médio. Isso poderia ser obtido segundo a seguinte Base de Regras: 1.  Se o Nível da Piscina é Baixo, Então a Rotação da Bomba é Baixa (Peso 2). 
2.  Se o Nível da Piscina é Médio, Então a Rotação da Bomba é Média (Peso 2). 
3.  Se o Nível da Piscina é Alto, Então a Rotação da Bomba é Alta (Peso 2). 
4.  Se a Variação do Nível da Piscina é Negativa, Então a Rotação da Bomba é Baixa (Peso 1). 
5.  Se a Variação do Nível da Piscina é Nula, Então a Rotação da Bomba é Média (Peso 1). 
6.  Se a Variação do Nível da Piscina é Positiva, Então a Rotação da Bomba é Alta (Peso 1). 
Através  desta  Base  de  Regras,  a  leitura  do  Nível  da  Piscina  garantiria  que  quando  este começasse  a  subir  em  direção  ao  limite  superior,  LS,  a  BCS  seria  acionada  com  uma  maior rotação  e  consequentemente  com  maior  vazão,  reduzindo  então  o  volume  de  óleo  na  piscina  e fazendo o nível manter o conjunto Médio ativo. O mesmo raciocínio se aplica para o abaixamento do nível.  
Já a Variação do Nível segue a lógica de que se o nível diminuir (conjunto Negativa), deve-se  também  reduzir  a  rotação  para  que  se  reduza  a  vazão  de  saída,  equilibrando  o  balanço  de  28 massa no transiente. Com isso, a redução de nível se daria vagarosamente, de forma a minimizar os efeitos no transiente – o que também funciona para o raciocínio inverso, de aumento de nível.  
No entanto, no caso de manipulação da bomba através da variável Variação do Nível, trata-se de uma variável auxiliar, uma vez que seu status direto não necessariamente significa que seja necessária  a  atuação  apresentada  na  Base  de  Regras.  Isto  ocorrerá,  por  exemplo,  quando  a Variação do Nível for Negativa e o Nível for Alto – neste caso, a saída desejada para a Rotação da Bomba é sim Alta, o que estabilizará o sistema. Claro que tão logo a  correção de nível seja realizada,  caso  a  variação  se  mantenha  no  status  de  negativa,  desejar-se-á  reduzir  a  vazão  de saída. Assim, para conciliar as regras conflitantes, foi considerada uma diferença no peso entre as regras, provendo maior importância para as regras onde há a avaliação da variável crítica (peso 2) e menor para a variável auxiliar (peso 1). 
A  fim  de  ilustrar  a  aplicação  dos  pesos  das  regras  no  sistema,  considere  os  conjuntos nebulosos ativos no exemplo da seção anterior e a Base de Regras proposta. Há quatro conjuntos nebulosos  ativos  nas  variáveis  de  entrada,  o  que  implica  na  ativação  de  quatro  regras,  com diferentes graus de ativação. Assim, é obtido o seguinte resultado de saída: 1) Conjunto Médio da variável Nível da Piscina, com pertinência 0,6. 
Esta condição ativa a regra 2, ativando a variável de saída Rotação da Bomba no conjunto Média. O grau de ativação é a pertinência ativa da entrada vezes o peso da regra: Pertinência 0,6 x Peso 2 = Grau de ativação 1,2 2) Conjunto Alto da variável Nível da Piscina, com pertinência 0,4. 
Esta ativa a regra 3, ativando o conjunto Alta.  
Pertinência 0,4 x Peso 2 = Grau de ativação 0,8 3) Conjunto Negativa da variável Variação do Nível da Piscina, com pertinência 0,3. 
Esta ativa a regra 4, ativando o conjunto Baixa.  
Pertinência 0,3 x Peso 1 = Grau de ativação 0,3 4) Conjunto Nula da variável Variação do Nível da Piscina, com pertinência 0,7. 
Finalmente, a última condição ativa a regra 5, ativando também o conjunto Média.  
Pertinência 0,7 x Peso 1 = Grau de ativação 0,7 Assim as saídas ativas são apresentadas na Tabela 4.1. 
 29 Tabela 4.1. Aplicação da Base de Regras a uma entrada ativa. 
Variável de Conjunto Regra Variável de saída Rotação da Bomba Rotação da Bomba Rotação da Bomba Rotação da Bomba Conjunto acionado Grau de ativação Pertinência Peso Entrada Nível da Piscina Nível da Piscina Variação do Nível Variação do Nível ativo acionada 0,6 2 2 1,2 Médio Média 0,4 3 2 0,8 Alto Alta 0,3 4 1 0,3 Negativa Baixa Nula 0,7 5 1 0,7 Média O grau de ativação total do sistema é a soma das parcelas ativadas por cada regra: 1,2 + 0,8 + 0,3  + 0,7 = 3,0. Com  os graus de  ativação calculados, é possível descobrir a pertinência dos conjuntos nebulosos de saída ativos, através da ponderação do valor relativo com o total. Assim, para  a  variável  de  saída  Rotação  da  Bomba,  os  conjuntos  ativos  (Baixa,  Média  e  Alta)  têm  a pertinência dada por: 3,00,3=10,0Baixa)  2,10,37,00,39,10,3+==63,0Média)  8,00,3=27,0Alta)      O resultado para a saída nestas condições é a figura geométrica representativa da variável Rotação da Bomba, apresentada na Figura 4.7. 
BAIXABAIXABAIXAMÉDIAMÉDIAMÉDIAALTAALTAALTA1.0
1.0
1.0
0.8
0.8
0.8
0.6
0.6
0.6
0.4
0.4
0.4
0.2
0.2
0.2
000505050525252545454565656585858F, Rotação da Bomba [Hz]F, Rotação da Bomba [Hz] Figura 4.7. Representação da variável de saída ativada pelas entradas exemplificadas. 
 30 O processo de aplicação das regras é representado na Figura 4.8, onde as contribuições para cada  conjunto  nebuloso  de  saída  são  apresentadas  separadamente  à  direita,  com  as  respectivas condições de entrada que ativaram a saída. 
BAIXOBAIXOBAIXOBAIXOBAIXOMÉDIOMÉDIOMÉDIOMÉDIOMÉDIOALTOALTOALTOALTOALTO1.0
1.0
1.0
1.0
1.0
0.8
0.8
0.8
0.8
0.8
1)1)0.6
0.6
0.6
0.6
0.6
0.4
0.4
0.4
0.4
0.4
BAIXABAIXABAIXABAIXAMÉDIAMÉDIAMÉDIAMÉDIAALTAALTAALTAALTA0.2
0.2
0.2
0.2
0.2
1.0
1.0
1.0
1.0
0.8
0.8
0.8
0.8
00000202020202025252525253030303030353535353540404040400.6
0.6
0.6
0.6
4)4)BAIXOBAIXOBAIXOBAIXOBAIXOMÉDIOMÉDIOMÉDIOMÉDIOMÉDIOALTOALTOALTOALTOALTO0.4
0.4
0.4
0.4
1.0
1.0
1.0
1.0
1.0
0.2
0.2
0.2
0.2
0.8
0.8
0.8
0.8
0.8
2)2)00000.6
0.6
0.6
0.6
0.6
50505050525252525454545456565656585858580.4
0.4
0.4
0.4
0.4
BAIXABAIXABAIXABAIXAMÉDIAMÉDIAMÉDIAMÉDIAALTAALTAALTAALTA0.2
0.2
0.2
0.2
0.2
1.0
1.0
1.0
1.0
000001)1)++3)3)202020202025252525253030303030353535353540404040400.8
0.8
0.8
0.8
0.6
0.6
0.6
0.6
H, Nível da Piscina [m]H, Nível da Piscina [m]H, Nível da Piscina [m]0.4
0.4
0.4
0.4
0.2
0.2
0.2
0.2
NEGATIVANEGATIVANEGATIVANEGATIVANULANULANULANULAPOSITIVAPOSITIVAPOSITIVAPOSITIVA1.0
1.0
1.0
1.0
000050505050525252525454545456565656585858580.8
0.8
0.8
0.8
3)3)BAIXABAIXABAIXABAIXAMÉDIAMÉDIAMÉDIAMÉDIAALTAALTAALTAALTA0.6
0.6
0.6
0.6
1.0
1.0
1.0
1.0
0.4
0.4
0.4
0.4
0.8
0.8
0.8
0.8
0.2
0.2
0.2
0.2
2)2)0.6
0.6
0.6
0.6
00005,05,05,05,0-5,0-5,0-5,0-5,0-2,5-2,5-2,5-2,500002,52,52,52,50.4
0.4
0.4
0.4
0.2
0.2
0.2
0.2
NEGATIVANEGATIVANEGATIVANEGATIVANULANULANULANULAPOSITIVAPOSITIVAPOSITIVAPOSITIVA00001.0
1.0
1.0
1.0
50505050525252525454545456565656585858580.8
0.8
0.8
0.8
4)4)F, Rotação da Bomba [Hz]F, Rotação da Bomba [Hz]F, Rotação da Bomba [Hz]0.6
0.6
0.6
0.6
0.4
0.4
0.4
0.4
0.2
0.2
0.2
0.2
00005,05,05,05,0-2,5-2,5-2,5-2,5-5,0-5,0-5,0-5,0.
.
.
H, Variação do Nível da Piscina [cm/s]H, Variação do Nível da Piscina [cm/s]H, Variação do Nível da Piscina [cm/s]2,52,52,52,50000 Figura 4.8. Representação da aplicação da Base de Regras para uma entrada dada. 
Outra forma de aplicar a Base de Regras é utilizando a associação de entradas na mesma regra. Lingüisticamente, a associação de regras ou variáveis se dá através dos operadores E e OU, enquanto que matematicamente são computadas segundo a Tabela 4.2. 
 31 Tabela 4.2. Implementações mais comuns de operadores lógicos E e OU. 
 E OU max( p + q - 1,0) min( p + q , 1 ) p + q – (p · q) Max( p , q ) Lukasiewicz Probabilístico p · q min( p , q ) Zadeh Pela  tabela,  é  possível  exemplificar  tomando  uma  situação  arbitrária.  Considere  que  na Base  de  Regras  anteriormente  apresentada,  o  efeito  da  oscilação  do  nível  apenas  fosse considerado  em  condições  específicas  do  nível  da  piscina,  de  forma  a  melhor  caracterizar  uma condição e conseqüentemente melhor controlar a resposta. Neste caso, a Base de Regras poderia ser reconstruída para o seguinte formato: 1.  Se o Nível da Piscina é Médio, Então a Rotação da Bomba é Média (Peso 1). 
2.  Se o Nível da Piscina é Baixo E a Variação do Nível da Piscina é Positiva, Então a Rotação da Bomba é Média (Peso 2). 
3.  Se o Nível da Piscina é Baixo E a Variação do Nível da Piscina NÃO é Positiva, Então a Rotação da Bomba é Baixa (Peso 2). 
4.  Se o Nível da Piscina é Alto E a Variação do Nível da Piscina é Negativa, Então a Rotação da Bomba é Média (Peso 2). 
5.  Se o Nível da Piscina é  Alto E a Variação do  Nível da Piscina NÃO  é Negativa, Então  a Rotação da Bomba é Alta (Peso 2). 
Nas  regras  apresentadas  aparece  também  o  operador  NÃO,  que  tem  a  função  de  ativar  a regra com o complemento do valor de pertinência do conjunto em questão, ou seja, se o conjunto é acionado com pertinência 0,3, este é não acionado em 0,7, de forma que este segundo valor é usado no cômputo do grau de ativação. 
Retomando o exemplo anterior e considerando a mesma entrada (Nível da Piscina com 0,6 em Médio e 0,4 em Alto e Variação do Nível da Piscina com pertinência igual a 0,3 em Negativa e 0,7 em Nula), as regras ativas seriam as de número 1, 4 e 5, pois: •  A  regra  de  número  1  possui  a  entrada  ativa  (Nível  da  Piscina  em  Médio)  com pertinência de 0,6;  •  A  regra  4  possui  ativos  o  Nível  da  Piscina  em  Alto  com  0,4  de  pertinência  e  a Variação do Nível da Piscina em Negativa com 0,3;  •  A regra 5 possui ativo o Nível da Piscina em Alto com 0,4 e possui NÃO ativa a Variação do Nível da Piscina em Negativa com 0,7; Para  associar  as  duas  entradas  acionadas  nas  regras  4  e  5,  é  necessário  usar  alguma  das regras  para  o  operador  E.  Tomando  ambos  os  casos  e  aplicando  cada  um  dos  critérios,  as pertinências totais de entrada ficam:  32 Regra 4) •  Lukasiewicz: max (0,4 + 0,3 - 1 ; 0) = max (-0,3 ; 0) = 0 •  Probabilístico: 0,4 · 0,3 = 0,12 •  Zadeh: min (0,4 ; 0,3) = 0,3 Regra 5) •  Lukasiewicz: max (0,4 + 0,7 - 1 ; 0) = max (0,1 ; 0) = 0,1 •  Probabilístico: 0,4 · 0,7 = 0,28 •  Zadeh: min (0,4 ; 0,7) = 0,4 Verificam-se os diferentes níveis de conservadorismo adotados por cada critério, de forma que  cada  um  pode  ser  usado  de  acordo  com  a  necessidade  de  cada  sistema.  No  caso  desta segunda Base de Regras, como a associação das duas variáveis de entrada permitiram tratar cada condição independentemente, as alternativas configuradas são as condições críticas do sistema, e por isso o peso maior frente à regra de número 1. Então, de forma a reforçar a importância das regras  associativas,  escolhe-se  o  critério  que  permite  o  maior  aumento  de  pertinência  e conseqüentemente o acionamento mais rápido – o critério de Zadeh.  
Finalmente, o grau de ativação das regras é dado pela Tabela 4.3. 
Tabela 4.3. Aplicação da Base de Regras usando entradas associativas. 
Regra Variável de Conjunto Variável de saída Rotação da Bomba Conjunto acionado Grau de ativação Peso Pertinência acionada Entrada Nível da Piscina Nível da Piscina Variação do Nível Nível da Piscina Variação do Nível ativo 0,6 1 1 1 Médio Média 0,4 Alto Rotação da Bomba 0,3 4 2 0,6 Média 0,3 Negativa 0,4 Alto Rotação da Bomba 0,8 0,4 5 2 Alta 0,7 NÃO Negativa A saída do sistema com esta nova Base de Regras pode então ser calculada, de forma que a Rotação da Bomba é representada pela condição:  33 +6,00,1++6,14,2==67,01.  Média com pertinência de  8,06,00,18,08,04,2==33,02.  Alto com pertinência de  ++8,06,00,14.1.3  Desnebulização para sistemas Mamdani Com o valor das pertinências dos conjuntos nebulosos das variáveis de saída calculados, o próximo passo é realizar a Desnebulização de forma a calcular o valor da variável no domínio do tempo para então acionar o sistema. Considerando as variáveis tomadas como exemplo na seção anterior, pode-se ilustrar o processo segundo a Figura 4.9. Repare que h é o Nível da Piscina,  h&  é a  Variação  do  Nível  da  Piscina  e  f  é  a  Rotação  da  Bomba,  de  forma  que  as  letras  minúscula representa a variável no domínio do tempo, o domínio real, e as letras maiúsculas representam as variáveis no domínio nebuloso. 
Domínio NebulosoDomínio NebulosoDomínio RealDomínio RealDomínio RealDomínio RealhhHHNível da PiscinaNível da PiscinaffFFRotação da BombaRotação da Bombah&h&H&H&Variação do NívelVariação do NívelBase de Base de RegrasRegrasNebulizaçãoNebulizaçãoDesnebulizaçãoDesnebulização Figura 4.9. Processo de conversão de variáveis exemplo do VASPS para o domínio nebuloso. 
Da mesma forma que no processo de nebulização, também é necessário definir o intervalo de discurso para a variável de saída. No caso do nosso exemplo, isso pode ser feito utilizando-se a expressão para  a equação da curva da bomba  apresentada no Capítulo 3, Equação (3.1), bem como a curva de vazão de entrada, apresentada através do Gerador de Golfadas, na Figura 3.1 e na Figura 3.2. Considerando que é necessário acionar a bomba com uma freqüência que permite uma vazão de saída média que garanta o balanço de massa, é possível definir uma vazão igual à média  do  patamar  inferior  de  vazão  do  gerador  de  golfadas,  algo  em  torno  de  750  m³/d.  Os acionamentos  superiores  serviriam  então  para  compensar  as  golfadas,  e  os  acionamentos inferiores, para compensar a redução do nível causada pelos acionamentos sucessivos. 
 34 Assim,  substituindo  o  valor  de  750  m³/d  na  Equação  (3.1),  obtém-se  uma  freqüência  de acionamento  de  aproximadamente  54  Hz  –  esta  freqüência  funcionará  como  o  centro  de  faixa. 
Então,  considerando  a  oscilação  de  vazão  entre  500  e  1000  m³/d,  os  valores  de  acionamento encontrado estão respectivamente pouco acima de 52 Hz e pouco abaixo de 56 Hz. Estes são os valores  ideais  com  que  a  bomba  deveria  trabalhar.  No  entanto,  nos  casos  mais  críticos,  estes valores de vazão apenas equilibrarão a vazão de entrada com a de saída, de forma que o nível se manteria  estático  em  um  nível  específico.  É  desejado  que  haja  a  possibilidade  de  correção  do nível  da  piscina,  o  que  doravante  exige  o  acionamento  mais  crítico  da  bomba.  Tomando  os acionamentos  de  250  m³/d  e  1200  m³/d,  de  forma  a  prover  uma  velocidade  de  correção apropriada, são encontrados os valores críticos de acionamento da bomba, 50 Hz e 58 Hz. Claro que  tão  embora  estes  estejam  no  universo  de  discurso,  é  desejado  que  não  ocorra  nenhum acionamento nestes patamares. 
Assim, com o intervalo da variável de saída definido, deve-se determinar a desnebulização. 
Há  diversos  métodos  para  tratar  este  processo.  Comumente  estes  são  métodos  geométricos, imaginando  que  os  conjuntos  nebulosos  de  saída  compõem  uma  figura  com  área  calculável. 
Assim, há tentativas de se encontrar o valor numérico em torno do qual esta figura se localiza, seja através do centro de massa (COG), do centro de área (COA), do pico da figura geométrica formada (MOM) ou desprezando parcelas de menores valores de pertinên •  Centro de Gravidade (COG): calcula o centro de massa, (média ponderada) da figura. 
∫∫µF)(xxdx=()x(4.3) 
cogF µF)(dxxx•  Centro de Gravidade discreto (COG): a mesma técnica pode ser utilizada quando a função de pertinência é discretizada, utilizando-se a variável q como índice para a discretização. 
∑∑NµFµF()xxqq=1Nqq=()cogF(4.4) 
 ()xq=1qq•  Centro  de  Gravidade  indexado  (ICOG):  calcula  o  centro  de  gravidade  considerando apenas  a  região  que  possui  valor  de  pertinência  igual  ou  acima  de  um  dado  parâmetro,  35 chamado de α. No exemplo, a função cut representa a remoção de área com pertinência menor que α. 
=−∩αα,)α,))(((icogFcogFFcut(4.5) 
 •  Média do Máximo (MOM): calcula o ponto onde a região de valor de pertinência máximo (pico) é dividida pela metade. 
=(mom)(,())FicogFhgtF(4.6) 
 •  Centro de Área (COA): calcula o ponto onde a área para desnebulização é dividida pela metade.  Na  equação,  as  funções  inf(x)  e  sup(x)  representam,  respectivamente,  o  valor inferior e o valor superior da abscissa no intervalo avaliado. 
supXx)FµFx(coa∫∫µF)F=)(dxx)(xdx(4.7) 
 infX(coaA  Figura  4.10  ilustra  a  aplicação  dos  métodos  de  desnebulização  apresentados  para  a variável de saída obtida nos exemplos desenvolvidos ao longo deste capítulo.  
a) COG contínuo (Centro de Gravidade)a) COG contínuo (Centro de Gravidade)b) COA (Centro de Área)b) COA (Centro de Área)1.0
1.0
1.0
1.0
1.0
1.0
.
.
).
).
0.8
0.8
0.8
0.8
0.8
0.8
))hhhh((hhhh((,,,,0.6
0.6
0.6
0.6
0.6
0.6
FFµµFFµµ0.4
0.4
0.4
0.4
0.4
0.4
GGG0.2
0.2
0.2
0.2
0.2
0.2
00000054 Hz54 Hz54545454,5 Hz54,5 Hz505050525252545454565656585858505050525252565656585858f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]c) COG indexado em 20%c) COG indexado em 20%d) MoM (Média do Máximo)d) MoM (Média do Máximo)1.0
1.0
1.0
1.0
1.0
1.0
).
).
.
.
0.8
0.8
0.8
0.8
0.8
0.8
hh,,hh(())hh,,hh((0.6
0.6
0.6
0.6
0.6
0.6
FFµµFFµµα = 20%α = 20%α = 20%0.4
0.4
0.4
0.4
0.4
0.4
GGG0.2
0.2
0.2
0.2
0.2
0.2
00000055 Hz55 Hz54 Hz54 Hz545454505050525252545454565656585858505050525252565656585858f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz]f, Rotação da Bomba [Hz] Figura 4.10. Técnicas de desnebulização aplicadas ao exemplo, com o valor de saída destacado. 
 36 4.1.4  Sistemas do tipo Sugeno Outro tipo de sistema nebuloso encontrado comumente na literatura e usado neste trabalho, é o sistema com regras do tipo Sugeno, como apresentado em Tanaka e Sugeno (1992) e Takagi e Sugeno (1985). Neste sistema, não são usados conjuntos nebulosos na saída, mas sim constantes ou funções das variáveis de entrada. Assim, a representação de uma regra poderia ser dada por: Se o Nível da Piscina é Baixo, Então a Rotação da Bomba deve ser igual a 54Hz. 
Matematicamente falando, e denotando o conjunto nebuloso Baixo por HB: 54=Se H é HB, Então . 
fHzNote que não há conjunto nebuloso de saída. No entanto, a definição de uma função para uma  dada  regra  permite  a  interpolação  de  diversas  funções  lineares  simples  para  obter  um resultado  não  linear  complexo,  ou  uma  representação  não  linear  de  um  sistema  com funcionamento linear em diversas regiões.  
Assim, retomando o último exemplo de Base de Regras, apresentado no formato Mamdani, é possível convertê-la para Sugeno através da definição de valores constantes de acionamento da saída (Rotação da Bomba) para cada regra, de forma que esta poderia ser expressa da seguinte maneira: 1.  Se o Nível da Piscina é Médio, Então a Rotação da Bomba é 54 Hz (Peso 1). 
2.  Se o Nível da Piscina é Baixo E a Variação do Nível da Piscina é Positiva, Então a Rotação da Bomba é 54 Hz (Peso 2). 
3.  Se o Nível da Piscina é Baixo E a Variação do Nível da Piscina NÃO é Positiva, Então a Rotação da Bomba é 50 Hz (Peso 2). 
4.  Se o Nível da Piscina é Alto E a Variação do Nível da Piscina é Negativa, Então a Rotação da Bomba é 54 Hz (Peso 2). 
5.  Se o Nível da Piscina é  Alto E a Variação do  Nível da Piscina NÃO  é Negativa, Então  a Rotação da Bomba é 58 Hz (Peso 2). 
Embora  os  valores  críticos  50  e  58  Hz  estejam  presentes  nas  regras,  estes  não  serão diretamente acionados, uma vez que o grau de pertinência toma valores progressivos, permitindo o  uso  parcial  do  valor  crítico.  Para  o  entendimento,  vide  abaixo  na  Tabela  4.4  a  aplicação  das regras  à  mesma  condição  anterior  de  acionamento  da  entrada  usando  o  critério  associativo  de Zadeh. 
 37 Tabela 4.4. Aplicação da Base de Regras Sugeno. 
Regra Variável de Conjunto Variável de saída Rotação da Bomba Valor Grau de ativação Peso Pertinência acionada Entrada Nível da Piscina Nível da Piscina Variação do Nível Nível da Piscina Variação do Nível ativo acionado 1 0,6 1 1 54 Hz Médio 0,4 Alto Rotação da Bomba 0,6 0,3 4 2 54 Hz 0,3 Negativa 0,4 Alto Rotação da Bomba 0,4 5 2 0,8 58 Hz 0,7 NÃO Negativa Com os graus de ativação em mãos, é possível realizar a desnebulização. Como as saídas são dadas em função de constantes, o valor final da saída é dado então pela média ponderada dos valores de acionamento pelos respectivos graus de ativação: ⋅+54)6,00,1(++8,06,00,1⋅588,08,1324,2==Hz3,55Rotação da Bomba é igual a  +Diferentemente  dos  sistemas  Mamdani,  os  sistemas  Sugeno  já  provêem  a  resposta  no domínio real diretamente, por tratar de valores numéricos reais. Entretanto, caso as variáveis de saída fossem expressas em termos de funções lineares, haveria outra forma de computar a saída, também  baseado  em  médias  ponderadas,  mas  como  não  este  artifício  não  será  usado  neste trabalho, esta situação também não será aqui introduzida. 
4.2 
Introdução à Teoria de Controle Um  sistema  é  representado  por  suas  equações  diferenciais,  modelado  de  acordo  com  a dinâmica física que este apresenta. É considerado como sistema qualquer fenômeno que possa ser representado  por  uma  equação  –  a  trajetória  de  um  projétil  quando  este  é  disparado,  o comportamento do nível de um tanque em função de suas vazões de entrada e saída ou a vazão de saída de uma bomba em função da rotação de seu rotor e da carga a que está submetida. Assim, um sistema responde com uma saída y(t) para uma dada entrada x(t), podendo ser ilustrado pela Figura 4.11.  
x(t)x(t)y(t)y(t)SISTEMASISTEMA Figura 4.11. Representação de um sistema em malha aberta. 
 38 Diz-se  que  um  sistema  está  em  malha  aberta,  quando  sua  saída  y(t)  não  é  usada  para controlar sua entrada, ou seja, quando o cômputo do sinal de entrada x(t) independe do valor de saída que o sistema apresentou. Por outro lado, se o valor da saída é monitorado e deve atingir um dado alvo, um valor desejado, é possível calcular o erro que a saída apresentou em relação a esta referência, de forma que o valor de entrada x(t+1) para o sistema é corrigido na expectativa de se reduzir o erro causado pelo valor anterior de saída. Este processo configura o sistema em malha fechada. 
A teoria de controle clássico prevê que o sistema controlado deve ser um sistema em malha fechada.  Assim,  os  sistemas  controlados  possuem,  além  do  bloco  representando  o  fenômeno físico  em  questão,  chamado  de  Planta,  o  bloco  referente  ao  Controlador,  que  irá  realizar  o cálculo corretivo do valor de entrada do processo no próximo instante de tempo. O sistema em malha fechada é então representado pelo diagrama de blocos da Figura 4.12. 
r(t)r(t)e(t)e(t)u(t)u(t)y(t)y(t)CONTROLADORCONTROLADORPLANTAPLANTA+ -+ - Figura 4.12. Diagrama de blocos para um sistema em malha fechada. 
Além  dos  dois  blocos,  que  possuem  cada  um  sua  dinâmica  representada  por  equações diferenciais, há os sinais característicos deste tipo de sistema, a saber: •  r(t): sinal de referência, ou set point. O sistema deve ser forçado a retornar o seu sinal de saída para o valor de referência por atuação do controlador. No sistema VASPS, o sinal de referência é o nível desejado de líquido na piscina; •  e(t): sinal de erro. É a diferença entre o sinal de referência e o sinal de saída; •  u(t): sinal de controle, ou esforço de controle. É o sinal que corrige o processo para que este retorne à referência. A variável que sofre a ação de controle é encontrada no atuador, e é chamada de variável manipulada. No VASPS, a variável manipulada é a freqüência de rotação da BCS, que é diretamente relacionada com a vazão de saída de líquido. 
•  y(t):  sinal  de  saída.  É  um  valor  medido  no  processo  que  indica  seu  status.  A  variável medida é a variável controlada. No caso, o nível real (medido) da piscina. 
 39 O problema de controle tradicional tem o objetivo de fazer a saída y(t) se comportar de uma forma  desejada  através  da  manipulação  do  sinal  de  controle  u(t).  Esta  forma  desejada  é  ditada pela  referência  r(t),  de  forma  que  o  erro  e(t)  seja  minimizado.  Na  literatura  também  é  comum encontrar  referências  ao  problema  do  regulador,  que  nada  mais  é  que  realizar  o  problema  de controle  para  um  sinal  de  referência  r(t)  constante,  sendo  usualmente  nulo.  Diversos  exemplos podem ser encontrados na literatura, como Ogata (1996) e Skogestad e Postlethwaite (1996).  
No  caso  do  VASPS,  a  Planta  é  dada  pela  dinâmica  de  variação  do  nível  da  piscina, apresentada no Capítulo 3 pela Equação (3.4), que é função das vazões de entrada (golfadas) e saída (vazão da BCS) de líquido.  
A vazão de entrada funciona como um distúrbio no sistema, causando oscilações no sinal de saída, y(t), representado pelo nível da piscina. Este sinal de distúrbio é conjugado na dinâmica de  variação  do  nível  com  a  vazão  de  saída,  que  é  acionada  pela  saída  do  controlador,  estando, portanto,  relacionada  com  o  sinal  de  controle,  u(t).  A  modelagem  do  sistema  de  controle  será discutida com mais detalhes no Capítulo 5 usando a modelagem física apresentada no Capítulo 3. 
Em  suma,  o  distúrbio  de  entrada  provoca  flutuações  na  variável  controlada,  que,  no controle clássico, devem ser suavizadas a fim de melhorar o desempenho do sistema. Neste caso de controle clássico, o desempenho do sistema poderia ser entendido como a manutenção de um patamar de vazão restrito à garantia da eficiência de separação. No caso do sistema VASPS, onde são utilizadas também outras técnicas que não o controle clássico, como visto mais adiante, além deste objetivo de controle, outro será abordado – a minimização do esforço de controle sobre a bomba. Isso se deve ao fato de que, conforme relatado em Peixoto et al. (2005) e no Capítulo 3, o atuador é um componente crítico do sistema que afeta a estratégia de controle a ponto de redefinir o conceito do controlador. 
A  manipulação  dos  sinais  apresentados  na  forma  de  equações  diferenciais  tem  uma complexidade matemática inerentemente alta. O sistema controlado em si é expresso por meio da convolução das equações diferenciais do controlador e da planta, e suas soluções temporais são na forma de funções senoidais e exponenciais, que representam a oscilação da resposta y(t) a uma dada  excitação  u(t)  na  planta.  Para  evitar  um  esforço  desnecessariamente  alto,  é  importante realizar a transformação do domínio do tempo para algum outro que facilite a análise matemática do  comportamento  do  sistema.  Uma  ferramenta  adequada  para  esta  tarefa  é  a  Transformada  de Laplace,  que  transfere  o  domínio  do  tempo  para  um  domínio  alternativo  na  variável  ‘s’,  o  que  40 torna  as  funções  diferenciais  em  funções  algébricas  simples.  Operações  de  diferenciação  e integração  são  substituídas  por  operações  algébricas  no  plano  complexo,  e  as  soluções  das equações  algébricas  em  ‘s’  fornecem  as  soluções  transiente  e  estacionária  das  equações diferenciais por meio das transformadas inversas de Laplace.  
Sabendo que um ‘sistema’ responde com uma saída y(t) para uma excitação x(t), e levando em  conta  que  este  pode  ser  expresso  em  formas  algébricas  simples  no  domínio  de  Laplace, define-se  a  Função  de  Transferência  (FT)  como  a  relação  entre  a  saída  de  um  sistema  e  sua entrada  no  domínio  da  variável  ‘s’.  O  conceito  de  Função  de  Transferência  (FT)  é  importante uma vez que a variável ‘s’ representa o domínio das freqüências, e consequentemente um dado valor  de  ‘s’  possui  a  informação  a  respeito  da  amplitude  de  oscilação  do  sistema  para  uma excitação  naquela  freqüência  específica.  Isso  permite  uma  série  de  benefícios  no  tratamento  de sistemas de controle: •  É possível saber as freqüências em que há máxima amplitude de oscilação no sistema a partir  do  gráfico  de  resposta  em  freqüência,  que  nada  mais  é  do  que  o  valor  da  FT variando-se  o  ‘s’  em  um  intervalo.  Estas  freqüências  são  identificadas  como  valores singulares e freqüência de ressonância (ou freqüência natural); •  É  possível  definir  conceitos  importantes  para  a  realimentação  em  malha  fechada,  como largura  de  banda  (freqüências  nas  quais  o  sistema  deve  operar)  e  a  amplitude  dos  picos das FTs (maior oscilação transiente da resposta do sistema); •  As  FTs  permitem  avaliar  a  resposta  da  planta,  controlada  ou  não,  a  uma  excitação qualquer definida, tão embora não forneça nenhuma relação pertinente  à estrutura física do sistema; •  A avaliação de sistemas em série é rapidamente obtida pela multiplicação das FTs, em vez das complicadas integrais de convolução necessárias no domínio do tempo; •  Os  pólos  e  zeros,  respectivamente  os  pontos  singulares  (quando  a  resposta  tende  ao infinito) e pontos nulos, do sistema aparecem explicitamente nas FTs, através das raízes dos polinômios de seu denominador e numerador. 
Assim, retomando o conceito de malha de controle e tendo em mãos as FT’s da Planta e do controlador,  é  possível  exemplificar  uma  possível  malha  de  controle  para  o  VASPS  segundo  o  41 diagrama de blocos da Figura 4.13. A variável controlada (o Nível) seria então regida de acordo com  a  Equação  (3.4),  e  a  curva  da  bomba  BCS,  não  linear,  de  acordo  com  a  Equação  (3.1), conforme proposto nos trabalhos de Teixeira et al. (2004) e Wang et al. (2001).  
  SetPoint++Curva da Curva da bombabombaSetPointde Nívelde NívelControladorControladorDinâmica Dinâmica Dinâmica do Níveldo Níveldo Nível--Gerador de Gerador de GolfadasGolfadas Figura 4.13. Diagrama de blocos com o detalhamento da planta do sistema VASPS. 
Ainda  importantes  em  um  sistema  de  controle  são  os  conceitos  de  parâmetros  de desempenho.  Antes  de  explicá-los,  vale  dizer  que  os  controladores,  cuja  lógica  é  desenvolvida para minimizar o erro dentro de um limite de operação, são dispositivos de baixa potência que calculam  as  modificações  necessárias  para  um  dado  erro  de  entrada  e  amplificam  este  sinal  de saída,  u(t),  a  um  nível  suficientemente  alto  para  alimentar  o  atuador.  A  partir  daí,  o  atuador exerce uma ação sobre a planta que por sua vez responde com o sinal de saída, y(t). Assim, para a avaliação  dos  parâmetros  de  desempenho,  considere  um  sinal  de  resposta  qualquer  como  o apresentado na Figura 4.14. 
ymaxymaxymaxy(t→∞)y(t→∞)y(t→∞)PSS = PSS = PSS = y(t→∞)y(t→∞)r(t) = y(t→∞)r(t) = y(t→∞)y(t→∞)y(t→∞)y(t→∞)eest =eest =eest =- 1- 1- 1r(t)r(t)r(t)50% · y(t→∞)50% · y(t→∞)Treação.
Treação.
Testab.
Testab.
 Figura 4.14. Sinal de resposta com o destaque dos parâmetros de desempenho. 
 42 Os principais critérios para se avaliar se uma resposta atendeu a um determinado nível de desempenho são expressos em função de características da resposta. Estas características também são usadas na especificação de estratégias de controle. Basicamente, as principais características avaliadas são as seguintes: •  Tempo  de  reação:  tempo  necessário  para  que  a  resposta  atinja  o  valor  de  50%  do seu valor estacionário; •  Tempo  de  estabilização:  Tempo  necessário  para  que  o  valor  da  resposta  após oscilações se encaixe no intervalo de +5% a -5% de seu valor estacionário; •  Percentual de sobresinal (PSS): valor máximo (de pico) atingido pela resposta, em porcentagem relativa ao seu valor estacionário; •  Erro  estacionário:  divergência  em  porcentagem  entre  o  valor  estacionário  da resposta e o valor de referência recebido pelo sistema. 
Por  fim,  os  controladores  industriais  mais  comumente  utilizados  são  os  PIDs,  assim chamados  por  computarem  as  modificações  necessárias  para  a  planta  de  acordo  com  uma composição  dos  sinais  Proporcional  ao  erro,  Integral  do  erro  e  Derivada  do  erro.  Estes controladores  possuem  ganhos  ajustáveis  em  cada  um  destes  três  sinais,  de  forma  a  permitir  o ajuste  de  características  específicas  de  resposta  transiente  separadamente  e  serão  apresentados com mais detalhes na próxima seção.  
4.2.1  Controle PID O controle PID se baseia em utilizar o sinal de erro calculado através da realimentação da variável  controlada  real  na  entrada  do  sistema,  fechando  a  malha  de  controle  e  comparando-a com o valor de referência que deve seguir. Este erro alimenta o controlador, que integra e deriva este erro, somando estes três sinais após passarem por ganhos individuais, proporcional, integral e derivativo, conforme diagrama esquemático da Figura 4.15.  
PPr(t)r(t)e(t)e(t)u(t)u(t)y(t)y(t)++++∫∫PROCESSOPROCESSOII+ -+ -++dddtdtDD Figura 4.15. Diagrama esquemático de controle PID convencional. 
 43 O efeito dos três sinais na composição do sinal de controle  u(t) é suficiente para cobrir a maior parte dos problemas de controle, utilizando-se técnicas diferentes para ponderar os ganhos do controlador. Em suma, o ganho proporcional é responsável pelo tempo de resposta do sistema a uma dada entrada, provocando muitas oscilações e sobresinal no caso de este estar muito alto. 
O ganho integral é responsável por remover o erro estacionário do sistema, causando atrasos na resposta  para  ganhos  altos,  e  o  ganho  derivativo  remove  as  oscilações,  amortecendo  o  sistema, mas causando erro estacionário se muito alto. O cálculo do sinal de controle  u(t) e sua  FT são dados pela Equação (4.8). 
+⋅+⋅²KsKsKde⇒⋅dtKs∫pdi+⋅=⋅+=++⋅=(4.8) 
)(sKiKeKuedtKKsKpidpds O correto balanço no valor dos ganhos é chamado se ajuste ou sintonia do controlador PID, e  compreende  a  tarefa  mais  difícil  na  configuração  deste  tipo  de  controlador.  Há  técnicas  de projeto de controle PID, como a técnica de Ziegler-Nichols, onde um valor pré-ajustado para os ganhos é sugerido, de forma que o ajuste a ser realizado normalmente é apenas um ajuste fino em torno dos valores encontrados no projeto. No entanto, alguns controladores PID,  especialmente aqueles  em  que  se  deseja  alto  desempenho,  não  apresentam  o  desempenho  ótimo  com  esta técnica, exigindo um projeto analítico do controlador, realizado com base na FT do sistema e na alocação dos pólos do sistema controlado, conforme apresentado na literatura consagrada, como em Ogata (1996), onde diversos exemplos podem ilustrar o projeto de controlador PID. 
Para  sistemas  de  ordem  maior  é  necessário  o  auxílio  de  recursos  computacionais  e softwares especializados, pois o cálculo analítico torna-se muito complexo, tanto para o cômputo do controlador quanto para a identificação do sistema - que compreende descobrir a FT através de técnicas  experimentais.  Este  fator  é  principal  demandante  de  uma  modelagem  correta  e simplificada de sistemas dinâmicos para controle. 
4.2.2  Controle Nebuloso As  técnicas  de  controle  nebuloso  fazem  uso  dos  mesmos  sinais  convencionados  para  as técnicas  de  controle  tradicional,  com  a  exceção  de  que  seu  objetivo  não  necessariamente  é minimizar  o  erro  e(t).  O  acoplamento  do  dispositivo  de  inferência  nebulosa,  que  permite  a tomada de decisões em sistemas que utilizam a lógica nebulosa, permite que o controlador trate seus  sinais  de  entrada,  ou  seja,  o  sinal  de  erro,  e(t),  do  sistema,  de  acordo  com  sua  lógica programada, extraindo informações que permitem a retirada de conclusões simples sobre o status  44 do  processo.  Assim,  é  possível  construir  um  mecanismo  que  funcione  de  forma  a  considerar objetivos mais flexíveis na estratégia de controle. 
Os  passos  a  serem  seguidos  no  projeto  de  controladores  nebulosos  são  basicamente  os mesmos  da  construção  de  um  dispositivo  de lógica  nebulosa,  conforme  apresentado anteriormente. Em essência, o controle nebuloso lança mão das variáveis lingüísticas introduzidas pela  lógica  nebulosa  para  realizar  o  controle  de  sistemas  em  malha  fechada,  permitindo  que  o conhecimento  de  especialistas  seja  incorporado  ao  controlador,  melhorando  o  desempenho  de sistemas  de  comportamento  conhecido.  Há  diversas  técnicas  de  controle  nebuloso,  em  especial algumas utilizando o controle PID. A não ser que seja desenvolvido com o propósito contrário, o controlador  nebuloso  é  não-linear,  se  adaptando  melhor  a  plantas  não-lineares  e  lidando eficientemente  com  as  incertezas  do  modelo,  caso  o  controlador  tenha  sido  desenvolvido  com eficácia. 
A  Figura  4.16.  apresenta  um  diagrama  de  blocos  de  um  sistema  controlado  por  um controlador  nebuloso  com  as  entradas  erro  e  derivada  do  erro.  A  integração  do  controlador inteligente  com  as  entradas  convencionais  de  um  controlador  PID  implica  em  um  conjunto  de características peculiares para a construção das variáveis nebulosas e seus conjuntos, dado que o controle é comumente realizado com fechamento de malha e, portanto, lida com a minimização do erro em um processo qualquer.  
r(t)r(t)e(t)e(t)u(t)u(t)y(t)y(t)CONTROLADORCONTROLADOR+ -+ -PLANTAPLANTAdddtdtNEBULOSONEBULOSO∆e(t)∆e(t) Figura 4.16. Processo controlador por sistema nebuloso com entradas Erro e Derivada do Erro. 
Uma vez que o controle nebuloso é comumente não-linear, o sinal de controle não possui uma função de transferência, de forma que o controlador pode ser projetado para se ajustar à não-linearidade da planta, quando há conhecimento sobre seu comportamento. Esta adequação se dá na forma da Base de Regras de um sistema Nebuloso, substituindo um cômputo tão analítico do sinal  de  controle  quanto  o  realizado  por  uma  equação.  Assim  sendo,  um  sistema  com  um controlador  nebuloso  teria  regras  referenciando  o  erro  e  suas  derivações  como  variáveis nebulosas de entrada e o sinal de controle como variável nebulosa de saída. Com a construção de conjuntos nebulosos adequados, poder-se-ia ter uma situação como a ilustrada pela Figura 4.17, onde é apresentada uma possível aplicação da base de regras a uma determinada entrada. 
 45 Se ERRO é ALTO,Então SINAL DE CONTROLE é ALTOERROSINAL DE CONTROLEbaixoaltobaixonuloalto75% nulo25% alto25% alto10%u(t) Figura 4.17. Exemplo de aplicação de sistema com controle nebuloso. 
 46     Capítulo 5  5  Metodologia Este capítulo apresenta a aplicação dos conceitos explorados no Capítulo 4 para a síntese de controladores  no  contexto  do  Sistema  VASPS,  delimitado  na  modelagem  física  realizada  no Capítulo 3. O desenvolvimento das metodologias de síntese de controladores usa duas estratégias de controle distintas abordadas nas duas seções deste capítulo. A primeira estratégia compreende melhorar  o  sinal  de  resposta  através  de  melhorias  no  mesmo  controlador  usado  em  campo, limitando  o  escopo  da  metodologia  à  reformulação  da  solução  existente  e  melhorando  seu desempenho.  A  segunda  estratégia,  abordada  na  seção  seguinte,  extrapola  o  uso  da  tecnologia convencional,  lançando  mão  de  uma  solução  menos  convencional  para  alcançar  resultados operacionais  mais  significativos,  trabalhando  diretamente  a  questão  da  melhor  manipulação  do atuador, a Bomba BCS, reduzindo o esforço de controle realizado sobre esta.  
5.1  Controle voltado ao Desempenho O controle voltado ao desempenho tem o objetivo de acompanhar o sinal de referência, de forma que a saída do sistema oscile o mínimo possível. Por sua vez, a saída do sistema pode ser qualquer variável física lida através de um sensor – temperatura, pressão, vazão, rotação ou nível. 
No caso do VASPS, a variável de saída é o nível de líquido no reservatório interno ao separador, chamado  anteriormente  de  ‘piscina’,  de  forma  que  mantendo  um  sinal  de  referência  fixo, mantém-se também este nível o menos variante possível e por conseqüência o sistema permanece em condições operacionais previsíveis. 
Esta abordagem leva à possibilidade de análise do sinal de resposta – no caso, a variação do nível – para determinar comportamentos assintóticos da resposta do sistema, ou seja, é possível afirmar sobre seu valor estacionário em regime permanente ou identificar a variação da resposta  47 em função de uma dada entrada conhecida. Por sua vez, o sinal de controle, ou seja, a freqüência de  rotação  da  bomba  oscila  de  forma  a  corrigir  os  distúrbios  impostos  no  processo,  possuindo uma forma muitas vezes similar à do distúrbio de entrada. 
Este tipo de abordagem é necessário quando a trajetória do sinal de saída é importante, ou quando os limites de estabilidade da saída do processo são muito rígidos. Aplicações comuns são no  controle  de  rotação  de  bombas,  com  o  intuito  de  mantê-las  trabalhando  no  ponto  ótimo operacional. Devido à simplicidade e à facilidade em aplicar-se a lógica a máquinas, este é o uso mais  comum  de  controladores  na  indústria,  tendo  apresentado  desenvolvimentos  bastante complexos desde a concepção do controlador PID. Este mesmo já possui hoje diversas técnicas de projeto que permitam ajustar os ganhos de forma a evitar um regime transiente complicado, com atrasos na resposta ou picos de funcionamento antes da estabilização do sistema. 
Aplicando então técnicas de controle nebuloso ao controlador PID clássico, apresentado no Capítulo 4, é possível sintetizar um mecanismo de ajuste dinâmico dos ganhos, modificando-os segundo  condições  operacionais  do  sistema.  Esta  forma  de  ajuste  automático  foi  inicialmente proposta  por  Van  Nauta  Lemke  e  De-Zhao  (1985)  para  melhorar  o  desempenho  dinâmico  do controlador.  Muitas  técnicas  foram  desenvolvidas  neste  sentido,  e  podem  ser  encontradas  na literatura  como  ‘controle  adaptativo’  (Krstic  et  al.,  1995  e  Astrom  e  Wittenmark,  1994),  ‘PID com  gain  scheduling’  (Zhao  et  al.,  1995)  ou  ‘self  tuning  PID’  (Astrom  e  Wittenmark,  1973  e Clarke e Gawthrop, 1975). 
A aplicação desta tecnologia de auto-ajuste no sistema VASPS é apresentada na próxima seção sob a nomenclatura de controle híbrido Fuzzy-PID, uma vez que mescla a técnica clássica de  controle  PID  com  conceitos  de  lógica  nebulosa.  Outras  formas  desta  mesma  combinação podem ser encontradas na literatura. 
5.1.1  Controle Híbrido Fuzzy-PID O modelo adaptado de Van Nauta Lemke e De-Zhao (1985) consiste na supervisão de um sistema  de  controle  PID  por  um  controlador  inteligente  hierarquicamente  superior.  Isto  tem objetivo  de  propiciar  um  aumento  do  desempenho  na  resposta  possibilitando  melhorar  a eficiência operacional, bem como permitir a concepção de um controlador não-linear, capaz de seguir  um  sistema  também  não-linear.  Conceitualmente,  ao  aplicar  o  controlador  inteligente  no nível  de  supervisão,  o  controle  efetivo  do  processo  permanece  sendo  o  Controlador  PID,  não  48 havendo intervenção direta na malha de controle, mas com a diferença que o PID será ajustado dinamicamente de acordo com o status do processo monitorado. 
Considerando  o  modelo  da  planta  apresentado  no  Capítulo  3,  foi  elaborado  um  controle PID clássico para que o módulo supervisor pudesse ser aplicado sobre este. Utilizando técnicas comuns de projeto de controladores PID, foi construído o controlador apresentado na Figura 5.1, 
que possui seus ganhos conforme apresentado na Equação (5.1). 
PKPK++PlantaPlantareferênciareferência∫∫dddtdtIKIK++++--(Processo)(Processo)++DKDK Figura 5.1. Diagrama de Blocos do Controlador PID. 
=10p=.0
001=100KKiK++100².0
00110sss→=)(sK (5.1) 
dCom  estas  constantes,  pode-se  calcular  a  FT  do  controlador,  conforme  apresentado  na Equação (5.2), verificando os pólos do controlador, segundo a Equação (5.3). 
−3++100(9.9)001.0
10²ss−26++9.9²
sse⋅e+²s+s10s⋅⋅)()()(sPsK+)(sPsK100(+²s100(10+.0
+011.3)001⋅.0
e===)(sH (5.2) 
−⋅1².3)0010119.9
s2−−−(5.3) 
9.9,1[:e]pólos Assim,  o  diagrama  de  blocos  para  o  sistema  com  o  módulo  supervisor  é  apresentado  na Figura  5.2,  onde  a  estrutura  básica  do  controlador  foi  detalhada,  e  um  bloco  foi  usado  para representar o processo. 
 49  Figura 5.2. Diagrama de blocos do controlador Supervisório, adaptado de Van Nauta Lemke e De-Zhao (1985). 
O controlador inteligente, inserido no bloco de supervisão da Figura 5.2, tem como objetivo reforçar  o  sinal  de  controle  através  do  aumento  do  valor  das  constantes  do  PID  em  uma  dada situação  de  condição  operacional  definida  na  parametrização  do  controlador  nebuloso.  Esta condição  operacional,  por  ser  definida  pela  Base  de  Regras  do  comportamento  do  controlador nebuloso, ocorre de acordo com a parametrização escolhida pelo projetista. Por exemplo, para um dado processo não-linear, P(s), a saída do sistema, dada pela Equação (5.4), terá comportamento próximo  ao  linear  desejado  apenas  se  o  sinal  de  controle  u(T)  for  também  não-linear  e compensando este comportamento. 
=⋅(Ty)(TusP)() (5.4) 
O  diagrama  do  controlador  FPID,  apresentado  na  Figura  5.3,  é  o  ponto  de  partida  para  a especificação. A notação adotada para os sinais é a seguinte: e: erro; ie: integral do erro; ce: mudança no erro (proveniente do inglês change in error); x: erro relativo; ix: integral relativa do erro; cx: mudança relativa do erro. 
Além disso, a saída do sistema são variações nas constantes, ∆P, ∆I e ∆D, que são somadas às constantes iniciais do sistema, P0, I0 e D0, de forma a compor a constante final que opera no sistema  variando  conforme  o  status  corrente.  Estas  saídas  do  sistema  possuem  cada  uma  seus  50 conjuntos  nebulosos,  conforme  apresentado  no  Capítulo  4.  Esta  formulação  apresentada anteriormente  é  encontrada  na  literatura  citada  rotulando  este  sistema  nebuloso  como  sendo  do tipo ‘Mamdani’. 
P0P0++∆P∆PPfPfeK xeK xee11rr++0P0PPPOOÃÃÇÇAACCFFZZZZUUFFEEDDBASE BASE ||||OOÃÃÇÇAACCFFZZZZUUFFI0I0++∆I +∆I +IfIfieieixix11rr0I0IIIieKieKIIDEDEIIII||||IID0D0++∆D +∆D +DfDfREGRASREGRAScececxcx11rr0D0DDDceKceK|||| Figura 5.3. Detalhamento do controlador FPID do Modelo Supervisório. 
O controlador integrado  e detalhado é  apresentado na Figura 5.4, onde é  possível notar o supervisor atuando diretamente sobre as constantes do controlador PID, respeitando o conceito de não-interferência direta no sinal de controle.  
0P0P++++∆∆P +P +PPffeeeK xeK x11rrPPOOÃÃÇÇAACCFFZZZZUUFFEEDD00eeOOÃÃÇÇAACCFFZZZZUUFF||||||||0I0I++BASE BASE ∆∆I +I +fIfIieieixix11rrIIDE DE ieKieKII00IIII||||REGRASREGRASII0D0D++∆∆D +D +fDfDcececxcx11| r| rDDceKceK00||PPPP++PlantaPlantarr∫∫II++++--(Processo)(Processo)++dddtdtDD Figura 5.4. Diagrama de blocos do controlador FPID. 
Através  do  diagrama  completo  da  Figura  5.4  é  possível  identificar  o  cálculo  para  as variáveis de entrada, de forma que o erro e, a mudança no erro, ce, e a integral do erro, ie, são dadas respectivamente pelas Equações (5.5), (5.6) e (5.7). 
  51 =−)(Te)(Tyr (5.5) 
−−(TeT(Te))1= (Tce)(5.6) 
n∑=)(Tie)(i Te (5.7) 
1Da  mesma  forma,  as  saídas  do  supervisor,  ou  seja,  as  constantes  P,  I,  e  D,  são  dadas respectivamente pelas Equações (5.8), (5.9) e (5.10), e as entradas normalizadas x, cx e ix, dadas pelas equações (5.11), (5.12) e (5.13). 
= 0PP∆+P (5.8) 
= 0I∆+II (5.9) 
= 0DD∆+D (5.10) )(Ter=⋅ )(TxK(5.11) e)(Tcer =⋅)(TcxK(5.12) ce)(Tier=⋅ )(TixK(5.13) ieO sinal de controle resultante do modelo tem a mesma equação do controle PID, mas com a diferença  de  que  os  termos  relativos  aos  ganhos  possuem  uma  não-linearidade  intrínseca, referentes aos termos ∆P, ∆I e ∆D, que podem ser modelados para atuar diferentemente com a variação dos componentes de erro. Estes por sua vez, representados pelas variáveis x, cx e ix, são classificados  durante  o  processo  de  fuzzificação  com  uma  pertinência  dada  pelos  conjuntos nebulosos. Um exemplo de como a Lógica Nebulosa pode ser aplicada é apresentada na Figura 5.5,  para  um  processo  onde  a  entrada  assume  valores  relativos  no  intervalo  [-1,1]  e  a  saída imprima variações de -100% até +100% no valor original da constante. 
 52 a)a)a)Conjuntos Nebulosos de EntradaConjuntos Nebulosos de EntradaConjuntos Nebulosos de EntradaµµµµµµN ZN ZN ZN--N--N--PPPP++P++P++aaacccnnnêêênnniiitttrrreeePPPiii-100%-90%-100%-90%-100%-90%-30% -10% 0 10% 30%-30% -10% 0 10% 30%-30% -10% 0 10% 30%90% 100%90% 100%90% 100%Entrada de erro (x, ix ou cx)Entrada de erro (x, ix ou cx)Entrada de erro (x, ix ou cx)b)b)b)µµµConjuntos Nebulosos da Saída PfConjuntos Nebulosos da Saída PfConjuntos Nebulosos da Saída PfLEGENDALEGENDALEGENDAN--: Muito NegativoN--: Muito NegativoN--: Muito NegativoNNNZZZPPPP+ P++P+ P++P+ P++N--N--N--N-N-N-N-: Negativo IntermediárioN-: Negativo IntermediárioN-: Negativo IntermediárioaaacccnnnêêênnniiitttrrreeePPPiiiN: Pouco NegativoN: Pouco NegativoN: Pouco NegativoZ: ZeroZ: ZeroZ: ZeroP: Pouco PositivoP: Pouco PositivoP: Pouco PositivoP+: Positivo IntermediárioP+: Positivo IntermediárioP+: Positivo Intermediário- 100% -50%- 100% -50%- 100% -50%00050% 100%50% 100%50% 100%P++: Muito PositivoP++: Muito PositivoP++: Muito PositivoVariação Percentual em PVariação Percentual em PVariação Percentual em Pc)c)c)µµµConjuntos Nebulosos das Saídas Df e IfConjuntos Nebulosos das Saídas Df e IfConjuntos Nebulosos das Saídas Df e IfZZZPPPP++P++P++NNNN--N--N--aaaiiicccnnnêêênnniiitttrrreeePPP- 100%- 100%- 100%-50%-50%-50%00050%50%50%100%100%100% Variação Percentual em D ou IVariação Percentual em D ou IVariação Percentual em D ou IFigura 5.5. Conjuntos nebulosos para o controlador FPID. 
Na Figura 5.5 (a), é apresentada a função de pertinência modelada para as três variáveis de entrada, x, ix e cx, de forma que em torno do zero as variáveis assumem valores de pertinência nos  conjuntos  “Zero”  (Z),  “Pouco  Negativo”  (N)  e  “Pouco  Positivo”  (P)  e,  ao  passo  que  vão aumentando  ou  diminuindo  assumem  pertinências  maiores  nestes  últimos  dois  conjuntos  até ativarem os conjuntos nebulosos “Muito Negativo” (N--) ou “Muito Positivo” (P++). Com isto, é possível  criar  regras  distintas  de  acionamento  das  variáveis  de  saída  para  quando  a  resposta transiente  estiver  muito  longe  da  estabilização  (por  exemplo,  erro  normalizado  x  “Muito Positivo” (P++) ou “Muito Negativo” (N--), ou uma combinação de erro x “Pouco Positivo” (P) com  derivada  “Muito  Positiva”  (P++)  ou  “Pouco  Positiva”  (P)  e  outras  regras  para  alterar  os valores  das  constantes  P,  I  e  D  quando  o  sistema  estiver  perto  da  estabilização  (por  exemplo,  53 quando o erro for “Zero” (Z), ou quando houver uma combinação de erro “Pouco Positivo” (P) com a derivada “Pouco Negativa” (N) ou com a Integral “Zero” (Z). 
Já  nos  itens  (b)  e  (c)  da  Figura  5.5,  são  apresentadas  as  funções  de  pertinência  para  as variáveis de saída, que são as variações percentuais impressas às constantes do controlador PID. 
Neste  caso,  a  construção  dos  conjuntos  nebulosos  para  a  variável  de  saída  ∆P  é  diferente  da construção das outras duas, possuindo o conjunto nebuloso “Zero” (Z) e os conjuntos nebulosos “Muito  Positivo”  (P++)  e  “Muito  Negativo”  (N--)  mais  estreitos.  No  caso  do  primeiro  dos conjuntos, isso se faz necessário pois na composição do sinal de controle a contribuição do sinal de  erro  normalizado  x  torna-se  muito  pequena  devido  à  redução  do  erro  na  estabilização,  de forma que se faz necessário imprimir variações rápidas na constante P para obter-se um sinal de controle mais efetivo. Já na caso dos últimos dois conjuntos citados, isso ocorre pois nas saídas referentes aos ganhos D e I é interessante que haja um reforço maior nestas constantes devido a estas  serem  os  valores  ativos  mais  representativos  no  período  de  estabilização,  de  forma  que  a grande  área  dos  conjuntos  “Muito  Negativo”  (N--)  e  “Muito  Positivo”  (P++)  destas  variáveis influencia na ponderação dos conjuntos no processo de defuzzificação. 
Finalmente, estes conceitos devem estar claros e definidos pela Base de Regras, de forma que  percebe-se  que  a  criação  dos  conjuntos  nebulosos  e  a  definição  destas  regras  não  são totalmente independentes, sendo construídas uma em função da outra, e ambas de acordo com o comportamento desejado para o controlador. Usualmente, poder-se-ia desejar um comportamento linear da saída, o que facilitaria a modelagem matemática e a avaliação de resultados. No entanto, o  objetivo  não  é  simplificar  a  álgebra  do  controlador  e  sua  função  de  transferência,  mas  sim buscar o melhor resultado que se possa extrair do sistema.  
No  caso  em  questão,  onde  o  objetivo  é  manter  o  nível  da  piscina  do  VASPS  o  mais próximo possível do valor de referência – um requisito claramente voltado para o desempenho do controlador,  mantendo  o  valor  de  referência  na  saída  –  há  algumas  adaptações  necessárias considerando  os  equipamentos  usados  em  campo  e  os  critérios  de  desempenho.  O  primeiro comportamento  desejado  diz  respeito  à  atuação  do  controlador  em  momentos  diferentes  do regime  transiente  (a  saber:  início  de  um  grande  distúrbio  versus  período  de  estabilização), enquanto que o segundo diz respeito à restrição física de vazão sempre positiva, de forma que as seguintes melhorias podem ser incluídas na Base de Regras frente ao controlador PID puramente matemático:  54 Caso 1)  Reforçar o sinal de controle para pequenos valores de erro a fim de aumentar a taxa de correção próxima à estabilização; Caso 2)  Eliminar  contribuições  negativas  das  componentes  do  erro  na  composição  do  sinal  de controle,  evitando  que  sejam  necessários  valores  negativos  de  correção  do  sistema  (que implicariam em saturação do controlador no sistema PID). 
No  primeiro  caso,  lembrando-se  da  composição  do  sinal  de  controle  dada  pela  Equação (5.14), é possível reforçar o sinal de controle quando as componentes do erro, e(t), ie(t) e ce(t), assumirem valores de amplitude baixa (entrada igual a ‘Z’, ‘N’ ou ‘P’) devido à estabilização do sinal de resposta, através do aumento das constantes P, I e D. 
⋅=⋅++⋅)(tu)(teP)()(tceDtieI (5.14) No  segundo  caso,  o  desempenho  é  melhorado  apenas  quando  o  atuador  do  sistema  tem relevância em apenas um sentido, como por exemplo no VASPS, onde a BCS deve manter um dado nível, atuando apenas com vazão de saída positiva para níveis altos, ou simplesmente não atuando  para  níveis  baixos.  Além  disso,  eliminar  contribuições  negativas  pode  vir  a  ter  um impacto  significante  quando  o  sistema  sem  a  correção  gera  sinais  de  erro  grandes  o  suficiente para  saturar  o  atuador,  atrasando  a  resposta  e  piorando  o  regime  transiente.  Com  isso,  para  a efetivação de um sinal de controle apenas em um sentido, é realizado um acréscimo de um delta de -100% (saída igual a ‘N--’) quando os sinais de erro forem negativos (entrada igual à ‘N’ ou ‘N--’).  
Embora o sistema proposto possua três entradas e três saídas, a Base de Regras é dividida em três matrizes correspondentes a cada variável de saída, de forma simplificar a verificação da saída. Assim, cada uma das saídas será função de apenas duas variáveis de entrada, colocadas na linha e na coluna da matriz. 
Para melhor ilustrar a Base de Regras, segue-se a notação da Tabela 5.1, que apresenta um rótulo  numérico  para  cada  conjunto  nebuloso  das  variáveis  de  saída  Pf,  If  e  Df.  Estes  rótulos apresentam também uma casa decimal, utilizada para representar o grau de ativação da regra, e cujo valor é o complemento do número apresentado nesta casa decimal. 
 55 Tabela 5.1. Representação dos conjuntos nebulosos para a base de regras. 
Pf 1,0 2,0 3,0 4,0 5,0 6,0 7,0 Df, If 1,0 Significado Sigla N-- N- N Z P P+ P++ Muito Negativo Negativo Médio Pouco Negativo - 2,0 3,0 4,0 Zero Pouco Positivo Positivo Médio Muito Positivo - 5,0 Exemplificando,  caso  uma  célula  da  matriz  que  representa  a  base  de  regras  apresente  o valor 4.0, se a variável de saída analisada corresponder à saída Pf, o conjunto nebuloso ativado será o ‘Z’. De outra forma, se corresponder às saídas Df ou If, o conjunto ativado será o ‘P’. Outro exemplo ocorre para o caso do valor ser 6.3, o que significa que a saída Pf será ativada com 70% de pertinência no ‘P+’ (6.0) e 30% no ‘P++’ (7.0). 
Com isso, a Base de Regra para os dois casos anteriormente abordados pode ser observada na Tabela 5.2, onde é possível notar que o reforço para a constante Pf é aplicado quando o erro é pequeno, mas diferente de zero, pois quando o erro é pequeno e sua variação é nula, o sinal se estagnou naquele valor, devendo ser reforçado. Já o reforço das constantes If e Df ocorre quando tanto  o  erro  quanto  sua  integral  ou  derivada  se  aproximam  do zero,  assumindo  um  valor  ainda maior quando exatamente em zero. 
Tabela 5.2. Base de regras do controlador supervisor FPID   Variação do Erro Integral do Erro Variação do Erro Pf If Df N--  N  Z  P  P++ N--  4.0  4.0  4.0  4.0  4.0 
N  4.0  3.0  1.7  3.0  4.0 
Z  4.0  4.0  4.0  4.0  4.0 
P  4.0  5.0  6.3  5.0  4.0 
P++  4.0  4.0  4.0  4.0  4.0 
N--  N  Z  P  P++ N--  3.0  3.0  3.0  3.0  3.0 
N  3.0  3.0  4.0  3.0  3.0 
Z  3.0  4.0  5.0  4.0  3.0 
P  3.0  3.0  4.0  3.0  3.0 
P++  3.0  3.0  3.0  3.0  3.0 
N--  N  Z  P  P++ N--  3.0  3.0  3.0  3.0  3.0 
N  3.0  3.0  4.0  3.0  3.0 
Z  3.0  4.0  5.0  4.0  3.0 
P  3.0  3.0  4.0  3.0  3.0 
P++  3.0  3.0  3.0  3.0  3.0 
   orrorrorrEEENa  Tabela  5.2  é  possível  notar  que  o  reforço  para  a  constante  Pf  é  dado  quando  o  erro  é pequeno, mas diferente de zero, pois quando o erro é pequeno e sua variação é nula, o sinal se estagnou naquele valor, devendo ser reforçado. Já o reforço das constantes If e Df ocorre quando tanto  o  erro  quanto  sua  integral  ou  derivada  se  aproximam  do zero,  assumindo  um  valor  ainda maior quando exatamente em zero.  
Por sua vez, a Tabela 5.3 apresenta a Base de Regras para um sistema onde não se desejam contribuições negativas no sinal de controle, ou contribuições quaisquer quando o erro do sistema esteja abaixo de zero, indicando que este ainda não atingiu seu status operacional desejado. 
 56 Tabela 5.3. Base de regras do controlador supervisor FPID   Variação do Erro Integral do Erro Variação do Erro Pf If Df N--  N  Z  P  P++ N--  1.0  1.0  1.0  1.0  1.0 
N  1.0  1.0  1.0  1.0  1.0 
Z  4.0  4.0  4.0  4.0  4.0 
P  4.0  4.0  4.0  4.0  4.0 
P++  4.0  4.0  4.0  4.0  4.0 
N--  N  Z  P  P++ N--  1.0  1.0  1.0  1.0  1.0 
N  1.0  1.0  1.0  1.0  1.0 
Z  1.0  1.0  3.0  3.0  3.0 
P  1.0  1.0  3.0  3.0  3.0 
P++  1.0  1.0  3.0  3.0  3.0 
N--  N  Z  P  P++ N--  1.0  1.0  1.0  1.0  1.0 
N  1.0  1.0  1.0  1.0  1.0 
Z  1.0  1.0  3.0  3.0  3.0 
P  1.0  1.0  3.0  3.0  3.0 
P++  1.0  1.0  3.0  3.0  3.0 
   orrorrorrEEEEstes  modelos  para  a  Base  de  Regra  ilustram  dois  casos  específicos  gerados  a  partir  de necessidades provenientes de um sistema. Outras necessidades poderiam ser identificadas a fim de gerar as regras adequadas a tratar com o problema. Por fim, os resultados para o modelo FPID são apresentados no Capítulo 6 e os modelos e resultados para modelos derivados do FPID são apresentados no Apêndice A. 
5.2  Controle voltado à Minimização do Esforço Em  face  aos  problemas  onde  o  componente  crítico  do  sistema  é  o  atuador,  normalmente devido  ao  seu  elevado  custo  –  que  pode  também  ser  traduzido  como  baixo  tempo  médio  entre falhas (MTBF) – é desejável que este permaneça com o mínimo de utilização possível, ou com o mínimo  de  variações  em  sua  condição  de  trabalho  possíveis,  permanecendo  no  ponto  ótimo  de operação.  Isso  acontece  no  sistema  VASPS,  onde  o  motor  elétrico  da  BCS  é  acionado  por  um inversor que permite maior flexibilidade através do uso de uma gama de rotações diferentes, mas que acarreta em trabalho fora do ponto ótimo. 
Visando  a  redução  do  esforço  ao  qual  a  bomba  está  submetida,  foram  desenvolvidos controladores  especificamente  voltados  ao  tratamento  do  sinal  de  controle,  de  forma  que  este permaneça  com  poucas  alterações,  e  a  saída  do  sistema  oscile  dentro  da  faixa  de  estabilidade prevista  para  o  modelo  dinâmico  do  processo,  conforme  definido  na  seção  3.1.2.  Assim,  o comportamento desejado para o sistema controlado é apresentado na Figura 5.6, e será o objetivo de controle usado no projeto dos controladores. 
 57 a)a)]]))tt((yymm404040[[  aanniiccssiipp  aadd––  aaddííaass  eeddFaixa de oscilação do Nível da piscinaFaixa de oscilação do Nível da piscina303030  llaannSS  lleevvííNN202020iiTempo [s]Tempo [s]b)b)]]zzHH))tt((uu  eelloorrttnnoocc  eedd585858565656545454525252[[  SSCCBB  aadd  aaiiccnnêêüüqqeerrFF505050  llaannSS484848iiTempo [s]Tempo [s] Figura 5.6. Comportamento desejado para o sistema voltado à redução do esforço de controle. 
No VASPS a redução do esforço de controle pode prover um menor custo ao processo, uma vez que o atuador é o componente crítico, em detrimento do melhor desempenho possível para o sistema.  Este  compromisso  entre  desempenho  e  esforço  de  controle  pode  ser  parametrizado  de acordo  com  a  faixa  de  estabilidade  do  processo  físico  controlado,  respeitando  seus  limites operacionais e utilizando a resposta do sistema para avaliar parâmetros que indiquem quando a alteração no sinal de controle é realmente necessária. Serão tratados quatro diferentes modelos de controladores inteligentes, que permitem este tipo de inferência. 
5.2.1  Monitoramento da Média Móvel Com o objetivo de avaliar a tendência do comportamento do sinal, este controlador realiza uma média móvel do erro de acordo com uma janela de tempo parametrizada pela variável n, de forma  que  o  erro  médio  do  processo,  calculado  pela  Equação  (5.15),  faz  o  papel  de  ajustar  o tempo de reação do sistema à taxa desejada de correção, em função da variação do sinal de saída. 
Também é possível realizar o cálculo do sinal de média móvel pela ponderação do sinal de erro com um perfil diferente do uniforme, como, por exemplo, com uma média ponderando as leituras mais recentes com maior peso. 
t1n∑=(5.15) e)t(e −=nti 58 Assim, em sistemas onde o sinal de controle deve permanecer com o mínimo de variações possível, a alteração do sinal de controle u(t) se dará apenas mediante uma mudança significativa da condição de operação, reduzindo a sensibilidade a oscilações curtas que podem não implicar na  necessidade  de  alteração  do  sinal  de  controle.  Uma  alteração  de  comportamento  será identificada,  portanto,  com  a  variação  de  magnitude  da  média  móvel,  que  deve  possuir  baixa sensibilidade a oscilações bruscas, refletindo a tendência real do processo.  
Para  o  conceito  de  média  móvel  funcionar  no  contexto  de  minimização  do  esforço  de controle, é necessário que este esforço seja constante em torno de pontos de operação do sistema, de forma que  a mudança do sinal de controle indique uma correção do sistema para operar em outro  ponto.  Assim,  a  leitura  de  erro  médio  é  utilizada  como  entrada  para  um  mecanismo  de inferência  nebulosa,  um  controlador  nebuloso,  que  é  encarregado  de  dividir  os  parâmetros  de operação  do  processo  em  pontos  de  operação,  criando  regiões  de  trabalho  onde  a  média  possa oscilar  com  alguma  liberdade.  Ademais,  faz-se  necessária  a  manutenção  da  leitura  do  erro instantâneo,  uma  vez  que  este  deve  ser  considerado  como  única  alternativa  de  correção  caso  o sistema esteja exposto a oscilações bruscas que possam levar as condições de operação para uma região crítica que necessite de correção imediata. Esta alternativa é uma segurança contra falhas em  sistemas  de  baixa  constante  de  tempo.  Assim,  o  diagrama  de  blocos  para  este  controlador, aplicado ao sistema VASPS é apresentado na Figura 5.7. 
r(t)r(t)e(t)e(t)Qos [m³/s]Qos [m³/s]f [Hz]f [Hz]Nível [m]Nível [m]DinâmicaDinâmicado Níveldo NívelCurva daCurva daBombaBombaControladorControladorControladore(t)e(t)MédiaMédiaMédiaMóvelMóvelMóvelFuzzyFuzzyFuzzyGerador de Gerador de Qoe [m³/s]Qoe [m³/s]GolfadasGolfadas Figura 5.7. Diagrama de blocos para o controlador Média Móvel aplicado ao VASPS. 
As funções de pertinência do controlador nebuloso devem contemplar a região de trabalho, as regiões críticas de correção próximas aos limites da faixa de trabalho, e regiões de transição entre  estas.  Além  disso,  é  recomendável  que  as  entradas  do  mecanismo  de  inferência  nebulosa sejam normalizadas em torno do zero, através do cálculo dado nas Equações (5.16) e (5.17), de forma a facilitar análises de sinal. 
−)(te)(te)(tr=)(tx(5.16)   59 −)(te)(te)(tr=)(tx(5.17)  De  forma  a  atender  a  faixa  de  estabilidade  do  VASPS  proposta  no  início  deste  capítulo, será considerado que um erro de 25% em relação à referência de 30 metros (7,5 metros para mais e para menos) é uma margem segura de trabalho, de forma que fora deste intervalo a estabilidade não pode ser garantida. Assim, definindo a zona crítica de atuação a faixa entre o erro de 20% e o de 25%, a região de trabalho para a rotação ótima da bomba se dá na faixa de -10% a +10%. Com estes valores são construídos os conjuntos nebulosos da Figura 5.8, relacionando a rotulação das faixas de erro com os conjuntos nebulosos. 
a)a)a)Conjuntos Nebulosos da entrada x(t)Conjuntos Nebulosos da entrada x(t)Conjuntos Nebulosos da entrada x(t)µµµµµµCRB TRBCRB TRBCRB TRBRTRTRTTRA CRATRA CRATRA CRAaaaiiicccnnnêêênnniiitttrrreeePPP-40%-40%-40%-20%-20%-20%00020%20%20%40%40%40%Erro Instantâneo x(t)Erro Instantâneo x(t)Erro Instantâneo x(t)____b)b)b)µµµConjuntos Nebulosos da entrada x(t)Conjuntos Nebulosos da entrada x(t)Conjuntos Nebulosos da entrada x(t)Conjuntos Nebulosos da entrada x(t)CRBCRBCRBRTRTRTTRBTRBTRBTRA CRATRA CRATRA CRALEGENDALEGENDALEGENDACRB: Região Crítica BaixaCRB: Região Crítica BaixaCRB: Região Crítica BaixaTRB: Região de Transição BaixaTRB: Região de Transição BaixaTRB: Região de Transição BaixaRT: Região de TrabalhoRT: Região de TrabalhoRT: Região de TrabalhoTRA: Região de Transição AltaTRA: Região de Transição AltaTRA: Região de Transição AltaCRA: Região Crítica AltaCRA: Região Crítica AltaCRA: Região Crítica AltaaaaiiicccnnnêêênnniiitttrrreeePPP- 30%- 30%- 30%-10% 0-10% 0-10% 010%10%10%____30%30%30%Erro Médio x(t)Erro Médio x(t)Erro Médio x(t)Erro Médio x(t) Figura 5.8. Funções de pertinência para o controlador Média Móvel aplicado ao VASPS. 
Por fim, a base de regras para este controlador é do tipo Sugeno, usando a formulação do tipo ‘Constante’ para as funções de saída, como apresentado no Capítulo 4, ativando para a saída u(t)  um  valor  de  freqüência  com  que  o  inversor  aciona  a  bomba.  O  valor  final  de  saída  é ponderado segundo o grau de ativação de cada regra ativa, µk. Assim, os valores das saídas para correspondente a cada regra são apresentados na Tabela 5.4. 
 60 Tabela 5.4. Base de regras do controlador Monitoramento da Média Móvel. 
Valor da saída [Hz] Erro Rótulo Sigla Erro Médio Instantâneo CRB TRB RT TRA CRA 48 50 - 58 60 48 52 54 56 60 Região Crítica Baixa Região de Transição Baixa Região de Trabalho Região de Transição Alta Região Crítica Alta As  regras  representadas  pela  Tabela  5.4  não  possuem  associação  entre  as  variáveis  de entrada,  sendo  que  cada  regra  ativa  um  valor  de  saída  a  ser  computado  através  da  formulação apresentada para regras do tipo Sugeno no Capítulo 4. Assim, este sistema apresenta 9 regras de acionamento da resposta, que ativam, cada uma, um valor constante para a variável de saída, que são então ponderadas pelo grau de ativação do conjunto nebuloso de entrada, µk. Considerando todas as regras com peso 1, são 4 regras para o erro instantâneo normalizado (regra 1 – saída 48 Hz, regra 2 – saída 50 Hz, regra 3 – saída 58 Hz e regra 4 – saída 60 Hz) e 5 regras para o erro médio normalizado (regra 5 – saída 48 Hz, regra 6 – saída 52 Hz, etc). 
Como exemplo, considere a entrada de erro instantêneo normalizado, x(t), igual a -15%, e a )(tx,  igual  a  -9%.  A  primeira  condição  ativa  o  erro entrada  de  erro  médio  normalizado, instantâneo  no  conjunto  nebuloso  RT,  não  acionando  nenhuma  regra,  enquanto  que  a  segunda condição aciona o erro médio nos conjuntos TRB e RT, acionando as regras 6 e 7. Assim, estas entradas geram as saídas apresentadas na Tabela 5.5. 
Tabela 5.5. Aplicação da Base de Regras usando entradas associativas. 
Variável de Conjunto Variável de saída Rotação da Bomba Rotação da Bomba Rotação da Bomba Valor Grau de ativação µk Regra   Peso Entrada ativo acionado Erro µ1 =1,0 - 1 0 - RT instantâneo µ2 =0,5 6 1 0,5 Erro médio 52 Hz TRB µ3 =0,5 7 1 0,5 Erro médio 54 Hz RT O sinal de controle pode então ser calculado pela ponderação das saídas ativas pelo grau de ativação: 11• =⋅+⋅=525453 fHz22 61 5.2.2  Classificador de Regiões Com o intuito de uma melhor manipulação da região de trabalho, limitada acima e abaixo, este modelo trata o sinal de entrada com uma função de classificação que retorna uma pertinência relativa à distância entre o limite de estabilidade mais próximo (superior ou inferior) e o valor da referência. Esta abordagem permite uma livre variação do sinal de referência r(t) dentro da região de trabalho do controlador, de forma que as funções de classificação tomam novos coeficientes, que corrigem a distância entre os limites de estabilidade para o valor da nova referência. A Figura 5.9  ilustra  a  construção  das  funções  de  classificação  de  acordo  com  a  referência,  e  a  correção desta após a variação do set point ao longo do processo. 
y(t)y(t)y(t)µ(t)µ(t)µ(t)Limite SuperiorLimite SuperiorLimite Superior111SP2SP2SP2µ1µ1µ1SP1SP1SP1Limite InferiorLimite InferiorLimite Inferiorµ2µ2µ2y(t)y(t)y(t)SP2SP2SP2LI SP1LI SP1LI SP1LSLSLS Figura 5.9. Ilustração da função utilizada pelo Classificador. 
Este  conceito  permite  a  parametrização  da  região  de  trabalho,  uma  vez  que  a  entrada  é normalizada no intervalo [-1,1], e a manipulação do valor de set point, o que apresenta limitações no modelo Monitoramento da Média Móvel. Com a entrada normalizada, pode-se utilizar a idéia de valor de pertinência para esta, dada pela Equação (5.18), de forma que sua magnitude expresse a proximidade à instabilidade ou à referência. Além disso, a inclinação da função de classificação provê uma rápida transição desta pertinência entre estes dois casos. 
−−)t(y)t(rLILI<µ,)t()t(r(5.18) µ)t( −LS)t(r)t(y−LS≥µ)t(,)t(rIsso  posto,  é  possível  também  resolver  o  problema  de  minimização  das  variações  no acionamento através da  atuação restrita  à proximidade da  região  crítica.  Com isso em mente, é  62 possível utilizar o classificador para monitorar os limites e estabilidade, e utilizar um mecanismo de  inferência  nebulosa,  conforme  proposto  na  Figura  5.10,  para  calcular  a  rotação  nas proximidades da região crítica, realizando correções mais efetivas. 
1111111111110,70,70,70,70,70,70,70,70,70,70,70,7Qos [m³/s]Qos [m³/s]µ(t)µ(t)f [Hz]f [Hz]Nível [m]Nível [m]DinâmicaDinâmicado Níveldo NívelCurva daCurva daBombaBombae(t)e(t)ControladorControladorControladorr(t)r(t)0,30,30,30,30,30,30,30,30,30,30,30,3FuzzyFuzzyFuzzySPSPSP LSLI SPSPSPSP LSLI SPSPSPSP LSLI SPCLASSIFICADORCLASSIFICADORCLASSIFICADORGerador de Gerador de Qoe [m³/s]Qoe [m³/s]GolfadasGolfadas Figura 5.10. Diagrama de blocos para o controlador Classificador de Regiões aplicado ao VASPS. 
O sinal de controle fora da região de estabilidade é configurado para o valor crítico factível pelo  atuador,  de  forma  a  imprimir  a  maior  correção.  Ao  adentrar  a  região  de  estabilidade, acionamentos sucessivos de freqüências paulatinamente menores permitem a transição suave para a rotação ótima até que certa distância do limite de estabilidade seja atingida. Essas sucessões de acionamento servem também para a aproximação da instabilidade. 
Para  a  seleção  das  rotações  na  região  próxima  à  instabilidade,  uma  série  de  conjuntos nebulosos é inserida nas faixas críticas, conforme apresentado na Figura 5.11. Neste exemplo, os conjuntos são rotulados de acordo com a intensidade alta ou baixa que a pertinência atinge, e o valor da saída pode ser definido para cada conjunto nebuloso, uma vez que também são do tipo Sugeno e com a formulação das funções de saída do tipo ‘Constante’. 
MinMinUBUBMA UAMA UAMBMBAAMaxMaxRTRTBBµµLEGENDALEGENDALEGENDAMin: Região Crítica MínimaMin: Região Crítica MínimaMin: Região Crítica MínimaUB: Região Crítica Ultra BaixaUB: Região Crítica Ultra BaixaUB: Região Crítica Ultra BaixaMB: Região Crítica Muito BaixaMB: Região Crítica Muito BaixaMB: Região Crítica Muito BaixaB: Região Crítica BaixaB: Região Crítica BaixaB: Região Crítica BaixaRT: Região de TrabalhoRT: Região de TrabalhoRT: Região de TrabalhoA: Região Crítica AltaA: Região Crítica AltaA: Região Crítica AltaMA: Região Crítica Muito AltaMA: Região Crítica Muito AltaMA: Região Crítica Muito AltaUA: Região Crítica Ultra AltaUA: Região Crítica Ultra AltaUA: Região Crítica Ultra AltaMax: Região Crítica MáximaMax: Região Crítica MáximaMax: Região Crítica Máxima  ooddaaccnnêênniittrreePP  oottnnuunnooccbbuuSS  iijj100%100%0025%25%50%50%75%75%100%100%-75%-75%-50%-50%-25%-25%Pertinência classificada Pertinência classificada (distância normalizada até a referência)(distância normalizada até a referência) Figura 5.11. Conjuntos nebulosos de entrada para o Classificador de Regiões. 
 63 Tomando  o  limite  inferior  para  o  nível,  que  causaria  quebra  na  bomba,  como  LI  de  20 metros, e o superior, que comprometeria a pressão de separação, como LS de 40 metros, pode-se definir a base de regras pela Tabela 5.6. 
Tabela 5.6. Base de regras do controlador Classificador por Regiões. 
Valor da saída [Hz] Sigla Rótulo Mín UB MB B RT A MA UA Máx Pertinência Mínima 48 49 51 53 54 55 57 59 60 Pertinência Ultra Baixa Pertinência Muito Baixa Pertinência Baixa Região de Trabalho Pertinência Alta Pertinência Muito Alta Pertinência Ultra Alta Pertinência Máxima A  Tabela  5.6  pode  ser  utilizada  da  mesma  forma  que  a  Tabela  5.4,  onde  um  exemplo  é dado. A diferença reside no uso de apenas uma única variável de entrada.  
5.2.3  Classificador com Média Considerando  os  dois  modelos  voltados  à  minimização  do  esforço  de  controle apresentados, cabe uma análise quanto às principais características encontradas: •  Tempo de reação; •  Avaliação de tendência; •  Monitoração dos limites de estabilidade; •  Oscilação na transição entre regiões de trabalho; • Insensibilidade a variações na referência; •  Sensibilidade a oscilações bruscas. 
Ambos  os  modelos  apresentados  anteriormente  apresentam  formas  de  manipulação  do tempo  de  reação  do  sistema,  uma  vez  que  há  a  avaliação  de  tendência,  seja  pela  média  móvel realizada,  que  permite  concluir  sobre  incrementos  sustentados  ou  transientes,  seja  pela classificação da entrada em uma pertinência normalizada que indica a proximidade com a região crítica.  No  entanto,  em  algumas  simulações  que  serão  apresentadas  no  Capítulo  6,  foram percebidos alguns efeitos colaterais que podem ser relevantes para um dado sistema.  
O primeiro deles é a oscilação do sinal de controle entre duas regiões de trabalho, quando um  distúrbio  no  sistema  possui  uma  maior  duração,  o  que  pode  não  apresentar  problemas  em  64 campo no caso de a constante de tempo do sistema ser muito alta ou da instrumentação apresentar rampas de aceleração para a mudança do ponto de trabalho do atuador. O segundo, diz respeito ao conceito de regiões de trabalho, que implica em uma menor manipulação do sistema através do  sinal  de  referência.  Ora,  se  o  sistema  pode  variar  livremente  em  torno  da  referência,  é  de esperar  que  este  não  acompanhe  o  sinal  fielmente.  A  última  consideração  se  dá  em  torno  de distúrbios  de  maior  amplitude,  que  afetam  o  sistema  com  média  móvel  devido  à  leitura  da variável  instantânea,  bem  como  afetam  também  o  sistema  com  classificador,  fazendo  a pertinência  variar  muito  bruscamente.  Estas  condições,  embora  esperadas,  podem  apresentar riscos ao atuador, que deve ser capaz de atuar em seus limites, mas não deve ser exposto a uma mudança brusca de atuação.  
Nesse  contexto,  é  proposto  um  conceito  de  controlador  que  mescla  ambos  os  conceitos apresentados  anteriormente,  de  forma  a  reduzir  o  efeito  de  grandes  distúrbios  através  da realização de uma média móvel sobre a pertinência classificada, como também limitar a faixa de estabilidade em regiões de trabalho que permitam acompanhar a ordem de grandeza do sinal de referência, ainda permitindo oscilação, mas em torno de mais pontos. Adicionalmente, uma vez que o controlador proposto é mais refinado, sendo também mais sensível às mudanças bruscas do sinal de controle – mudanças estas que são minimizadas com a estratégia adotada nesta versão – faz-se necessário adicionar um filtro de sinal entre o controlador e o atuador, simulando os efeitos de saturação de sinal, quantização e rampa máxima de acionamento, presentes no CLP industrial. 
O diagrama de blocos para a malha de controle em questão é apresentado na Figura 5.12. 
u [Hz]u [Hz]f [Hz]f [Hz]Qos [m³/s]Qos [m³/s]Nível [m]Nível [m]µ(t)µ(t)1111µ1µ1µ1µ1µ2µ2µ2µ2e(t)e(t)r(t)r(t)DinâmicaDinâmicado Níveldo NívelCurva daCurva daBombaBombaControladorControladorFiltroFiltroLISPLILI SPSPSPLILSLSLSLSMédiaMédiaMóvelMóvelFuzzyFuzzyCLASSIFICADORCLASSIFICADORCLASSIFICADOR___µ(t)µ(t)µ(t)Gerador de Gerador de Qoe [m³/s]Qoe [m³/s]GolfadasGolfadas Figura 5.12. Diagrama de blocos para o controlador Classificador com Média. 
O controlador nebuloso inserido na malha é o mecanismo que permite a definição de mais regiões de trabalho para o sinal, de forma a permitir certo grau de acompanhamento da referência. 
No  entanto,  a  leitura  da  pertinência  instantânea  ainda  é  mantida,  novamente  por  segurança.  As funções de pertinência são apresentadas na Figura 5.13. 
 65 a)a)a)Conjuntos Nebulosos da entrada µ(t)Conjuntos Nebulosos da entrada µ(t)Conjuntos Nebulosos da entrada µ(t)µµµµµµCRB TRBCRB TRBCRB TRBRTRTRTTRA CRATRA CRATRA CRAaaaiiicccnnnêêênnniiitttrrreeePPP-90%-90%-90%-50%-50%-50%00050%50%50%90%90%90%Pertinência Instantânea Classificada µ(t)Pertinência Instantânea Classificada µ(t)Pertinência Instantânea Classificada µ(t)____b)b)b)µµµConjuntos Nebulosos da entrada µ(t)Conjuntos Nebulosos da entrada µ(t)Conjuntos Nebulosos da entrada µ(t)Conjuntos Nebulosos da entrada µ(t)CRBCRBCRBRTRTRTTRBTRBTRBTRA CRATRA CRATRA CRALEGENDALEGENDALEGENDACRB: Região Crítica BaixaCRB: Região Crítica BaixaCRB: Região Crítica BaixaTRB: Região de Transição BaixaTRB: Região de Transição BaixaTRB: Região de Transição BaixaRT: Região de TrabalhoRT: Região de TrabalhoRT: Região de TrabalhoTRA: Região de Transição AltaTRA: Região de Transição AltaTRA: Região de Transição AltaCRA: Região Crítica AltaCRA: Região Crítica AltaCRA: Região Crítica AltaaaacccnnnêêênnniiitttrrreeePPPiii- 70%- 70%- 70%-20% 0 20%-20% 0 20%-20% 0 20%70%70%70%____Pertinência Média Classificada µ(t)Pertinência Média Classificada µ(t)Pertinência Média Classificada µ(t)Pertinência Média Classificada µ(t) Figura 5.13. Funções de pertinência para o controlador Classificador com Média. 
A base de regras para o controlador classificador com média no caso do Sistema VASPS é apresentada na Tabela 5.7. Da mesma forma que os demais, as regras são do tipo Sugeno. 
Tabela 5.7. Base de regras do controlador Classificador com Média adaptado ao VASPS. 
Valor da saída [Hz] Rótulo Sigla  Pertinência Instantânea Pertinência Média CRB TRB RT TRA CRA Região Crítica Baixa 48 50 - 58 60 48 52 54 56 60 Região de Transição Baixa Região de Trabalho Região de Transição Alta Região Crítica Alta O filtro de sinal inserido na malha tem o objetivo de simular as mínimas variações que são aplicadas ao sinal de controle antes que este seja aplicado aos terminais elétricos da bomba BCS, corrigindo picos de sinal e ruídos. Basicamente, o filtro é constituído de três elementos, ilustrados na Figura 5.14 e aplicados na seqüência a seguir:  66 1.  Saturador. Este elemento de segurança impede que o acionamento da bomba fique fora do intervalo  estipulado  como  limites  de  funcionamento  físico,  limitando  o  universo  de atuação das freqüências do inversor. 
2.  Limitador  de  rampa.  Este  dispositivo  limita  a  derivada  do  sinal  de  controle  a  um  valor máximo  e  a  um  valor  mínimo,  simulando  as  rampas  de  aceleração  e  desaceleração permitidas  no  sistema.  Este  limitador  atua  na  malha  de  controle  elétrico  da  bomba,  que possui  uma  constante  de  tempo  baixíssima,  por  vezes  da  ordem  de  milissegundos,  de forma que as variações neste loop interno da bomba não se fazem perceptíveis no controle de nível. De qualquer forma, acionamentos repentinos na forma de ondas completamente quadradas são evitados. 
3.  Quantizador. O último componente do filtro aplica um segurador de ordem zero, ou filtro ZOH, ao acionamento do sinal de controle na bomba, evitando sua oscilação como sinal contínuo  e  portanto  minimizando  a  oscilação  do  sinal  nos  terminais  da  bomba.  Foram adotados  neste  projeto  degraus  de  0,5  Hz,  de  forma  a  realizar  variações  suaves  no acionamento. 
u [Hz]u [Hz]fS(u)fS(u)fLR(fS(u))fLR(fS(u))fQ(fLR(fS(u))) = f [Hz]fQ(fLR(fS(u))) = f [Hz]Limitador Limitador de rampade rampaSaturadorSaturadorQuantizadorQuantizador Figura 5.14. Detalhamento do filtro de sinal aplicado entre o controlador e o atuador. 
As funções aplicadas ao sinal de controle são dadas pelas Equações (5.19), (5.20) e (5.21). 
>uu≤≤uu<uumax(uumin(u),max==)(ufS,uu (5.19) minmaxS),min+−),−−>(tuS−−)1u<(tu+−)1≤min−−)1(tuS(tu(tu)1',)(tu(tuS)(tu'umax)(tuS'uumaxS==≤+−)(t((tu))'(tu)1'ufumaxLRSLRSS )1',u(5.20) minminSSSondeaéu'derivadaude(t)notempot.
S 67 +−(,5.0)1
tLR−(),1t−−(,5.0)1
t≥(t5.0)1
≤(t+−<LR−−)(tuLR−−(t)(tu5.0)1
<)(ut5.0)1
uuLRuuuLRuLR==+−)(tu((t))(t5.0)1
fuu (5.21) QQLRLRLRLRLRCom  este  filtro,  caso  haja  qualquer  problema  com  o  cômputo  do  sinal  de  controle acionando  a  BCS  indevidamente,  o  sinal  mais  crítico  a  ser  aplicado  à  bomba  é  um  sinal  com variação de meio em meio hertz, com derivada limitada e valor absoluto limitado por mínimos e máximos, permanecendo dentro do universo desejado. 
5.2.4  Histerese com Auto-ajuste Ainda  com  as  melhorias  apresentadas  no  modelo  Classificador  com  Média,  a  transição entre conjuntos nebulosos apresenta a dificuldade de se manter na nova região de trabalho até que a  correção  seja  plenamente  estabelecida,  o  que  leva  a  imaginar  a  aplicação  do  conceito  de histerese  para  fixar  a  variação  da  saída  até  que  o  sistema  retorne  completamente  à  região  de trabalho anterior por efeito do próprio comportamento do processo, e não apenas por correção do controlador.  A  histerese  é  inserida  logo  após  o  cálculo  de  pertinência  média,  de  forma  que  o diagrama  de  blocos  do  sistema  é  dado  pela  Figura  5.15.  Percebe-se  que  não  há  o  controlador nebuloso na malha, uma vez que a histerese define as regiões de trabalho. 
___µ(t)µ(t)µ(t)11110,70,70,70,70,30,30,30,3y(t)y(t)µ(t)µ(t)e(t)e(t)r(t)r(t)u(t)u(t)MédiaMédiaMóvelMóvelProcessoProcessoProcessoFiltroFiltroHistereseHistereseLISPLILI SPSPSPLILSLSLSLSCLASSIFICADORCLASSIFICADORCLASSIFICADORAutoAutoAjusteAjuste Figura 5.15. Diagrama de blocos do controlador Histerese com Auto-ajuste. 
O comportamento da histerese é dado pelas Equações (5.22), (5.23), (5.24), (5.25) e (5.26), de  forma  que  as  regiões  de  trabalho  podem  ser  identificadas  na  Figura  5.16.  Os  diferentes intervalos  ilustrados  na  figura  correspondem  às  regiões  de  trabalho  que  apresentam  um  valor constante de saída, fixando o sinal de controle enquanto o sistema permanecer na respectiva faixa de  trabalho.  A  alternância  entre  as  equações  apresentadas  depende  das  variações  na  variável avaliada - a pertinência média - cujo universo de trabalho é normalizado no intervalo [-1,1]. 
 68 PBuu≥<−−δµµ2δµµµ(2)(t)(t,),=µ()2u(5.22)  PB2PSµµµ(u2<PSu)(t−δµµµ(u1≥)(t−1)(t),,,)PB=<µ()µµδµ2u(5.23)  1≤PS1ZuZuuµµµ(1)(tµ1≥<−≤)(tµµµ11)(t,),,)PSµ)(=−µµ(<u(5.24)  ZNSµµ(u−NSuu−≥)(t<µµ2−≤)(t+δµ11−<)(tµ2,),),Z=+µ()δµ1u(5.25)  1NSµµ(NBNBuuµµµ(δµ2δµ2−<−≥++,),)(t)(tµ()=2u (5.26) NB2NSA  associação  das  funções  uNB(µ),  uNS(µ),  uZ(µ),  uPS(µ)  e  uPB(µ)  constitui  a  função aplicada ao sinal de controle para gerar seu valor de saída. Este valor de saída por sua vez é dado pelas  constantes  uNB,  uNS,  uZ,  uPS  e  uPB,  dependendo  do  intervalo  onde  a  pertinência  média estiver localizada e dependendo também do sinal de derivada de seu valor absoluto, que indica se o valor está se afastando ou se aproximando de zero. 
Por  sua  vez,  os  valores  µ1,  µ2  e  seus  opostos  -µ1  e  -µ2  são  os  valores  de  transição  entre regiões  de  trabalho  quando  a  derivada  do  módulo  da  pertinência  média  for  positiva.  Esta condição é chamada de histerese de subida. Por outro lado, caso o módulo da pertinência média estiver decrescendo, ou seja, caso a derivada de seu valor absoluto for negativa, é caracterizada a condição de histerese de descida, e neste caso o valor de transição entre as regiões de trabalho é deslocado em direção ao zero de um valor δ, chamado de intervalo de histerese. Assim, pode-se concluir  que  a  transição  entre  regiões  de  operação  na  condição  de  histerese  de  descida  é  dada pelos valores (µ1 – δ1), (µ2 – δ2) e seus valores opostos (-µ1 + δ1) e (-µ2 + δ2). Obviamente, como as  pertinências  usadas  para  os  conjuntos  nebulosos  de  entrada  variam  no  intervalo  [-1,1],  o  69 universo  de  trabalho  da  histerese  também  está  compreendido  neste  intervalo  normalizado, podendo ser visualizado na forma de porcentagens. A aplicação dos conceitos aqui apresentados será realizada no Capítulo 6, onde são apresentados os resultados. 
Histerese Histerese Histerese de subidade subidade subidauNBuNBuNBu(t) =  uZu(t) =  uZu(t) =  uZuNSuNSuNSuPSuPSuPSuPBuPBuPBHisterese Histerese de descidade descidauNBuNBuNBuNSuNSuNSuZuZuZuPSuPSuPSuPBuPBuPB___µµµpertinência médiapertinência média-µ2-µ2-µ2+δ2-µ2+δ2-µ1-µ1-µ1+δ1-µ1+δ1µ1-δ1 µ1µ1-δ1 µ1µ2-δ2 µ2µ2-δ2 µ200 Figura 5.16. Esquemático ilustrativo do comportamento da histerese. 
A Figura 5.16 ilustra os conceitos de histerese de subida e de descida, bem como as regiões de trabalho rotuladas através do valor da respectiva constante de saída. Nesta, é possível verificar um curioso efeito da histerese sobre as regiões de trabalho, a saber:  •  Quando a região está ativa, o valor de transição para as regiões vizinhas é dado pelo maior delta dentre os valores de transição em seu entorno. Assim, pode-se dizer que o intervalo de trabalho é dado pela região expandida no entorno do valor médio da pertinência para aquela região. 
•  Quando a região não está ativa, para fins de transição de regiões, ela se afasta do zero de um  valor  igual  ao  intervalo  de  histerese.  Dessa  forma  pode-se  dizer  que  o  intervalo  de trabalho  inativo  total  é  dado  pela  região  retraída  fora  do  entorno  do  valor  médio  da pertinência. 
Este efeito nos permite verificar que a soma das regiões de trabalho ativas é maior do que o intervalo  de  operação  total  de  um  valor  igual  à  soma  de  todos  os  intervalos  de  histerese encontrados  entre  as  fronteiras  de  operação.  Esta  maior  região  de  trabalho  real  permite  reduzir significativamente os acionamentos do atuador, zelando pela sua vida útil. Dessa forma, a Figura 5.16 ilustra a região expandida no entorno da pertinência média igual a zero. O valor da saída da  70 histerese u(t), como dado no diagrama de blocos, é dado pela função uZ(µ), cujo valor de saída é uZ.  
Neste  ponto,  é  interessante  retomar  uma  das  considerações  desenvolvidas  na  modelagem física  do  sistema  VASPS  –  a  dinâmica  da  variação  da  pressão.  Havia  sido  considerado  que  o tempo de resposta da variação de pressão de gás era muito maior do que o do sistema de controle de nível, de forma que trabalhando no transiente do controle de nível, este não seria afetado pela dinâmica  da  pressão.  Assim,  embora  os  efeitos  da  variação  da  pressão  não  estejam  claros  na malha de controle de nível, caso seja avaliado um tempo muito grande de avaliação da dinâmica interna do VASPS, talvez a amplitude de variação da pressão influencie a tal ponto que os valores constantes  de  saída  uNB,  uNS,  uZ,  uPS  e  uPB  não mais  estejam  adequados  às  regiões  de  trabalho definidas  para  estes.  Ou  ainda,  considerando  tempos  maiores,  a  depleção  do  reservatório  pode implicar  na  alimentação  do  sistema  VASPS  com  uma  pressão  de  admissão  –  ou  uma  vazão  de líquido – declinante, causando o mesmo efeito. 
Assim, considerando-se o problema de minimização de esforço de controle, e na tentativa de adaptar o controlador a condições dinâmicas de operação do sistema ao longo do tempo, foi desenvolvido um mecanismo de correção do valor do sinal de controle no equilíbrio, uZ, de forma que caso o sistema opere certa proporção de seu tempo fora da região de pertinência média igual a zero, o valor de uZ seja atualizado proporcionalmente. A importância desta correção é ilustrada por  observações  realizadas  em  simulação  para  um  sistema  dinamicamente  variante  no  tempo, onde  a  faixa  de  erro  nulo  aplicando  o  sinal  de  controle  u(t)  invariante  no  valor  de  uZ,  gerou atuações  que  não  mantiveram  o  sistema  em  equilíbrio,  sendo  necessária  a  atuação  da  faixa  de operação vizinha para corrigir o sinal de saída y(t) e retornar a minimizar o erro. Com isso, um diagrama esquemático para este controlador, ilustrando entradas e saídas dos parâmetros de cada bloco, pode ser representado pela Figura 5.17. 
 71 ___µ(t)µ(t)µ(t)Max(u(t))Max(u(t))Min(u(t))Min(u(t))uZuZCLASSIFICADORCLASSIFICADORCLASSIFICADORMédia MóvelMédia MóvelMédia MóvelMédia MóvelHistereseHistereseHistereser(t)r(t)µ(t)µ(t)u(t)u(t)y(t)y(t)111nnntttFiltroFiltro1111µ1µ1µ1µ1µ2µ2µ2µ2∑∑∑ProcessoProcesso===µµµµµµ)()()(tttLimite superiorLimite superiorLimite inferiorLimite inferiorδδδ−=−=−=ntntntiiinnLISPLILI SPSPSPLILSLSLSLSy(t)y(t)___u(t)u(t)u(t)Max(u(t))Max(u(t))Min(u(t))Min(u(t))ReguladorReguladorReguladorMédiaMédiaMóvelMóveltrigger(u(t))trigger(u(t))trigger(u(t))trigger(u(t))uZuZ Figura 5.17. Diagrama esquemático do controlador Histerese com Auto-ajuste. 
Para  realizar  o  auto-ajuste,  o  regulador  utiliza  a  média  móvel  do  sinal  de  controle  e  a monitora até que esta  atinja um valor entre uZ  e  uPS – por exemplo, 70% da distância  entre os patamares  –  permanecendo  ainda  mais  próximo  do  valor  de  equilíbrio,  mas  já  indicando  a tendência  do  sinal  de  controle  se  deslocar  em  direção  a  uma  das  extremidades  da  região  de trabalho. Após este valor da média móvel ser atingido, uZ assume este valor, e o sistema passa a ser referenciado a partir daí, sendo este o novo ponto de equilíbrio. 
Este  controlador  engloba  todos  os  conceitos  anteriormente  propostos  e  apresenta adicionalmente  conceitos  de  robustez  e  a  histerese.  Tendo  sido  idealizado  para  aplicações  com uma grande constante de tempo, o controlador também apresenta ferramentas que o permite lidar com sistemas mais rápidos, dado o alto grau de informações que este utiliza para definir a política de  controle.  A  formulação  do  controlador  real  pode  ser  também  mais  ou  menos  conservadora, uma  vez  que  os  parâmetros  do  sistema  permitem  definir  os  limites  permitidos  para  a  variável controlada e para a variável manipulada. 
O mérito de minimizar o esforço de controle requer, como reforçado no início da discussão, uma  flexibilidade  operacional  dos  parâmetros  de  desempenho.  Não  obstante,  as  tentativas  de minimizar  o  erro  estacionário  foram  desenvolvidas  de  forma  a  contemplar  tanto  o  sinal  de controle, quanto de permitir brechas para que o compromisso com o desempenho fosse deixado para a decisão do projetista, podendo este dar um maior peso ao desempenho.  
 72     Capítulo 6  6  Resultados  6.1  Solução pelo Desempenho A  aplicação  do  controle  híbrido  Fuzzy-PID  segundo  o  controlador  apresentado  na  seção 5.1.1  foi  simulada  para  o  sistema  apresentado  e  pelas  suas  equações.  Além  disso,  para  fins  de comparação,  também  foi  aplicado  um  controle  PID  simples,  cujos  resultados  são  apresentados nas mesmas figuras dos resultados do controle FPID. 
Então,  em  ambos  os  sistemas  a  variável  manipulada,  u(t),  é  a  freqüência  com  a  qual  o inversor  alimenta  a  BCS,  cuja  relação  com  a  vazão  de  saída  do  sistema  é  direta,  e  a  variável controlada, y(t), é o nível da ‘piscina’. A referência, r(t), é fixada no valor de 30 metros. 
6.1.1  Fuzzy-PID Idealmente, o controle FPID do tipo supervisor que é apresentado na seção 5.1.1 representa uma  melhoria  para  o  sistema  de  controle  do  VASPS,  devido  a  não-intrusão  no  processo, considerando  que  já  havia  um  controle  PID  em  campo  operando.  Diante  desse  fato,  o  sistema com  supervisor  não  apresentaria  pioras  no  controle,  uma  vez  que  o  controlador  original  seria mantido, sofrendo apenas correções em seus ganhos. 
Foram realizadas simulações que levaram em consideração uma partida do sistema com o nível do reservatório em seu valor mínimo de forma a avaliar o desempenho em um caso crítico e com  leitura  real  abaixo  da  referência.  Esta  situação  permite  avaliar  a  resposta  do  sistema  no enchimento,  que  é  mais  crítico  que  o  esvaziamento,  uma  vez  que  a  bomba  deve  ser  acionada apenas  após  estar  submersa,  sendo  estritamente  necessário  um  comportamento  controlado.  A  73 referência  de  nível  para  o  sistema  foi  de  30  metros  e  as  simulações  foram  realizadas  com  o sistema  supervisório  e  sem  este  para  efeito  de  comparação  e  mensuração  da  melhoria  no desempenho. 
a)a)]]mm[[  ooiirróóttaavvrreesseerr  oodd353535303030N com PIDN com PIDN com PIDN com FuzzyN com FuzzyN com Fuzzy  lleevvííNN252525000500500500100010001000150015001500200020002000250025002500300030003000350035003500400040004000450045004500500050005000Tempo [s]Tempo [s]b)b)  ooããççaattoorr  585858]]zzHH565656545454525252505050eeddaa[[  SSCCBBaadd  iiccnnêêüüqqeerrFF  u com PIDu com PIDu com PIDu com Fuzzyu com Fuzzyu com Fuzzy484848000500500500100010001000150015001500200020002000250025002500300030003000350035003500400040004000450045004500500050005000Tempo [s]Tempo [s] Figura 6.1. Comparativo da resposta e do sinal de controle entre o PID e o FPID. 
A  situação  crítica  imposta  permite  a  avaliação  da  resposta  em  regime  transiente  e  seu estacionamento após este período. Este efeito está reproduzido na Figura 6.1, onde é apresentada a resposta do sistema com o controlador PID contra a resposta com o controlador FPID. Além da resposta do sistema, está sendo avaliado o sinal de controle que gerou a dada resposta. 
Conforme apresentado na Figura 6.1, nota-se uma melhoria significativa no sobresinal e no tempo  de  estabilização  do  sistema,  tão  embora  o  sinal  de  controle  seja  muito  similar. 
Considerando que o módulo supervisor aumenta a constante D em torno do zero, é natural que a resposta possua menor sobressinal, dado que o amortecimento foi aumentado. Entretanto, há erro estacionário  no  sistema,  causado  pela  saturação  do  efeito  integral  em  valores  negativos  muito altos. Ambos estes efeitos podem ser observados na Figura 6.2, que apresenta o comportamento das constantes ao longo da simulação, bem como a decomposição do sinal de controle entre as contribuições individuais de cada constante. 
 74 a)a)b)b)c)c)665050222  eelloorrttnnoocc  eedd00055  eelloorrttnnoocc  eedd  eelloorrttnnoocc  eedd00-2-2-244-50-50-4-4-4]]zzHHuI com PIDuI com PIDuI com PIDcom FPIDuucom FPIDucom FPIDIIIuDcom PIDuDcom PIDcom FPIDuucom FPIDDD33]]zzHH]]zzHH-6-6-6[[  llaannooiiccrrooppoorrPP-100-100  llaanniiss  oodd  eedduuttiill  llaanniiss  oodd  eedduuttiill[[  oovviittaavviirreeDD[[  llaarrggeettnn  llaanniiss  oodd  eedduuttiill22-8-8-8-150-150-10-10-1011II-12-12-12-200-20000-14-14-14ucom PIDuucom PIDcom PIDPPPuPcom FPIDuPcom FPIDuPcom FPID-250-250ppmmAA-1-1ppmmAAppmmAA-16-16-16-2-2-18-18-18-300-300001000100020002000300030004000400050005000001000 2000 3000 4000 50001000 2000 3000 4000 50000001000 2000 3000 4000 50001000 2000 3000 4000 50001000 2000 3000 4000 5000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]d)d)e)e)f)f)x 10-4x 10-4141414llaannooiiccrrooppoorrPP  eettnnaattssnnooccaaddeedduuttiill200200200121212aavviittaavviirreeDD  eettnnaattssnnooccaaddeedduuttiill121212180180180llaarrggeettnn101010160160160101010888140140140II  eettnnaattssnnooccaaddeedduuttiillD com PIDD com PIDD com PID888120120120D com FPIDD com FPIDD com FPIDI com PIDI com PIDI com PID666666100100100I com FPIDI com FPIDI com FPID444808080444      222606060  222    P com PIDP com PIDP com PIDP com FPIDP com FPIDP com FPID404040000000ppmmAA202020ppmmAAppmmAA-2-2-2-2-2-2000001000 2000 3000 4000 50001000 2000 3000 4000 50000001000 2000 3000 4000 50001000 2000 3000 4000 50001000 2000 3000 4000 50000001000 2000 3000 4000 50001000 2000 3000 4000 50001000 2000 3000 4000 5000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.2. Sinal de controle e comportamento das constantes entre o PID e o FPID. 
Na  Figura  6.2,  o  sinal  de  controle  apresentado  na  Figura  6.1b  é  decomposto  em  suas componentes proporcional (Figura 6.2a), integral (Figura 6.2b) e derivativa (Figura 6.2c). Estes sinais são as contribuições de cada ganho na composição do sinal de controle total, verificando a saturação de sinal causada pelo efeito integral. Além disso, é apresentado nos gráficos inferiores o  comportamento  ao  qual  as  constantes  foram  submetidas.  Como  exemplo,  nota-se  o  reforço aplicado  ao  sinal  derivativo  na  Figura  6.2c  próximo  à  região  onde  o  Nível  cruzou  com  a referência,  indicando  erro  pequeno.  Comparando  com  a  Figura  6.2f,  há  a  indicação  de  que  o reforço foi causado pelo aumento no valor da constante KD, com uma variação positiva de 90%, saindo de 100 e indo para 190, obtendo-se um sinal de controle mais expressivo, mesmo com o sinal cx, a variação relativa do erro, inalterado em relação ao controle PID. 
Embora o sinal de controle proporcional apresentado na Figura 6.2a seja menor no sistema com  supervisório,  isso  se  deve  ao  fato  de  que  o  erro  no  sistema  final  é  menor,  conforme observado na Figura 6.1a. Ainda assim, há um aumento no valor da constante KP apresentada na Figura 6.2d, reforçando a ação. Dessa forma, observa-se uma melhoria geral na resposta causada por  diversas  ações  pontuais  combinadas.  Além  disso,  o  sinal  de  controle  foi  praticamente  75 mantido,  de  forma  que  a  energia  de  controle  e  a  variação  imposta  ao  atuador  são  as  mesmas, viabilizando um projeto sobre um controlador que atendia o requisito de energia de controle. O 
desempenho obtido, que era o objeto de estudo do trabalho, foi alcançado sem perda de qualidade no  sinal  de  controle  e  sem  perda  de  estabilidade.  Para  os  resultados  dos  modelos  derivados  do FPID, consultar o Apêndice A. 
6.2  Soluções pelo Esforço de Controle Nesta  seção,  as  variáveis  controlada  e  manipulada  continuam  sendo  as  mesmas,  dado  o mesmo  processo  a  controlar.  Entretanto,  o  objetivo  de  controle  é  formulado  com  o  intuito  de minimizar  alterações  no  sinal  de  controle  de  forma  que  o  sistema  permaneça  com  um  sinal  de controle  u(t)  próximo  do  constante,  e  a  saída,  y(t),  oscilante.  A  saída,  no  entanto,  representada pelo  nível  de  líquido  no  VASPS,  deve  permanecer  dentro  da  faixa  estipulada  para  projeto,  de forma que seria interessante conceber um sistema que evite muitas oscilações. Estas oscilações, por  sua  vez,  são  geradas  pelo  distúrbio  proporcionado  pelo  gerador  de  golfadas  e,  nos  projetos para  minimização  do  esforço  de  controle,  ao  passo  que  bons  resultados  são  adquiridos  para  o sinal de controle, o gerador de golfadas é substituído por um mais agressivo, que vá dificultar o controle, conforme apresentado anteriormente. 
O VASPS em campo é um sistema com alta constante de tempo, conforme experimentado em seus projetos iniciais, de forma que variações no nível de líquido não sofrem oscilações tão bruscas quanto às simuladas para a validação dos controladores deste estudo. No entanto, utilizar um gerador de golfadas agressivo reforça o projeto computacional para futuras experimentações com o sistema. 
6.2.1  Monitoramento da Média Móvel Com  o  controlador  adaptado  para  o  VASPS,  foram  realizadas  simulações  para  testar  o conceito  proposto  neste  modelo,  usando  o  primeiro  gerador  de  golfadas.  Os  parâmetros manipulados  nas  simulações  foram  o  nível  inicial  do  reservatório  e  o  número  de  pontos  usado para  o  cálculo  da  média  móvel,  doravante  referenciado  por  n.  O  nível  inicial  do  reservatório seguiu a referência (30 metros) no primeiro conjunto de simulações, e foi variado para 60 metros posteriormente, ou seja, com o anular do VASPS completamente cheio. Este nível inicial é usado para  as  partidas  do  sistema  com  óleo  diesel  antes  de  abrir  a  entrada  de  fluido  multifásico,  e permite  avaliar  a  resposta  do  sistema  no  regime  transiente  para  uma  condição  de  erro  inicial muito grande. A média móvel por sua vez, assumiu os valores de 500, 2000 e 5000 pontos a uma  76 taxa de amostragem de 0,1 segundos, cobrindo assim uma janela de tempo 10 vezes menor que o número de pontos. 
Os resultados totalizaram seis simulações, cujas curvas são apresentadas separadamente em duas figuras. A Figura 6.3 apresenta a resposta para o nível inicial de 30 metros, com o nível nos gráficos superiores e o sinal de controle nos gráficos inferiores, tendo sido ordenados da esquerda para  a  direita  os  casos  de  n  igual  a  500,  2000  e  5000  pontos.  O  mesmo padrão  foi  adotado  na Figura 6.4, que apresenta os resultados para o nível inicial de 60 metros. 
As curvas permitem verificar o efeito de n. Quanto menor, mais próximo o nível médio está do instantâneo e, portanto, maiores são as variações no sinal de saída, uma vez que os picos estão refletidos  no  nível  médio.  Do  contrário,  quanto  maior,  mais  lenta  e  gradual  é  a  reação  do controlador, o que permite picos mais distantes da referência. Em ambas as simulações, nota-se este  comportamento  de  forma  que  para  o  valor  intermediário  de  n,  de  2000,  não  há  picos destacados  na  resposta,  como  ocorre  com  o  valor  de  500  pontos,  bem  como  há  um comportamento  mais  descendente  e  ascendente  do  sinal  de  controle,  ao  invés  de  uma  resposta retardada em relação à instantânea, como ocorre com o valor de 5000 pontos.  
 77 b)b)b)b)a)a)a)a)c)c)c)c)Resposta do Nível para n=500Resposta do Nível para n=500Resposta do Nível para n=500Resposta do Nível para n=500Resposta do Nível para n=2000Resposta do Nível para n=2000Resposta do Nível para n=2000Resposta do Nível para n=2000Resposta do Nível para n=5000Resposta do Nível para n=5000Resposta do Nível para n=5000Resposta do Nível para n=5000353535353535353535353535353535NNNNNNNNNNNNNNNNNNNNNNNNmedmedmedmed343434343434343434343434343434(t)(t)(t)(t)(t)(t)(t)(t)(t)(t)(t)(t)medmedmedmedmedmedmedmed333333333333333333333333333333323232323232323232323232323232]]]]]]]]]]]]mmmmmmmmmmmm313131313131313131313131313131[[[[    llll[[[[    llll[[[[    lllleeeevvvvNNNNeeeevvvvNNNNeeeevvvvNNNN303030303030303030303030303030íííííííííííí292929292929292929292929292929282828282828282828282828282828272727272727272727272727272727262626262626262626262626262626252525252525252525252525252525000005005005005005001000100010001000100015001500150015001500200020002000200020000000050050050050050010001000100010001000150015001500150015002000200020002000200000000500500500500500100010001000100010001500150015001500150020002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]d)d)d)d)e)e)e)e)f)f)f)f)Rotação da Bomba para n=500Rotação da Bomba para n=500Rotação da Bomba para n=500Rotação da Bomba para n=500Rotação da Bomba para n=2000Rotação da Bomba para n=2000Rotação da Bomba para n=2000Rotação da Bomba para n=2000Rotação da Bomba para n=5000Rotação da Bomba para n=5000Rotação da Bomba para n=5000Rotação da Bomba para n=5000626262626262626262626262626262freffreffreffreffreffreffreffreffreffreffreffref606060606060606060606060606060]]]]zzzzHHHH]]]]zzzzHHHH]]]]zzzzHHHH[[[[    [[[[    aaaa[[[[    aaaa585858585858585858585858585858aaaaiiiiiiiiiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFFccccnnnnêêêêüüüüqqqqeeeerrrrFFFFccccnnnnêêêêüüüüqqqqeeeerrrrFFFF565656565656565656565656565656545454545454545454545454545454525252525252525252525252525252505050505050505050505050505050484848484848484848484848484848000005005005005005001000100010001000100015001500150015001500200020002000200020000000015001500150015001500200020002000200020000000050050050050050050050050050050010001000100010001000100010001000100010001500150015001500150020002000200020002000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.3. Curvas de resposta para o controlador Média Móvel, com nível inicial em 30 metros. 
Pelas  simulações  percebe-se  que  o  sinal  de  controle  se  comportou  conforme  esperado, apresentando poucas oscilações quando estabilizado. No entanto, a simulação realizada para 2000 segundos  permitiu  avaliar  correções  sobre  o  nível  apenas  no  caso  de  nível  inicial  igual  a  60 metros, com a média móvel usando 5000 pontos, caso no qual há oscilações devido à transição entre  conjuntos  nebulosos.  Dessa  forma  já  é  possível  notar  qual  será  o  efeito  de  um  distúrbio prolongado  tentando  desestabilizar  o  sistema  –  erro  estacionário  pela  duração  do  distúrbio  e oscilações do sinal de controle na fronteira entra a faixa de estabilidade e a faixa de transição. 
 78 b)b)b)b)a)a)a)a)c)c)c)c)Resposta do Nível para n=500Resposta do Nível para n=500Resposta do Nível para n=500Resposta do Nível para n=500Resposta do Nível para n=2000Resposta do Nível para n=2000Resposta do Nível para n=2000Resposta do Nível para n=2000Resposta do Nível para n=5000Resposta do Nível para n=5000Resposta do Nível para n=5000Resposta do Nível para n=5000353535353535353535353535353535NNNNNNNNNNNNNNNNNNNNNNNN343434343434343434343434343434(t)(t)(t)(t)(t)(t)(t)(t)(t)(t)(t)(t)medmedmedmedmedmedmedmedmedmedmedmed333333333333333333333333333333323232323232323232323232323232]]]]]]]]]]]]mmmmmmmmmmmm313131313131313131313131313131[[[[    llll[[[[    llll[[[[    lllleeeevvvvNNNNeeeevvvvNNNNeeeevvvvNNNN303030303030303030303030303030íííííííííííí292929292929292929292929292929282828282828282828282828282828272727272727272727272727272727262626262626262626262626262626252525252525252525252525252525000005005005005005001000100010001000100015001500150015001500200020002000200020000000050050050050050010001000100010001000150015001500150015002000200020002000200000000500500500500500100010001000100010001500150015001500150020002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]d)d)d)d)e)e)e)e)f)f)f)f)Rotação da Bomba para n=500Rotação da Bomba para n=500Rotação da Bomba para n=500Rotação da Bomba para n=500Rotação da Bomba para n=2000Rotação da Bomba para n=2000Rotação da Bomba para n=2000Rotação da Bomba para n=2000Rotação da Bomba para n=5000Rotação da Bomba para n=5000Rotação da Bomba para n=5000Rotação da Bomba para n=5000626262626262626262626262626262ffffrefrefrefrefffffrefrefrefrefffffrefrefrefref606060606060606060606060606060]]]]zzzzHHHH]]]]zzzzHHHH]]]]zzzzHHHH[[[[    [[[[    aaaa[[[[    aaaa585858585858585858585858585858aaaaiiiiiiiiiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFFccccnnnnêêêêüüüüqqqqeeeerrrrFFFFccccnnnnêêêêüüüüqqqqeeeerrrrFFFF565656565656565656565656565656545454545454545454545454545454525252525252525252525252525252505050505050505050505050505050484848484848484848484848484848000005005005005005001000100010001000100015001500150015001500200020002000200020000000015001500150015001500200020002000200020000000050050050050050050050050050050010001000100010001000100010001000100010001500150015001500150020002000200020002000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.4. Curvas de resposta para o controlador Média Móvel, com nível inicial em 60 metros. 
Finalmente,  é  possível  afirmar  que  este  controlador  deve  ser  aplicado  apenas  a  sistemas onde o sinal de referência não sofre muitas variações, ou quando for possível projetar a faixa de trabalho  do  controlador,  considerando  uma  variação  limitada  na  referência,  de  tal  forma  que  a situação crítica continue dentro dos limites de estabilidade do sistema. Essas condições devem ser respeitadas como fatores determinantes da garantia de estabilidade do sistema. Essa formulação também é possível para o sistema VASPS. 
6.2.2  Classificador por Regiões Este controlador foi realizado com o intuito de robustez máxima, uma vez que monitora a faixa  de  estabilidade  e  possui  uma  grande  região  de  rotação  constante  no  centro  da  faixa  de pertinência.  Dessa  forma,  foram  tomadas  medidas  para  checar  tal  característica.  A  primeira  foi utilizar um sinal de referência variável para todas as simulações, avaliando se é possível perturbar a estabilidade do sinal de controle. Além disso, as constantes  LI e  LS foram simuladas para os valores de 20 e 40 metros, apresentadas nos gráficos à esquerda, e depois variadas para os valores  79 24 e 38 metros, apresentadas nos gráficos à direita, de forma a avaliar o efeito causado por um controle mais rígido no processo.  
A Figura 6.5 apresentada a simulação para o nível inicial de 30 metros. Este nível inicial representa a continuidade da operação do sistema para qualquer instante de tempo, sendo o valor operacional  ideal  do  nível.  É  necessário  verificar  também  como  o  sistema  reage  na  transição, tendo sido realizadas as mesmas simulações para o nível inicial de 60 metros, conforme a Figura 6.6. 
a)a)a)a)b)b)b)b)Resposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=25 m e LS=38 mResposta do Nível para LI=25 m e LS=38 mResposta do Nível para LI=25 m e LS=38 mResposta do Nível para LI=25 m e LS=38 m4040404040404040NNNNReferênciaReferênciaReferênciaReferênciaNNNNReferênciaReferênciaReferênciaReferência383838383838383836363636363636363434343434343434]]]]]]]]mmmmmmmm3232323232323232[[[[    lllleeeevvvvííííNNNN[[[[    lllleeeevvvvííííNNNN3030303030303030282828282828282826262626262626262424242424242424222222222222222220202020202020201000100010001000200020002000200030003000300030004000400040004000100010001000100020002000200020003000300030003000Tempo [s]Tempo [s]Tempo [s]Tempo [s]40004000400040000000500050005000500000005000500050005000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c)c)c)c)d)d)d)d)Rotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=25 m e LS=38 mRotação da Bomba para LI=25 m e LS=38 mRotação da Bomba para LI=25 m e LS=38 mRotação da Bomba para LI=25 m e LS=38 m6262626262626262freffreffreffreffreffreffreffref6060606060606060]]]]zzzzHHHH]]]]zzzzHHHH5858585858585858[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF56565656565656565454545454545454525252525252525250505050505050504848484848484848100010001000100020002000200020003000300030003000400040004000400010001000100010002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]300030003000300040004000400040000000500050005000500000005000500050005000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.5. Resposta para o Classificador por Regiões para o nível inicial de 30 metros.  
 80 a)a)a)a)b)b)b)b)Resposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=20 m e LS=40 mResposta do Nível para LI=25 m e LS=38 mResposta do Nível para LI=25 m e LS=38 mResposta do Nível para LI=25 m e LS=38 mResposta do Nível para LI=25 m e LS=38 m4040404040404040NNNNReferênciaReferênciaReferênciaReferênciaNNNNReferênciaReferênciaReferênciaReferência383838383838383836363636363636363434343434343434]]]]]]]]mmmmmmmm3232323232323232[[[[    llll[[[[    llll3030303030303030eeeevvvvNNNNeeeevvvvNNNNíííííííí282828282828282826262626262626262424242424242424222222222222222220202020202020201000100010001000200020002000200030003000300030004000400040004000100010001000100020002000200020003000300030003000Tempo [s]Tempo [s]Tempo [s]Tempo [s]40004000400040000000500050005000500000005000500050005000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c)c)c)c)d)d)d)d)Rotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=20 m e LS=40 mRotação da Bomba para LI=25 m e LS=38 mRotação da Bomba para LI=25 m e LS=38 mRotação da Bomba para LI=25 m e LS=38 mRotação da Bomba para LI=25 m e LS=38 m6262626262626262freffreffreffreffreffreffreffref6060606060606060]]]]zzzzHHHH]]]]zzzzHHHH5858585858585858[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF56565656565656565454545454545454525252525252525250505050505050504848484848484848100010001000100020002000200020003000300030003000400040004000400010001000100010002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]300030003000300040004000400040000000500050005000500000005000500050005000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.6. Resposta para o Classificador por Regiões para o nível inicial de 60 metros. 
Conforme  esperado,  o  controlador  mostrou-se  bastante  robusto  e  teve  a  transição  mais suave apresentada até agora. No entanto, o efeito colateral foi bastante prejudicial – o nível não acompanha  nenhuma  das  variações  da  referência,  pois  não  há  ajuste  na  região  de  projeto,  uma vez que na base de regras o valor do acionamento da bomba para todo o intervalo da região de estabilidade é único. Isso explica as oscilações, que ocorrem porque o nível se estabiliza próximo à região de transição, assim que adentra a região de estabilidade, não minimizando o erro. 
6.2.3  Classificador com Média Este  controlador  apresentou  um  resultado  bastante  satisfatório,  conforme  apontado  pelas simulações  para  níveis  iniciais  de  30  metros  e  60  metros  de  altura,  com  o  sinal  de  referência mantido constante, conforme a Figura 6.7, e para sinal de referência variável, conforme a Figura 6.8. 
 81 a)a)a)a)b)b)b)b)Resposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 m4040404040404040NNNNReferênciaReferênciaReferênciaReferênciaNNNNReferênciaReferênciaReferênciaReferência383838383838383836363636363636363434343434343434]]]]]]]]mmmmmmmm3232323232323232[[[[    llll[[[[    llll3030303030303030eeeevvvvNNNNeeeevvvvNNNNíííííííí282828282828282826262626262626262424242424242424222222222222222220202020202020201000100010001000200020002000200030003000300030004000400040004000100010001000100020002000200020003000300030003000Tempo [s]Tempo [s]Tempo [s]Tempo [s]40004000400040000000500050005000500000005000500050005000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c)c)c)c)d)d)d)d)Rotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 m6262626262626262freffreffreffreffreffreffreffref6060606060606060]]]]zzzzHHHH]]]]zzzzHHHH5858585858585858[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF56565656565656565454545454545454525252525252525250505050505050504848484848484848100010001000100020002000200020003000300030003000400040004000400010001000100010002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]300030003000300040004000400040000000500050005000500000005000500050005000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.7. Resposta e Sinal de Controle para controlador Classificador com Média, com referência constante. 
 82 a)a)a)a)b)b)b)b)Resposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 m4040404040404040NNNNReferênciaReferênciaReferênciaReferênciaNNNNReferênciaReferênciaReferênciaReferência383838383838383836363636363636363434343434343434]]]]]]]]mmmmmmmm3232323232323232[[[[    lllleeeevvvvííííNNNN[[[[    lllleeeevvvvííííNNNN3030303030303030282828282828282826262626262626262424242424242424222222222222222220202020202020201000100010001000200020002000200030003000300030004000400040004000100010001000100020002000200020003000300030003000Tempo [s]Tempo [s]Tempo [s]Tempo [s]40004000400040000000500050005000500000005000500050005000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c)c)c)c)d)d)d)d)Rotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 m6262626262626262freffreffreffreffreffreffreffref6060606060606060]]]]zzzzHHHH]]]]zzzzHHHH5858585858585858[[[[    aaaa[[[[    iiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFFaaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656565656iiii5454545454545454525252525252525250505050505050504848484848484848100010001000100020002000200020003000300030003000400040004000400010001000100010002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]300030003000300040004000400040000000500050005000500000005000500050005000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.8. Resposta e Sinal de Controle para controlador Classificador com Média, com referência variável. 
É  possível  notar  nestas  simulações  que  há  algumas  poucas  oscilações  curtas  ao  longo  da operação do sistema, tão embora estas se apresentem bem menos freqüentes que nos modelos de controlador  anterior.  Além  disso,  percebe-se  que  o  sinal  acompanha  as  alterações  do  set  point permitindo  uma  melhoria  significativa  de  desempenho  em  relação  aos  outros  modelos.  Assim, devido  ao  bom  resultado  que  este  controlador  apresentou  usando  o  gerador  de  golfadas  com freqüência de golfadas aleatória, foi realizado um novo teste, ainda com set point variável para um gerador de golfadas com amplitude de golfadas aleatórias, de acordo com a Figura 6.9.  
 83 a)a)a)a)b)b)b)b)Resposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 m4040404040404040NNNNReferênciaReferênciaReferênciaReferênciaNNNNReferênciaReferênciaReferênciaReferência383838383838383836363636363636363434343434343434]]]]]]]]mmmmmmmm3232323232323232[[[[    llll[[[[    llll3030303030303030eeeevvvvNNNNeeeevvvvNNNNíííííííí282828282828282826262626262626262424242424242424222222222222222220202020202020201000100010001000200020002000200030003000300030004000400040004000100010001000100020002000200020003000300030003000Tempo [s]Tempo [s]Tempo [s]Tempo [s]40004000400040000000500050005000500000005000500050005000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c)c)c)c)d)d)d)d)Rotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 m6262626262626262freffreffreffreffreffreffreffref6060606060606060]]]]zzzzHHHH]]]]zzzzHHHH5858585858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF[[[[    aaaaiiii5656565656565656iiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5454545454545454525252525252525250505050505050504848484848484848100010001000100020002000200020003000300030003000400040004000400010001000100010002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]300030003000300040004000400040000000500050005000500000005000500050005000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.9. Resposta e Sinal de Controle para controlador Classificador com Média, com o último gerador de golfadas, de freqüência e amplitude variáveis. 
Pela figura, nota-se que mesmo com um gerador de golfadas agressivo, tanto o desempenho quanto a manipulação do sinal de controle são mantidos, provendo o processo com um resultado conforme  o  desejado  –  o  sinal  de  controle  corrigiu  o  sinal  de  saída  (nível  da  piscina)  em  uma faixa  bastante  próxima  de  variação  com  picos  mais  largos  e  suaves  do  que  os  obtidos  com  os outros modelos. 
6.2.4  Histerese com Auto-ajuste Uma vez que este controlador abrange ambos os conceitos introduzidos para os outros dois, possuindo  um  classificador  na  entrada  e  o  cômputo  da  média  móvel,  é  necessário  realizar simulações  para  todo  o  conjunto  de  parâmetros.  No  entanto  serão  feitas  duas  análises separadamente – uma para o controlador em si e sua dinâmica junto ao processo, e outra para a avaliação  do  efeito  do  mecanismo  de  auto-ajuste.  Para  conseguir  uma  simulação  apenas avaliando o controlador, sem o mecanismo de auto-ajuste, basta manter a entrada do gerador de golfadas  do  sistema  como  vinha  sendo  mantida  até  então,  pois  o  mecanismo  de  auto-ajuste  84 apenas tem efeito após o sistema sofrer mudanças dinâmicas, como proposto em seu projeto no Capítulo 5. No caso do VASPS, essa mudança dinâmica seria a depleção do reservatório de óleo, com o decaimento da pressão na formação. Já para a simulação apenas do mecanismo de auto-ajuste,  pode-se  simular  uma  vazão  de  entrada  decaindo  e  manter  os  parâmetros  do  controlador constantes,  de  forma  a  avaliar  as  correções  impostas  às  freqüências  de  acionamento,  uZ,  uPS  e uNS. 
6.2.4.1  Avaliação do Controlador Para a avaliação do controlador, foram realizadas inicialmente simulações variando apenas o nível inicial e o sinal de referência, a fim de avaliar o transiente. Os demais parâmetros, como as fronteiras entre regiões de trabalho, µ1 e µ2, a janela de histerese, δ, o valor da saída em cada região,  uNB,  uNS,  uZ,  uPS  e  uPB,  os  limites  de  estabilidade  do  sistema, LI  e  LS,  e  o  número  de pontos  utilizados  na  Média  Móvel,  n,  foram  mantidos  constantes  nas  simulações  iniciais.  A Figura  6.10  apresenta  um  esquemático  para  estas  configurações,  com  os  valores  de  µ1  igual  a 0,35 e µ2 igual a 0,75, δ igual a 0,1, uZ valendo 54 Hz, uPS valendo 56 Hz, uNS em 52 Hz, uPB em 60 Hz e uNB em 48 Hz. Por fim, n foi configurado para 2000 pontos, a taxa de amostragem para 0,1 segundo, LI em 20 metros e LS em 40 metros. 
Histerese Histerese Histerese de subidade subidade subida48 Hz48 Hz48 Hz52 Hz52 Hz52 Hz54 Hz54 Hz54 Hz56 Hz56 Hz56 Hz60 Hz60 Hz60 HzHisterese Histerese de descidade descida48 Hz48 Hz48 Hz52 Hz52 Hz52 Hz54 Hz54 Hz54 Hz56 Hz56 Hz56 Hz60 Hz60 Hz60 Hz___µµµpertinência médiapertinência média-0,75-0,75-0,65-0,65-0,35-0,35-0,25-0,250,250,250,350,350,650,650,750,75 Figura 6.10. Esquemático da histerese adaptado para o caso VASPS. 
Foram  realizadas  quatro  simulações  com  estes  parâmetros.  Para  este  controlador,  que  é conceitualmente  mais  robusto  que  os  anteriores,  foi  utilizado  o  último  gerador  de  golfadas apresentado,  com  amplitude  e  freqüência  das  golfadas  de  líquido  variáveis.  O  nível  inicial assumiu  o  valor  de  30  metros  nos  gráficos  à  esquerda,  e  o  valor  de  60  metros  nos  gráficos  à direita. A referência foi mantida constante (30 metros) na Figura 6.11, e foi variada no segundo conjunto de simulações conforme o sinal pontilhado apresentado na Figura 6.12. 
 85 Este  modelo  apresentou,  pelas  simulações,  um  melhor  sinal  de  controle,  sem  oscilações curtas e freqüentes, bem como um erro estacionário condicionalmente proporcional. No entanto, o grau de compromisso entre qualidade do sinal de controle e desempenho, pode ser manipulado pelos  parâmetros  que  foram  mantidos  constantes  nestas  simulações,  como  pode  ser  visto  no Apêndice B, onde são apresentadas simulações exaustivas para todos os parâmetros. Além disso, o  controlador  foi  submetido  a  bruscas  variações  da  referência,  não  apresentando  oscilações indevidas no sinal de controle, e acompanhando a referência dentro de uma faixa de proximidade. 
a)a)a)a)b)b)b)b)Resposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 m4040404040404040NNNNReferênciaReferênciaReferênciaReferênciaNNNNReferênciaReferênciaReferênciaReferência383838383838383836363636363636363434343434343434]]]]]]]]mmmmmmmm3232323232323232[[[[    llll[[[[    llll3030303030303030eeeevvvvNNNNeeeevvvvNNNNíííííííí282828282828282826262626262626262424242424242424222222222222222220202020202020201000100010001000200020002000200030003000300030004000400040004000100010001000100020002000200020003000300030003000Tempo [s]Tempo [s]Tempo [s]Tempo [s]40004000400040000000500050005000500000005000500050005000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c)c)c)c)d)d)d)d)Rotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 m6262626262626262freffreffreffreffreffreffreffref6060606060606060]]]]zzzzHHHH]]]]zzzzHHHH5858585858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF[[[[    aaaaiiii5656565656565656iiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5454545454545454525252525252525250505050505050504848484848484848100010001000100020002000200020003000300030003000400040004000400010001000100010002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]300030003000300040004000400040000000500050005000500000005000500050005000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.11. Resposta para o controlador Histerese com Auto-ajuste, com referência constante. 
 86 a)a)a)a)b)b)b)b)Resposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=30 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 mResposta do Nível para o Nível Inicial N0=60 m4040404040404040NNNNReferênciaReferênciaReferênciaReferênciaNNNNReferênciaReferênciaReferênciaReferência383838383838383836363636363636363434343434343434]]]]]]]]mmmmmmmm3232323232323232[[[[    llll[[[[    llll3030303030303030eeeevvvvNNNNeeeevvvvNNNNíííííííí282828282828282826262626262626262424242424242424222222222222222220202020202020201000100010001000200020002000200030003000300030004000400040004000100010001000100020002000200020003000300030003000Tempo [s]Tempo [s]Tempo [s]Tempo [s]40004000400040000000500050005000500000005000500050005000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c)c)c)c)d)d)d)d)Rotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=30 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 mRotação da Bomba para o Nível Inicial N0=60 m6262626262626262freffreffreffreffreffreffreffref6060606060606060]]]]zzzzHHHH]]]]zzzzHHHH5858585858585858[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF56565656565656565454545454545454525252525252525250505050505050504848484848484848100010001000100020002000200020003000300030003000400040004000400010001000100010002000200020002000Tempo [s]Tempo [s]Tempo [s]Tempo [s]300030003000300040004000400040000000500050005000500000005000500050005000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura 6.12. Resposta para o controlador Histerese com Auto-ajuste, com referência variável. 
As  variações  da  amplitude  do  sinal  de  saída,  a  rotação  da  bomba,  para  esta  resposta parecem  ser  excedentes  ao  desejado  para  o  VASPS,  mas  isso  ocorre  devido  à  quantidade  de variações na referência no curto período de tempo. Caso o operador venha a fazê-lo em campo, o sistema obedecerá, pois está sendo projetado para isso. A recomendação, no entanto, é que caso se  deseje  a  vida  útil  mais  longa  possível  para  a  BCS,  menores  devem  ser  as  variações  na referência. 
O sistema apresentou uma transição de estados suave ao sair do patamar de nível inicial de 60  metros.  A  transição  foi  tão  paulatina  quanto  a  variação  do  nível  permitiu.  Embora  este controlador  apresente  uma  qualidade  visível  no  sinal  de  controle,  as  simulações  iniciais apresentaram  um  desempenho  que  ainda  deixa  a  desejar  no  tempo  de  resposta  e  no  erro estacionário, tão embora os resultados se apresentem muito próximo do desejado para o VASPS. 
As  oscilações  obviamente  não  permitem  um  controle  de  nível  exemplar,  mas  o  controle  de rotação, que é o foco deste modelo, apresenta-se adequado para as simulações de longa duração que foram tomadas a partir de então. 
 87 O Apêndice B apresenta um conjunto de experimentos computacionais realizados sobre o controlador  Histerese  com  Auto-ajuste  para  o  teste  do  controlador  adaptado  ao  VASPS,  ainda sem  testar  o  auto-ajuste.  Estas  simulações  visam  encontrar  a  configuração  ideal  para  os parâmetros, bem como seu efeito na dinâmica do sistema. O apêndice conclui com propostas para experimentação  real  de  uma  implementação  dos  conceitos  desenvolvidos  e  propostos  neste trabalho. Para fins de referência, a Tabela 6.1 apresenta os grupos de experimentos desenvolvidos computacionalmente. 
Tabela 6.1. Planejamento dos experimentos computacionais para verificação da relação entre parâmetros, sinal de controle e resposta do sistema. 
Variáveis µ1 - µ2 Simulação  Ordem [uNB uNS uZ uPS uPB] δ1 – δ2 N0  SP 30  30  2000 30  30  4000 30  var  2000 30  var  4000 60  var  2000 60  var  2000 60  var  2000 60  30  2000 60  30  2000 60  30  2000 30  30  2000 30  30  2000 30  30  6000 30  30  4000 30  30  4000 30  30  6000 30  30  6000 n rsl/fsl 2% 2% 2% 2% 2% 2% 2% 2% 2% 2% 5% 5% 10% 5% 5% 10% 10% 11 12 21 22 1 2 3 1 2 3 1 2 3 1 2 1 2  10% - 10% 10% - 10% 10% - 10% 10% - 10% 20% - 20% 20% - 20% 20% - 20% 10% - 10% 15% - 15% 20% - 20% 10% - 10% 20% - 20% 40% - 30% 20% - 20% 20% - 20% 40% - 30% 40% - 30% 35% - 75% 35% - 75% 35% - 75% 35% - 75% 40% - 80% 40% - 80% 40% - 80% 35% - 75% 35% - 75% 40% - 80% 35% - 75% 40% - 80% 40% - 80% 40% - 80% 40% - 80% 40% - 80% 40% - 80% [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] A B [60 55.5 54 52.5 48] [60 55 54 53 48] [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] [60 55 54 53 48] [60 55 54 53 48] [60 55 54 53 48] [60 56 54 52 48] [60 55 54 53 48] C 1 2 [60 55.5 54 52.5 48] 3 [60 55 54 53 48]         Ademais,  as  curvas  conclusivas  do  melhor  desempenho  encontrado  são  apresentadas  na Figura 6.13, onde se pode notar a melhoria em relação às simulações iniciais. É importante notar que o tempo de simulação destas curvas são estendidos em relação às simulações anteriores, de forma a realizar uma avaliação mais rigorosa, e que os parâmetros para esta simulação são dados na Tabela 6.1 para a simulação 3, ordem 2. 
 88 Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040NNNNNNNNNNSP NívelSP NívelSP NívelSP NívelSP Nível1.5 Hz1.5 Hz1.5 Hz1.5 Hz1 Hz1 Hz1 Hz1 Hz3535353535]]]]mmmm[[[[    lllleeeevvvvííííNNNN3030303030252525252520202020200000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba62626262626060606060ffffref 1.5 Hzref 1.5 Hzref 1.5 Hzref 1.5 Hzf reff reff reff ref]]]]zzzzHHHH1 Hz1 Hz1 Hz1 Hz5858585858[[[[    aaaa5656565656iiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF54545454545252525252505050505048484848480000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000 Figura 6.13. Simulação 3, teste de uZ, apresentando as curvas 3.1 e 3.2. 
É possível notar que após uma avaliação mais profunda do controlador, é possível concluir sobre o sistema a ponto de configurá-lo para alguns poucos acionamentos por dia, de forma que mesmo sob as condições mais severas de trabalho, caso o sistema permaneça dentro do escopo de atuação  da  bomba,  é  possível  corrigir  os  distúrbios  e  trabalhar  com  acionamentos  mais demorados e suaves. 
6.2.4.2  Avaliação do Auto-ajuste É possível notar pela Figura 6.13 que talvez houvesse uma rotação constante para a zona de trabalho  próxima  ao  erro  nulo,  que  permitisse,  idealmente,  o  equilíbrio  para  um  distúrbio conhecido  e  controlado,  dada  pela  média  ponderada  das  rotações  ativadas  pelos  tempos  de atuação  decorridos.  Essa  rotação  proporcionaria  uma  vazão  de  saída  que  correspondesse  ao balanço  de  massa  do  sistema.  Sabe-se,  no  entanto,  que  a  vazão  recebida  pelo  VASPS  advinda do(s) poço(s) se altera conforme as golfadas evoluem, de forma que o sistema está sendo sempre perturbado, e é impossível manter um equilíbrio perfeito com uma vazão de saída constante. 
 89 Conceitualmente,  entretanto,  é  desejado  que  a  vazão  de  saída  no  equilíbrio  seja  o  mais próxima  possível  da  média  das  oscilações  da  vazão  de  entrada,  de  forma  a  minimizar  as alterações  no  sinal  de  controle.  Assim,  considerando  que  a  rotação  de  saída  é  ativada  em patamares  constantes  e  que  oscilam  em  torno  da  vazão  ideal  de  saída,  é  possível  computar  a média  móvel  do  sinal  de  controle  ativado,  da  mesma  forma  que  é  feito  na  entrada  com  a pertinência classificada, e compará-lo com os patamares de saída parametrizados, encontrando a distância  que  a  média  móvel  está  de  cada  um  deles.  No  sistema  VASPS,  esta  distância  foi configurada como sendo uma ponderação de 90% do valor do valor de equilíbrio, uZ, e 10 % do valor da faixa subseqüente, uNS ou uPS, de forma que o valor de uZ é dado pela Equação (6.1).  
u90.0
90.0
t1n∑⋅−⋅<<⋅+⋅uuuu,90,0(10,0))(tu90,0(10,0)seZNSZPSZ−nt⋅10,0t1n1n∑∑⋅+⋅≥⋅+uuuuu10.0
,)(tu90,0()se(6.1) 
ZZPSZPS−ntt⋅−⋅≤⋅−⋅uuuu10.0
,)(tu90,0(10,0)seZNSNSZ−nt A arbitragem sobre estes pesos advém das conclusões experimentais que apontaram para a necessidade  de  mudanças  suaves  no  valor  da  rotação  de  equilíbrio,  pois  quando  esta  está deslocada  do  centro  da  faixa  de  operação  do  sinal  de  controle,  mudanças  maiores  tornam-se muito bruscas no sentido onde há maior margem de variação do nível, a região distante da crítica. 
Ainda,  quando  o  sistema  busca  novo  patamar  de  equilíbrio  devido  a  mudanças  bruscas  no sistema,  alterações  de  maior  magnitude  no  patamar  de  equilíbrio  provaram  que  o  retorno  do sistema à condição de erro nulo tem dificuldades em corrigir o valor de uZ devido à necessidade de uma média de ativações muito alta – ou muito baixa – no sentido oposto do acionamento, o que dificilmente ocorre quando o sistema retorna de um ponto de operação crítico. 
Por simplicidade computacional, o valor de saída do sinal de controle na faixa de transição, uNS ou uPS, é parametrizado pelo valor da saída nos outros intervalos, uZ e uNB ou uPB, de forma que  ao  se  alterar  o  valor  de  uZ,  automaticamente  todos  os  outros  patamares  para  o  sinal  de controle  também  sejam  corrigidos,  de  tal  forma  que  o  cômputo  dos  valores  de  uNS  ou  uPS  são dados  pelas  Equações  (6.2)  e  (6.3).  É  interessante  notar  que  um  acionamento  para  uNS  ou  uPS mais  distante  que  a  avaliação  da  média  móvel  do  sinal  de  controle  proporciona    às  faixas  de correção  um  poder  significativo  de  atuação,  permitindo  variações  na  média  móvel  condizentes com os pesos de 90% e10% propostos. 
 90 (2)⋅⋅+u3u(6.2) 
ZNB=u NS(2)⋅⋅+u3u(6.3) 
=ZPBu PS a) Resposta do sistema – Nível em metrosa) Resposta do sistema – Nível em metrosb) Resposta do sistema – Nível em metrosb) Resposta do sistema – Nível em metros404040404040353535353535]]]]]]mmmmmm[[[   lll[[[   lll303030303030eeevvvNNNeeevvvNNNíííííí2525252525252020202020200000200002000020000200001000010000100001000050005000500050001500015000150001500000002000020000200002000010000100001000010000500050005000500015000150001500015000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]c) Sinal de distúrbio - Vazão de entrada [m³/s]c) Sinal de distúrbio - Vazão de entrada [m³/s]d) Sinal de distúrbio - Vazão de entrada [m³/s]d) Sinal de distúrbio - Vazão de entrada [m³/s]]]]sss]]]sss///³³³0.02
0.02
0.02
0.02
0.02
0.02
///³³³mmmmmm[[[   [[[   aaadddaaarrrtttnnneeeeeedddoooãããzzzaaaVVV0.015
0.015
0.015
0.015
0.015
0.015
aaadddaaarrrtttnnneeeeeedddoooãããzzzaaaVVV0.01
0.01
0.01
0.01
0.01
0.01
      0.005
0.005
0.005
0.005
0.005
0.005
      0000000000000020000200002000020000200002000020000200001000010000100001000010000100001000010000500050005000500015000150001500015000500050005000500015000150001500015000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]e) Sinais de Controle Total e de Equilíbrioe) Sinais de Controle Total e de Equilíbriof) Sinais de Controle Total e de Equilíbriof) Sinais de Controle Total e de Equilíbrio6262626262626262ffffffffrefrefrefref]]]]zzzzHHHH]]]]zzzzHHHHrefrefrefref6060606060606060uuuuuuuuEQEQEQEQEQEQEQEQ[[[[aaaaccccnnnneeeeüüüüqqqqeeeerrrrFFFF[[[[aaaaccccnnnneeeeüüüüqqqqeeeerrrrFFFF5858585858585858iiiiiiii565656565656565654545454545454545252525252525252505050505050505048484848484848480000000020000200002000020000200002000020000200001000010000100001000010000100001000010000500050005000500015000150001500015000500050005000500015000150001500015000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s] Figura 6.14. Curvas para as simulações de teste do mecanismo de auto-ajuste. 
Finalmente,  para  realizar  as  simulações,  também  é  importante  ponderar  sobre  o  valor  do número de pontos usado na média móvel do sinal de controle. Diferentemente do n utilizado na pertinência  de  entrada,  não  se  deseja  que  o  este  parâmetro  para  o  sinal  de  controle  seja  muito grande,  pois  o  tempo  de  reação  que  o  sinal  de  controle  deve  possuir  sobre  o  sistema  deve  ser muito menor, ou seja, sua alteração deve ser mais rápida, que o tempo de reação da resposta, uma vez que é o sinal de controle que propicia uma condição de trabalho estável. Assim, utilizando  91 inicialmente  um  n  para  o  sinal  de  controle  no  valor  de  2000  pontos  em  vez  dos  4000  pontos propostos  para  o  sistema  conforme  o  Apêndice  B,  foram  realizadas  as  simulações  cujos resultados foram apresentados na Figura 6.14. 
As  curvas  apresentam  a  resposta  do  nível,  o  sinal  de  controle  e  o  valor  de  uZ  para  duas condições simuladas, com valores da vazão de entrada do gerador de golfadas, o distúrbio, dadas pelos  gráficos  c)  e  d).  A  primeira  condição  simula  uma  transição  descontínua  de  grande amplitude  no  sistema,  como,  por  exemplo,  se  um  segundo  poço  ou  manifold  tivesse  de  ser interrompido bruscamente. Há duas transições de forma a melhor avaliar o transiente. A segunda condição representa um declínio linear na magnitude da vazão, representando uma queda linear de  pressão  no  poço.  Essa  queda  seria  muito  mais  suave  em  campo,  uma  vez  que  a  simulação possui uma duração de 20000 segundos, o que corresponde a um período de cinco horas e meia de trabalho. 
Em ambas as simulações é possível notar pelo valor de uZ três patamares de trabalho que foram buscados pelo mecanismo de auto-ajuste, bem como o seu transiente, bastante evidente e representado  pelas  mudanças  em  degrau,  que  também  foram  refletidas  no  sinal  de  controle.  É interessante notar que embora houvesse ativações das faixas de transição, em momento algum o sistema  apresentou  instabilidade  na  alteração  de  patamares,  apresentando  o  comportamento desejado. 
6.2.5  Avaliação de resultados Uma  síntese  das  dificuldades  e  vantagens  de  cada  modelo  desenvolvido  segundo  a estratégia de minimização do esforço de controle é apresentada na Tabela 6.2. 
 92 Tabela 6.2. Comparação dos controladores voltados à minimização do esforço. 
MODELO CARACTERÍSTICAS VANTAGENS DESVANTAGENS •  Sinal de controle oscilatório entre as os patamares de saída; •  Cálculo do Nível Médio; •  Amplas regiões de estabilidade para o sinal de controle; •  Estacionamento do sinal de controle entre as regiões de trabalho; •  Ajuste do sinal de controle com Lógica Nebulosa; Monitoramento da Média Móvel •  Transição suave da condição crítica para a estável. 
•  Regiões de Trabalho definidas pelos Conjuntos Nebulosos. 
•  Variações limitadas do setpoint; •  Limitação na escolha do sinal de controle. 
•  setpoint variável; •  Insensibilidade a variações no setpoint; •  Sinal de controle mais sensível a alterações; •  Ajuste do sinal de controle com Lógica Nebulosa; •  Sinal de controle oscilatório entre os patamares de saída; Classificador de •  Permite estreitar a faixa de estabilidade; Regiões •  Definição de limites móveis de estabilidade. 
•  Limitação na escolha do sinal de controle. 
•  Intervalo contínuo para a seleção do sinal de controle. 
•  Cálculo da Média; •  Sinal de controle mais sensível a alterações; •  Classificação da entrada relativamente ao setpoint; •  setpoint variável; •  Sinal de controle oscilatório entre as os patamares de saída; •  Definição de limites móveis de estabilidade; •  Sinal de controle estável próximo ao setpoint; •  Estacionamento do sinal de controle entre as regiões de trabalho; •  Ajuste do sinal de controle com Lógica Nebulosa Classificador por •  Permite estreitar a faixa de estabilidade; Regiões com Média •  Regiões de Trabalho definidas pelos Conjuntos Nebulosos;  •  Limitação na escolha do sinal de controle. 
•  Amplas regiões de estabilidade para o sinal de controle; •  Parametrizável; •  Transição suave da condição crítica para a estável. 
•  Relação clara entre parâmetros e requisitos. 
•  Sinal de controle mais sensível a alterações; •  Cálculo da Média; •  Classificação da entrada relativamente ao setpoint; •  setpoint variável; •  Sinal de controle estável próximo ao setpoint; •  Definição de limites móveis de estabilidade; Classificador por •  Limitação na escolha do sinal de controle. 
Regiões com Média •  Permite estreitar a faixa de estabilidade; •  Regiões de Trabalho definidas pela Histerese; e Histerese •  Amplas regiões de estabilidade para o sinal de controle; •  Parametrizável; •  Relação clara entre parâmetros e requisitos. 
•  Transição suave da condição crítica para a estável.  
Na Tabela 6.2 pode-se notar a evolução do trabalho partindo de dois conceitos distintos de controlador,  representados  pelos  dois  primeiros  modelos.  Embora  ambos  utilizem  a  Lógica  93 Nebulosa  como  ferramenta,  a  diferença  na  estratégia  de  controle  propiciou  resultados  distintos. 
Enquanto no primeiro modelo, Média Móvel, a estabilização é suave e as regiões de trabalho são mais  amplas,  mas  a  variação  do  setpoint  é  limitada,  no  segundo  modelo,  o  Classificador  de Regiões,  há  uma  maior  flexibilidade  na  seleção  do  sinal  de  controle  e  o  controle  é  mais  rígido devido às regiões de estabilidade menores o que acarreta no detrimento da qualidade da resposta. 
Ainda  assim,  ambos  apresentaram  limitação  na  escolha  do  sinal  de  controle  e  dificuldades  no tratamento da variação do setpoint. 
Mais  adiante,  as  outras  duas  estratégias  de  controle,  composições  destes  dois  conceitos, permitiram  corrigir  as  dificuldades  complementares  dos  controladores,  como  a  parametrização dos conjuntos nebulosos através do  classificador, minimizando as dificuldades com a oscilação entre regiões de trabalho, e como a conjugação do estreitamento da faixa de estabilidade com o alargamento  da  faixa  de  trabalho  do  sinal  de  controle,  que  permite  minimizar  as  alterações  no acionamento  da  bomba.  Ainda,  para  este  último  aspecto,  o  uso  da  histerese  no  lugar  dos conjuntos nebulosos reforçou o resultado obtido  anteriormente, e a aplicação do mecanismo de auto-ajuste  das  constantes  de  saída  permitiu  a  adequação  do  controlador  à  dinâmica  de  longo prazo  do  VASPS,  garantindo  a  longa  vida  útil  do  controlador,  evitando  necessidades  de reprogramação. 
Finalmente,  uma  desvantagem  presente  em  todos  os  modelos  apresentados  na  tabela  é  a limitação  na  escolha  do  sinal  de  controle.  Isto  ocorre  como  conseqüência  da  opção  de preservação  do  atuador,  sendo  parte  do  conceito  da  estratégia  adotada,  um  detrimento  do desempenho  em  função  da  estabilidade  operacional.  Este  resultado  era  esperado  e  o  retorno adquirido ao se abrir mão desta característica do sistema apareceu claramente no sinal de controle adotado. 
 94     Capítulo 7  7  Conclusões Neste  trabalho  buscou-se  abordar  o  problema  de  controle  do  VASPS  com  estratégias  de controle diferentes das tradicionais, focando nos requisitos do sistema e da bomba BCS, e não se restringindo às tecnologias clássicas presentes no controlador industrial. O primeiro ganho desta abordagem pôde ser notado na seção 6.1.1, mais detalhada no Apêndice A, que apresentou que o uso de uma técnica de controle mais adequada é possível se melhorar o sinal de controle sem a perda do desempenho do sinal de  resposta,  e também sem a interferência direta no controlador usado em campo. A estratégia apresentada propicia adicionalmente outro efeito positivo, que é o constante  monitoramento  da  operação  do  sistema  através  da  linguagem  intuitiva  aplicada  à  sua operação  manual,  funcionando  como  uma  redundância  e  conseqüentemente  provendo  maior segurança para o operador e robustez para o sistema. 
Ao  passo  que  se  foi  permitido  interferir  na  tecnologia  presente  no  sistema,  foram  então estudados novos conceitos e novos modelos de controladores, em diferentes níveis de exigência para  o  sistema,  de  forma  que  as  técnicas  de  controle  inteligente  aplicadas  se  mostraram adequadas  para  o  tratamento  de  sistemas  contínuos  e  proveram  maior  facilidade  na  tomada  de decisão  automática.  Uma  síntese  das  dificuldades  e  vantagens  de  cada  modelo  desenvolvido segundo  a  estratégia  de  minimização  do  esforço  de  controle  é  apresentada  na  Tabela  6.2.  Com isso, inúmeros ganhos foram encontrados: •  Melhoria  de  desempenho  operacional:  A  adoção  de  uma  estratégia  adequada permitiu o balanceamento do compromisso desempenho versus esforço de controle, com a proposição de controladores que visam reduzir o custo da operação em alto mar  através  da  redução  no  número  de  intervenções  submarinas  causada  pelo  95 aumento  da  vida  útil  da  bomba  BCS.  Isso  provou  ser  possível  a  melhoria  do desempenho operacional no uso do BCS, criticado em Devegowda e Scott (2003); •  Flexibilidade  do  controlador:  O  gerenciamento  do  compromisso  desempenho versus esforço de controle permite alternar entre diversas condições de operação do sistema,  comprovando  a  flexibilidade  da  tecnologia  de  controle  inteligente.  Isso também mostrou que a suavização do sinal de controle implica na geração de picos na resposta e vice-versa; •  Interface intuitiva: O uso da Lógica Nebulosa permite acompanhar o processo da mesma forma que se faz quando em campo, ao ler as curvas de operação do sistema. 
Esta característica é mais evidente nas subseções da seção 6.2 do que na seção 6.1.1, 
e permite a reformulação do sistema supervisório para que este tenha uma interface mais amigável para com o usuário; •  Concepção  de  um  Simulador:  A  coesão  da  lógica  aplicada  no  sistema,  com  o monitoramento de diversas variáveis-chave e com o uso de um gerador de golfadas mais  agressivo  que  o  sinal  obtido  em  campo  permite  a  simulação  da  operação  de forma intuitiva, o que pode ser usado no treinamento e desenvolvimento de pessoas, inclusive com a possibilidade de treinamento de situações emergenciais, que pó si só  pode  evitar  complicações  em  situações  de  risco,  dada  a  dificuldade  de  se encontrar, capacitar e manter mão-de-obra adequada para o ambiente de exploração em águas profundas; •  Aumento  do  entendimento  geral  sobre  o  sistema:  O  conhecimento  da  dinâmica física  do  VASPS  propiciado  pelas  curvas  de  resposta  permite,  em  longo  prazo,  a maior  adequação  das tecnologias  e  com  menor tempo  despendido  com experimentação  em  campo,  dada  a  existência  do  simulador.  Pode-se  citar  como conhecimento adquirido sobre o sistema sua alta constante de tempo de resposta – algo desconhecido antes da primeira operação e evidente nos resultados obtidos –, os limites de oscilação da resposta do sistema e as tendências geradas pelos sinais de erro e média do erro – que antes do tratamento com o Classificador ou com os Conjuntos  Nebulosos,  eram  variáveis  sem  uma  correlação  muito  clara  e  cuja conclusão sobre seu impacto no sistema não era tão intuitiva;  96 •  Ajuste  automático:  A  contribuição  gerada  pela  elaboração  do  mecanismo independente  de  auto-ajuste  do  controlador  é  uma  ferramenta  de  automação,  que pode ser aplicada a outros conceitos de controlador, adequando o funcionamento do equipamento  à  conhecida  dinâmica  de  decaimento  de  vazão  de  produção  e  de pressão de poços. Esta ferramenta reduz a necessidade da reprogramação periódica dos equipamentos. 
Como  propostas  para  trabalhos  futuros  usando  os  conceitos  desenvolvidos  neste  trabalho sugerem-se as seguintes atividades: •  A  Tabela  6.1  apresenta  uma  série  de  configurações  possíveis  para  o  modelo  do último  controlador  desenvolvido,  o  Classificador  por  Regiões  com  Média  e Histerese,  e pode ser usada como  guia para a experimentação em laboratório. Um trabalho  de  aplicação  é  o  próximo  passo  para  a  validação  do  desenvolvimento obtido neste trabalho; •  O  modelo  físico  do  VASPS  proposto  neste  trabalho  supõe  algumas  considerações realizadas no Capítulo 3 que podem ser estudadas mais a fundo a fim de obter um modelo mais refinado. Este trabalho poderia inclusive minimizar os desvios a serem encontrados  em  um  estudo  experimental  e  poderia  se  dar  nas  seguintes  frentes  de trabalho: o  Curva  da  Bomba:  poderia  ser  estudado  o  efeito  de  variação  da  curva  de carga do sistema ocaionada pela variação de velocidade (vazão) do fluido; o  Dinâmica do Nível: considerar os efeitos da pressão na variação do nível ou estudar a viabilidade de se trabalhar com o vaso pressurizado, mapeando  a relação entre as variáveis; o  Controle de pressão  e temperatura:  adaptar os  controladores obtidos para  a realização de malhas de controle adicional no sistema, propondo a utilização de atuadores adequados para cada situação, como por exemplo o uso de uma válvula choke para controle da pressão do gás; o  Cruzamento de variáveis: realizar um estudo fenomenológico para encontrar a  interrelação  das  variáveis  volume,  pressão  e  temperatura,  possivelmente incluindo os efeitos na bomba, como sua vibração;  97 •  Os  controladores  propostos  neste  trabalho  podem  também  ser  aplicados  a  outros processos  contínuos.  Estudos  com  grandes  potenciais  de  otimização  de  sistemas podem  se  seguir  na  adaptação  dos  controladores  para  controle  de  pressão, temperatura e vazão em outros tipos de separadores ou em transporte em gasodutos. 
Também  poderia  ser  estudado  o  controle  de  outro  tipo  de  atuado,  com  outros métodos de elevação artificial, como o BCP; •  Para  a  área  de  controle  inteligente,  há  estudos  possíveis  na  integração  de  maior capacidade de inferência, conclusão e decisão nos controladores, como por exemplo utilização  de  redes  neurais  para  aprendizado  do  processo  e  previsão  de  condições futuras baseadas na leitura dos distúrbios de entrada em campo. É possível imaginar que com o conhecimento do escoamento, sua sensorização pode permitir um ajuste do  controlador  para  uma  condição  prevista  em  futuro  próximo,  não  necessitando correções por realimentação, que esperam haver um erro real para corrigi-lo.  
•  Outras  técnicas  de  controle  também  podem  ser  empregadas,  como  o  controle distribuído que permita a integração de sistemas trabalhando concorrentemente, de forma  a  gerenciar,  por  exemplo,  as  entradas  advindas  da  produção  na  plataforma. 
Este controle distribuído pode lançar mão da técnica de agentes inteligentes.  
 98  Referências Biblográficas  Aström, K. J., Wittenmark, B. On Self Tuning Regulators. Automatica, 1973. 
Aström, K. J., Wittenmark, B. Adaptive Control. Addison-Wesley Longman Publishing Co., Inc. 
Boston, MA, USA, 1994.  
Babŭska, R. Fuzzy modeling for control. Publication Boston. Kluwer, 1998. 
Boullart,  L.,  Krijgsman,  A.  J.,  Vingerhoeds,  A.  Application  of  Artificial  Intelligence  in  process control. Pergamon Press.Ltd, Headington Hill Hall, Oxford, 1992. ISBN 0 08 042017 6. 
Campos, M. C. M., Loureiro, P., Filho, A. B. Novas estratégias de controle para a plataforma P-55.  Rio  Oil  &  Gás  Expo  and  Conference,  2006,  Rio  de  Janeiro,  11-14  Setembro, IBP1910_06. 
Clarke, D. W., Gawthrop, P. J. Self-tuning controller. Proc. IEE, 1975. 
de  Melo,  A.  V.,  Mendes,  J.  R.  P.,  Serapião,  A.  B.  S.  Controle  inteligente  para  o  separador VASPS.  4º  Congresso  Brasileiro  de  Pesquisa  e  Desenvolvimento  em  Petróleo  e  Gás, Campinas, 2007, 21-24 Outubro, 2.3.0078-2. 
de  Melo,  A.  V.,  Mendes,  J.  R.  P.,  Serapião,  A.  B.  S.,  Guilherme,  I.  R.,  Estevam,  V.  Controle supervisório  inteligente  para  o  separador  submarino  VASPS.  IV  Congresso  Rio Automação, 2007, Rio de Janeiro, 9-10 Maio, IBP568_07. 
de Melo, A. V., Mendes, J. R. P., Serapião, A. B. S., Estevam, V. Fuzzy tuned PID control for the VASPS  subsea  separator.  6th  Brazilian  Conference  on  Dynamics,  Control  and  their Applications, 2007, São José do Rio Preto., 22–25 Maio. 
do  Vale,  O.  R.,  Garcia,  J.  E.,  Villa,  M.  VASPS  installation  and  operation  at  Campos  Basin. 
Offshore Technology Conference, OTC 14003, Houston, Texas, Maio de 2002. 
Devegowda,  D.,  Scott,  S.  L.  An  Assessment  of  Subsea  Production  Systems.  SPE  Annual Technical Conference and Exhibition, 2003, Denver, Colorado, 5–8 Outubro, SPE 84045. 
Estevam, V. Uma Análise Fenomenológica da Operação de Bomba Centrífuga com Escoamento Bifásico. Tese de Doutorado, FEM/IG, Unicamp, Março de 2002. 
 99 França, F. A., Rosa, E. S., Bannwart, A. C., Moura, L. F., Alhanati, F. J. Hydrodynamic studies on  a  cyclonic  separator.  Offshore  Technology  Conference,  OTC  8059,  Houston,  Texas, Maio de 1996. 
Griffith, P., Wallis, G. B. Two-Phase Slug Flow. 1965. Transactions ASME. J. Heat Transfer, 83, 307. 
Jager, R. Fuzzy logic in control. Ph.D. Thesis, Technich University Delft, ISBN 90-9008318-9, Dutsh, 1995. 
Jager,  R.,  Verbruggen,  H.  B.,  Brujin,  P.  M.,  Krijgsman,  A.  J.  Real-time  Fuzzy  expert  control. 
International Conference on Control 1991. pp 966-970, vol 2. 
Jantzen, J. Tuning of Fuzzy PID controllers. Technical Report n°. 98-H 871, Technical University of Denmark, Department of Automation, Lyngby, DENMARK, 1998. 
Krstic, M., Kokotovic, P. V., Kanellakopoulos, I. Nonlinear and Adaptive Control Design. John Wiley & Sons, Inc. New York, NY, USA, 1995.  
Ogata,  K.  Engenharia  de  controle  moderno.  Publication  Upper  Saddle  River.  Prentice-Hall, 1996. 
Passino,  K.  M.,  Yurkovich,  S.  Fuzzy  control.  ISBN  0-201-18074-X.  Publication  Menlo  Park, California. Addison Wesley Longman, Inc., 1998. 
Peixoto,  G.  A.,  Ribeiro,  G.  A.  S.,  Barros,  P.  R.  A.,  Meira,  M.  A.,  Barbosa,  T.  M.  VASPS Prototype  in  Marimba  Field  —  Workover  and  Restart.  2005  SPE  Latin  American  and Caribbean Petroleum Engineering Conference, Rio de Janeiro, 20–23 Junho, SPE 95039. 
Riid,  A.  Transparent  Fuzzy  Systems:  modeling  and  control.  Ph.D.  Thesis  on  Informatics  and system engineering, Tallinn Technical University, Estonia, 2002. 
Santos,  M.,  Dormido,  S.,  de  la  Cruz,  J.  M.  Fuzzy-PID  Controllers  vs.  Fuzzy-PI  Controllers. 
Proceedings of the Fifth IEEE International Conference on Fuzzy Systems, 1996. Volume 3, pp 1598-1604. 
Santos,  M.,  Dormido,  S.,  de  la  Cruz,  J.  M.,  de  Madrid,  A.  P.  Between  Fuzzy-PID  and  PID-Conventional Controllers: a Good Choice. Proceedings of the 1996 Biennial Conference of the  North  American  Fuzzy  Information  Processing  Society-NAFIPS,  pp.  123-127. 
Berkeley, IEEE, 1996. 
 100 Shoham,  O.,  Kouba,  G.  E.  State  of  the  art  cylindrical-cyclone  compact-separator  technology. 
SPE Distinguished Author Series. 1998. SPE 39600. 
Skogestad, S., Postlethwaite, I. Multivariable Feedback Control. Publication Baffins Lane. John Wiley & Sons, 1996. 
Storkaas, E., Skogestad, S. Cascade Control of Unstable Systems with Aplication to Stabilization of  Slug  Flow.  Apresentado  no  IFAC-Symposium  Adchem  2003,  Hong  Kong,  Janeiro  de 2004. 
Storkaas, E., Skogestad, S., Godhavn, J.-M. A low-dimensional dynamic model of severe slugging for control design and analysis. Apresentado no Multiphase 2003, San Remo, Itália, 11-13 Junho. 
Takagi,  T.,  Sugeno,  M.  Fuzzy  identification  of  systems  and  its  applications  to  modeling  and control. IEEE Transactions on Systems, Man, and Cybernetics, 1985. 
Tanaka,  K.,  Sugeno,  M.  Stability  analysis  and  design  of  fuzzy  control  systems.  Fuzzy  Sets  and Systems, 1992. 
Teixeira, A. F., Mendes, J. R. P., Serapião, A. B. S., Guilherme, I. R. Controle inteligente para o sistema  de  separação  e  bombeamento  submarino  –  VASPS.  Rio  Oil  &  Gás  Expo  and Conference 2006, IBP1802_06. 
Teixeira, A. F., Mendes, J. R. P., Estevam, V., Guilherme, I. R., Morooka, C. K., Rigo, J. R. Um controlador Fuzzy para o sistema de separação e bombeamento submarino – VASPS. Rio Oil & Gás Expo and Conference 2004, IBP11804. 
Tzafestas,  S.,  Papanikolopoulos,  N.  Incremental  Fuzzy  expert  PID  control.  IEEE  Trans.  on Industrial Electronics, 37(5):365–371, Outubro de 1990. 
Van  Nauta  Lemke,  H.  R.,  De-Zhao,  W.  Fuzzy  PID  supervisor.  Proceedings  of  the  24th  IEEE Conference on Decision and Control, Fort Lauderdale, Florida, USA, 1985. 
Wang,  S.,  Mohan,  R.  S.,  Shoham,  O.,  Kouba,  G.  E.  Dynamic  Simulation  and  Control-System Design for Gas/Liquid Cylindrical Cyclone Separators. SPE 71308, SPE Journal, 2001. 
Wang,  L.-X.  Adaptive  Fuzzy  systems  and  control:  design  and  stability  analysis.  Publication Englewood Cliffs, Prentice Hall, 1994. 
White, F. M. Mecânica dos Fluidos. Editora McGraw Hill, 4ª Edição, 2002. 
 101 Zhao, Z., Tomizuka, M., Isaka, S. Fuzzy gain scheduling of PID controllers. IEEE transactions on systems, man. and cybernetics, vol 23., n°. 5, Setembro/Outubro de 1995. 
 102  Apêndice A  Dados de Projeto para o Modelo Supervisório             103 1  PROJETO DOS CONTROLADORES PID 1.1  PI referênciareferênciaPKPKPlantaPlanta++++--++(Processo)(Processo)∫∫IKIK Figura A.1. Diagrama de Blocos do Controlador PI. 
=.0
10001KK+.0
s10001sp=→=)(sK i⋅)(+s10(s⋅+⋅.3
)()(sPsK+)(sPsK10(+.0
+011.3)001⋅.0
10(+²s.3)001.0
s11.30
s011−3011e===)(sH ⋅+1².3)001011s5−−−[:,11.30
10e]pólos 1.2  PI COM DERIVADA referênciareferênciaIKIKPlantaPlanta++++++----++(Processo)(Processo)dddtdtPKPK Figura A.2. Diagrama de Blocos do Controlador PI com derivada. 
=100=18.0
KKp→=+)(sK10018.0
s i−3⋅)(+s100(s⋅+s⋅794e)()(sPsK+)(sPsK100(+.3)18.0
+⋅01110(.0
+97.9)001.1
se===)(sH −3⋅1.3)18.0
011s−3−.1:
794póloe  104 1.3  PD referênciareferênciaPKPKPlantaPlanta++++--++(Processo)(Processo)dddtdtDKDK Figura A.3. Diagrama de Blocos do Controlador PD. 
=10=300KKp→=+)(sK30010s d−3+s⋅33.3)001e33.3
e+s300(s⋅⋅)()()(sPsK+)(sPsK300(+.3)10+⋅01110(.0
+s===)(sH −2⋅1.3)10011s−2−33.3:
epólo 2  PROJETO DOS CONTROLADORES INTELIGENTES 2.1  CONTROLE FPID 0P0P++P∆ +P∆ +PKfPPKfPeeeK xeK x11rrPPOOÃÃÇÇAACCFFZZZZUUFFEEDDBASE BASE ||||OOÃÃÇÇAACCFFZZZZUUFF0I0I++I∆ +I∆ +PKfIPKfIieie11rrixixIIieKieKIIDEDEIIII||||0D0D++IID∆ +D∆ +PKfDPKfDREGRASREGRAScececxcx11rrDDceKceK|||| Figura A.4. Diagrama de blocos do controlador FPID. 
 105 a)a)b)b)µµµµµµµNBNBNBNBNSNSNSNSZZZZPSPSPSPSPBPBPBPBNSNSNSZZZPSPSPSPMPMPMPBPBPBNBNBNB-1       -0,9-1       -0,9-1       -0,9-1       -0,9-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,30,9       10,9       10,9       10,9       1-1--1--1--0,5--0,5--0,5-0000,50,50,5111c)c)µµµµµLEGENDALEGENDALEGENDAZZZPSPSPSPBPBPBNBNBNBNB: Negative Big (Muito Negativo)NB: Negative Big (Muito Negativo)NB: Negative Big (Muito Negativo)NS: Negative Small (Pouco Negativo)NS: Negative Small (Pouco Negativo)NS: Negative Small (Pouco Negativo)Z: ZeroZ: ZeroZ: ZeroPS: Positive Small (Pouco Positivo)PS: Positive Small (Pouco Positivo)PS: Positive Small (Pouco Positivo)PM: Positive Medium (Positivo Médio)PM: Positive Medium (Positivo Médio)PM: Positive Medium (Positivo Médio)PB: Positive Big (Muito Positivo)PB: Positive Big (Muito Positivo)PB: Positive Big (Muito Positivo) -0.5
-1                   -1                   -0.5
-1                   -0.5
---0000.5
0.5
0.5
111Figura A.5. Conjuntos Nebulosos para o controlador FPID. a) Variáveis de entrada (x, ix, cx). b) Variação da constante KP, ∆P. c) Variação das constantes KI e KD, ∆I e ∆D. 
Tabela A.1. Base de regras do controlador supervisor FPID Variação do Erro Integral do Erro Variação do Erro Pf If Df NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z  4.0  4.0  4.0  4.0  4.0 
PS  4.0  5.0  6.3  5.0  4.0 
PB  4.0  4.0  4.0  4.0  4.0 
NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z  1.0  1.0  5.0  4.0  3.0 
PS  1.0  1.0  4.0  3.0  3.0 
PB  1.0  1.0  3.0  3.0  3.0 
NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z  1.0  1.0  5.0  4.0  3.0 
PS  1.0  1.0  4.0  3.0  3.0 
PB  1.0  1.0  3.0  3.0  3.0 
   orrEorrEorrE  2.2  CONTROLE FPI 0P0P++P∆ +P∆ +PKfPPKfPeeeK xeK x11rrPPOOÃÃÇÇAACCFFZZZZUUFFEEDDBASE BASE ||||OOÃÃÇÇAACCFFZZZZUUFFIIDEDEIIIIII0I0I++I∆ +I∆ +PKfIPKfIieieREGRASREGRASixix11rrieKieKII|||| Figura A.6. Diagrama de blocos do controlador FPI. 
 106 a)a)c)c)µµµµµµµNBNBNBNBNSNSNSNSZZZZPSPSPSPSPBPBPBPBNSNSNSZZZPSPSPSPMPMPMPBPBPBNBNBNB-1       -0,9-1       -0,9-1       -0,9-1       -0,9-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,30,9       10,9       10,9       10,9       1-1--1--1--0,5--0,5--0,5-0000,50,50,5111b)b)µµd)d)µµµµµµNBNBNBNBNSNSNSNSZZZZPSPSPSPSPBPBPBPBZZZPSPSPSPBPBPBNBNBNB -1       -0.9
-1       -0.9
-1       -0.9
-1       -0.9
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
0.9       10.9       10.9       10.9       1-0.5
-1                   -1                   -0.5
-1                   -0.5
---0000.5
0.5
0.5
111Figura A.7. Conjuntos Nebulosos para o controlador FPI. a) Erro relativo, x. b) Integral relativa do erro, ix.. c) Variação da constante KP, ∆P. d) Variação da constante KI, ∆I. 
Tabela A.2. Base de regras do controlador supervisor FPI Integral do Erro  Integral do Erro Pf If NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z 4.0  4.0  4.0  4.0  4.0 
PS  7.0  6.5  5.5  5.0  4.0 
PB  4.0  4.0  4.0  4.0  4.0 
NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z 1.0  1.0  5.0  4.0  3.0 
PS  1.0  1.0  4.0  3.0  3.0 
PB  1.0  1.0  3.0  3.0  3.0 
  orrorrEE2.3  CONTROLE FPI COM DERIVADA 0I0I++I∆ +I∆ +PKfIPKfIeeeK xeK x11rrIIOOÃÃÇÇAACCFFZZZZUUFFEEDDBASE BASE ||||OOÃÃÇÇAACCFFZZZZUUFFIIDEDEIIII0P0P++IIP∆ +P∆ +PKfPPKfPREGRASREGRAScececxcx11rrPPceKceK|||| Figura A.8. Diagrama de blocos do controlador FPI com derivada. 
 107 a)a)b)b)µµµµµµµNBNBNBNBNSNSNSNSZZZZPSPSPSPSPBPBPBPBZZZPSPSPSPBPBPBNBNBNB-0.5
-1                   -1                   -0.5
-1                   -0.5
---0000.5
0.5
0.5
111-1       -0,9-1       -0,9-1       -0,9-1       -0,9-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,3-0,3    -0,2      -0,1       0       0,1       0,2      0,30,9       10,9       10,9       10,9       1c)c)µµµLEGENDALEGENDALEGENDANSNSNSZZZPSPSPSPMPMPMPBPBPBNBNBNBNB: Negative Big (Muito Negativo)NB: Negative Big (Muito Negativo)NB: Negative Big (Muito Negativo)NS: Negative Small (Pouco Negativo)NS: Negative Small (Pouco Negativo)NS: Negative Small (Pouco Negativo)Z: ZeroZ: ZeroZ: ZeroPS: Positive Small (Pouco Positivo)PS: Positive Small (Pouco Positivo)PS: Positive Small (Pouco Positivo)PM: Positive Medium (Positivo Médio)PM: Positive Medium (Positivo Médio)PM: Positive Medium (Positivo Médio)PB: Positive Big (Muito Positivo)PB: Positive Big (Muito Positivo)PB: Positive Big (Muito Positivo) -1--1--1--0,5--0,5--0,5-0000,50,50,5111Figura A.9. Conjuntos Nebulosos para o controlador FPID. a) Variáveis de entrada (x, ix, cx). b) Variação da constante KP, ∆P. c) Variação da constante KI, ∆I. 
 Tabela A.3. Base de regras do controlador supervisor FPI com derivada Variação do Erro  Variação do Erro Pf If NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z 1.0  1.0  3.0  3.0  3.0 
PS  1.0  1.0  5.0  4.0  3.0 
PB  1.0  1.0  3.0  3.0  3.0 
NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z 4.0  4.0  4.0  4.0  4.0 
PS  7.0  6.5  5.5  5.0  4.0 
PB  4.0  4.0  4.0  4.0  4.0 
  orrorrEE2.4  CONTROLE FPD 0P0P++P∆ +P∆ +PKfPPKfPeeeK xeK x11rrPPOOÃÃÇÇAACCFFZZZZUUFFEEDDBASE BASE ||||OOÃÃÇÇAACCFFZZZZUUFFIIDEDEIIII0D0D++IID∆ +D∆ +PKfDPKfDREGRASREGRAScececxcx11rrDDceKceK|||| Figura A.10. Diagrama de blocos do controlador FPD. 
 108 a)a)µµb)b)µµµNBNBNBNBNS Z PSNS Z PSNS Z PSNS Z PSPBPBPBPBNSNSNSZZZPSPSPSPMPMPMPBPBPBNBNBNB-1       -0.9
-1       -0.9
-1       -0.9
-1       -0.9
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
-0.3    -0.2      -0.1       0       0.1       0.2      0.3
0.9       10.9       10.9       10.9       1-1--1--1--0,5--0,5--0,5-0000,50,50,5111c)c)µµµµLEGENDALEGENDALEGENDAZZPSPSPBPBNBNBNB: Negative Big (Muito Negativo)NB: Negative Big (Muito Negativo)NB: Negative Big (Muito Negativo)NS: Negative Small (Pouco Negativo)NS: Negative Small (Pouco Negativo)NS: Negative Small (Pouco Negativo)Z: ZeroZ: ZeroZ: ZeroPS: Positive Small (Pouco Positivo)PS: Positive Small (Pouco Positivo)PS: Positive Small (Pouco Positivo)PM: Positive Medium (Positivo Médio)PM: Positive Medium (Positivo Médio)PM: Positive Medium (Positivo Médio)PB: Positive Big (Muito Positivo)PB: Positive Big (Muito Positivo)PB: Positive Big (Muito Positivo) -0.5
-1                   -1                   -0.5
--000.5
0.5
11Figura A.11. Conjuntos Nebulosos para o controlador FPD. a) Variáveis de entrada (x, ix, cx). b) Variação da constante KP, ∆P. c) Variação da constante KD, ∆D. 
 Tabela A.4. Base de regras do controlador supervisor FPD Variação do Erro  Variação do Erro Pf Df NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z 4.0  4.0  4.0  4.0  4.0 
PS  7.0  7.0  7.0  5.0  4.0 
PB  4.0  4.0  4.0  4.0  4.0 
NB  NS  Z  PS  PB NB  1.0  1.0  1.0  1.0  1.0 
NS  1.0  1.0  1.0  1.0  1.0 
Z 1.0  1.0  5.0  4.0  3.0 
PS  1.0  1.0  4.0  3.0  3.0 
PB  1.0  1.0  3.0  3.0  3.0 
  orrorrEE3  RESULTADOS COMPUTACIONAIS As  simulações  levaram  em  consideração  uma  partida  do  sistema  com  o  nível  do reservatório  em  seu  valor  mínimo  de  forma  a  avaliar  o  desempenho  em  um  caso  crítico  e  com leitura  real  abaixo  da  referência.  Esta  situação  permite  avaliar  a  resposta  do  sistema  no enchimento,  que  é  mais  crítico  que  o  esvaziamento,  uma  vez  que  a  bomba  deve  ser  acionada apenas  após  estar  submersa,  sendo  estritamente  necessário  um  comportamento  controlado.  A referência  de  nível  para  o  sistema  foi  de  30  metros  e  as  simulações  foram  realizadas  com  o sistema  supervisório  e  sem  este  para  efeito  de  comparação  e  mensuração  da  melhoria  no desempenho. 
A  situação  crítica  imposta  permite  a  avaliação  da  resposta  em  regime  transiente  e  seu estacionamento  após  este  período.  Este  efeito  está  reproduzido  na  Figura  A.12,  onde  é apresentada  a  resposta  do  sistema  com  o  controlador  PID  puro  contra  a  resposta  com  o  109 controlador FPID. Além da resposta do sistema, está sendo avaliado o sinal de controle que gerou a dada resposta. 
Comparativo do NívelComparativo do Nível3535]]mm3030[[  llN com PIDN com PIDN com PIDN com FuzzyN com FuzzyN com FuzzyeevvNNíí252500500500100010001500150020002000250025003000300035003500400040004500450050005000Tempo [s]Tempo [s]Comparativo do Sinal de ControleComparativo do Sinal de Controle62626060585856565454525250504848]]zzHH[[  aaiiccnnêêüüqqeerrFFu com PIDu com PIDu com PIDu com Fuzzyu com Fuzzyu com Fuzzy00500500100010001500150020002000250025003000300035003500400040004500450050005000Tempo [s]Tempo [s] Figura A.12. Comparativo da resposta e do sinal de controle entre o PID e o FPID. 
Conforme apresentado na Figura A.12, nota-se uma melhoria significativa no sobresinal e no  tempo  de  estabilização  do  sistema,  tão  embora  o  sinal  de  controle  seja  muito  similar. 
Considerando que o supervisor Fuzzy aumenta a constante D em torno do zero, é natural que a resposta possua menor sobresinal, dado que o amortecimento foi aumentado. Entretanto, há erro estacionário  no  sistema,  causado  pela  saturação  do  efeito  integral  em  valores  negativos  muito altos. Ambos estes efeitos podem ser observados na Figura A.13, que apresenta o comportamento das constantes ao longo da simulação, bem como a decomposição do sinal de controle entre as contribuições individuais de cada constante. 
Através da análise da Figura A.13, é possível afirmar que no sistema com controle PID, o sinal integral foi saturado na saída do controlador, gerando o atraso na resposta em acompanhar o setpoint, e consequentemente os piores requisitos de desempenho. No sistema FPID, a constante I foi anulada, não contribuindo negativamente para o desempenho, uma evidência de melhoria no sistema. 
 110 Sinal de controle ProporcionalSinal de controle ProporcionalSinal de controle IntegralSinal de controle IntegralSinal de controle DerivativoSinal de controle Derivativo50502266uDcom PIDuDcom PIDuDcom PIDcom FPIDuucom FPIDucom FPIDDDD005500-2-2uI com PIDuI com PIDuI com PIDcom FPIDuucom FPIDucom FPIDIII44PPooããççuubbiirrtt-50-50DDooããççuubbiirrtt-4-4II      ooããççuubbiirrtt33-6-6-100-100iiiiii-8-822-150-150-10-10nnooCCnnooCCnnooCC11-12-12-200-20000uPcom PIDuPcom PIDuPcom PIDuPcom FPIDuPcom FPIDuPcom FPID-14-14-250-250-1-1-16-16-300-300-18-18-2-2001000 2000 3000 4000 50001000 2000 3000 4000 5000001000 2000 3000 4000 50001000 2000 3000 4000 5000001000 2000 3000 4000 50001000 2000 3000 4000 5000Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Variação da constante PVariação da constante PVariação da constante IVariação da constante IVariação da constante DVariação da constante D-4-4x 10x 101414200200121218018012121010160160101014014088I com PIDI com PIDI com PIDI com FPIDI com FPIDI com FPIDPPKKeedd  rrooaaVVDDKKeedd  rrooaaVVIIKKeedd  rrooaaVV88120120      666610010044llll8080ll44606022224040P com PIDP com PIDP com PIDP com FPIDP com FPIDP com FPIDD com PIDD com PIDD com PIDD com FPIDD com FPIDD com FPID00002020-2-2-2-200001000 2000 3000 4000 50001000 2000 3000 4000 5000001000 2000 3000 4000 50001000 2000 3000 4000 5000001000 2000 3000 4000 50001000 2000 3000 4000 5000 Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Tempo [s]Figura A.13. Sinal de controle e comportamento das constantes entre o PID e o FPID. 
Para as variações no controle PID, foram realizadas também simulações, que apresentaram um comportamento das constantes e sua composição no sinal de controle muito parecidas com as do controle PID completo. O desempenho, no entanto, mostrou-se diferente no caso do controle PD e do PI com derivada, que não possuem a entrada integral. E embora essa característica tenha imprimido  uma  diferença  de  sobresinal  menor  e  pouco  perceptível  no  caso  do  controle  PD,  o sinal de controle apresentado foi bastante parecido. Tais efeitos são observados na Figura A.14, que apresenta a resposta comparativa entre PD e FPD. 
Neste caso do controle  FPD, os conjuntos nebulosos tiveram de ser refinados muito mais que  o  dos  outros  arranjos,  de  forma  a  proporcionar  uma  resposta  com  desempenho  mais significativo. Além disso, houve um reforço de sinal na base de  regras, que permitiu o sistema agir um pouco antes  e ter uma leve melhoria de desempenho. É possível, no entanto, utilizar a mesma abordagem para os outros supervisores, refinando as bases e melhorando o controle, pois essa metodologia é comumente aplicada em lógica Fuzzy. 
 111 Comparativo do NívelComparativo do Nível3535]]mm3030[[  lleevvííNNN com PDN com PDN com PDN com FuzzyN com FuzzyN com Fuzzy252500200200400400600600800800100010001200120014001400160016001800180020002000Tempo [s]Tempo [s]Comparativo do Sinal de ControleComparativo do Sinal de Controle62626060585856565454525250504848]]zzHH[[  aaiiccnnêêüüqqeerrFFu com PDu com PDu com PDu com Fuzzyu com Fuzzyu com Fuzzy00200200400400600600800800100010001200120014001400160016001800180020002000 Tempo [s]Tempo [s]Figura A.14. Comparativo da resposta e do sinal de controle entre o PD e o FPD. 
Já  no  caso  do  controle  PI  com  derivada  a  diferença  foi  bastante  expressiva.  Esta configuração  apresentou  um  desempenho  completamente  diferente  das  outras,  parecendo  ser  a mais adequada, uma vez que não apresentou sobresinal e que suavizou a resposta do sistema. A 
resposta apresentou ainda uma atuação preditiva sobre o nível, antes que este atingisse o valor de referência. No entanto, o supervisor aumentou o tempo de estabilização, como é visível na Figura A.15.  Isso  pode  ser  resolvido  com  o  refinamento  dos  conjuntos  nebulosos,  conforme  realizado para o controle FPD. 
 112 Comparativo do NívelComparativo do Nível3535]]mm3030[[  llN com PIN com PIN com PIN com FuzzyN com FuzzyN com FuzzyeevvNNíí252500200200400400600600800800100010001200120014001400160016001800180020002000Tempo [s]Tempo [s]Comparativo do Sinal de ControleComparativo do Sinal de Controle62626060585856565454525250504848]]zzHH[[  aaiiccnnêêüüqqeerrFFu com PIu com PIu com PIu com Fuzzyu com Fuzzyu com Fuzzy00200200400400600600800800100010001200120014001400160016001800180020002000 Tempo [s]Tempo [s]Figura A.15. Comparativo da resposta e do sinal de controle entre o PI com derivada e o FPI com derivada. 
Comparativo do NívelComparativo do Nível3535]]mm3030[[  llN com PIN com PIN com PIN com FuzzyN com FuzzyN com FuzzyeevvNNíí252500200200400400600600800800100010001200120014001400160016001800180020002000Tempo [s]Tempo [s]Comparativo do Sinal de ControleComparativo do Sinal de Controle62626060585856565454525250504848]]zzHH[[  aaccnnêêüüqqeerrFFiiu com PIu com PIu com PIu com Fuzzyu com Fuzzyu com Fuzzy00200200400400600600800800100010001200120014001400160016001800180020002000Tempo [s]Tempo [s] Figura A.16. Comparativo da resposta e do sinal de controle entre o PI e o FPI. 
 113  Apêndice B  Simulação de experimentos para o controlador Histerese com Auto-ajuste             114 O controlador Histerese com Auto-ajuste, selecionado para validação experimental, passou por  uma  série  de  simulações  computacionais  de  forma  a  verificar  suas  condições  limite. 
Idealmente, as simulações deveriam ser testadas para t→∞, e então o sinal de controle deveria ser reduzido o máximo possível. Dada a impossibilidade, é necessário ao menos verificar a resposta para tempos de simulação muito grandes. Além disso, é essencial considerar que o modelo atual do  Gerador  de  Golfadas  está  super-reforçado  para  representar  o  pior  caso  de  golfadas  durante todo o tempo de simulação, o que nos permite creditar maior confiabilidade ao modelo simulado. 
Assim, aliando a condição de tempo de simulação estendido ao Gerador de Golfadas em situação crítica,  é  possível  se  ter  a  idéia  visual  de  seu  comportamento  conforme  apresentado  na  Figura B.1,  o  que  permite  entender  que  as  golfadas  simuladas  no  projeto  são  muito  mais  constantes  e repentinas do que em um caso real. 
0.018
0.018
0.016
0.016
]]ss//³³mm[[  ssaaddaaffllooGGeedd  rrooddaarreeGGooddooããzzaaVV0.014
0.014
  0.012
0.012
0.010
0.010
    0.008
0.008
0.006
0.006
000.2
0.2
0.4
0.4
0.6
0.6
0.8
0.8
111.2
1.2
1.4
1.4
1.6
1.6
1.8
1.8
22x 10x 1044Tempo [s]Tempo [s] Figura B.1. Sinal do Gerador de Golfadas para o tempo de 20000 segundos. 
Com isso, diversos experimentos foram planejados com o intuito de estabelecer a relação que  os  parâmetros  operacionais  têm  com  a  qualidade  do  sinal  de  controle  e  o  desempenho  do sistema  em  termos  de  faixa  de  variação  do  Nível.  Os  parâmetros  avaliados  se  restringiram àqueles  que  têm  maior  influência  nesta  relação,  e  podem  ser  observados  com  seus  valores  em negrito  para  cada  simulação  na  Tabela  B.1,  que  apresenta  também  os  valores  utilizados  para todas  as  outras  variáveis.  Ademais,  as  simulações  A,  B  e  C  foram  simuladas  no  período  de 20.000  segundos,  enquanto  que  a  1,  a  2  e  a  3  foram  feitas  com  o  tempo  estendido  de  100.000  115 segundos, mantendo constantes todos as variáveis cujos valores permanecem clareados em cinza na Tabela B.1. 
Tabela B.1. Planejamento dos experimentos computacionais para verificação da relação entre parâmetros, sinal de controle e resposta do sistema. 
Variáveis Simulação  Ordem n h2 N0  SP 30  30  2000  10% - 10% 30  30  4000  10% - 10% 30  var  2000  10% - 10% 30  var  4000  10% - 10% 60  var  2000  20% - 20% 60  var  2000  20% - 20% 60  var  2000  20% - 20% 60  30  2000  10% - 10% 60  30  2000  15% - 15% 60  30  2000  20% - 20% 30  30  2000  10% - 10% 30  30  2000  20% - 20% 30  30  6000  40% - 30% 30  30  4000  20% - 20% 30  30  4000  20% - 20% 30  30  6000  40% - 30% 30  30  6000  40% - 30% h1 [uNB uNS uZ uPS uPB] rsl/fsl 11 12 21 22 1 2 3 1 2 3 1 2 3 1 2 1 2  35% - 75% 35% - 75% 35% - 75% 35% - 75% 40% - 80% 40% - 80% 40% - 80% 35% - 75% 35% - 75% 40% - 80% 35% - 75% 40% - 80% 40% - 80% 40% - 80% 40% - 80% 40% - 80% 40% - 80% [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] 2% 2% 2% 2% 2% 2% 2% 2% 2% 2% 5% 5% 10% 5% 5% 10% 10% A B [60 55.5 54 52.5 48] [60 55 54 53 48] [60 56 54 52 48] [60 56 54 52 48] [60 56 54 52 48] [60 55 54 53 48] [60 55 54 53 48] [60 55 54 53 48] [60 56 54 52 48] [60 55 54 53 48] C 1 2 [60 55.5 54 52.5 48] 3 [60 55 54 53 48]         Os  símbolos  apresentados  na  Tabela  B.1  têm  seu  significado  e  valores  utilizados  para simulação apresentados na Tabela B.2, que explica as abreviações utilizadas para cada parâmetro.  
A transição entre regiões de operação e a janela de histerese são dadas pelos parâmetros µ1, µ2 , δ1 e δ2, conforme apresentado no Capítulo 5, onde a histerese é modelada. Na Tabela B.2, os grupos de valores variantes são agrupados sob os parâmetros µ e δ, respectivamente. 
 116 Tabela B.2. Explanação dos parâmetros de simulação. 
Abreviação Valores Significado 30 60 N0 Nível inicial fixo (30) Setpoint SP variável (var) 2000 4000 6000 Número de pontos usados no cálculo da n média da pertinência de saída do classificador 10%-10% 20%-20% 15% - 15% 40%-30% 35%-75% 40%-80% Janelas de histerese. Corresponde aos δ valores δ1 e δ2 Pertinências de transição entre regiões. 
µ Corresponde aos valores µ1 e µ2. 
[60 56 54 52 48] [60 55.5 54 52.5 
Conjunto de patamares da rotação da f bomba. Corresponde a  48] [uNB uNS uZ uPS uPB] [60 55 54 53 48] 2% 5% 10% Rampa de aceleração/desaceleração rsl/fsl (rising/falling slew rate)    1  SIMULAÇÃO A Conforme apresentado na Tabela B.1, a simulação A testou os efeitos de n na resposta do sistema,  variando-a  de  2000  para  4000  pontos  enquanto  as  outras  variáveis  se  mantiveram constantes.  As  quatro  simulações  foram  agrupadas  em  dois  conjuntos,  onde  o  primeiro, apresentado na Figura B.2, foi realizado com o setpoint constante em 30 metros, e o segundo, na Figura B.3, foi realizado com o sinal de referência variando conforme apresentado. Em cada uma das duas figuras, há duas curvas, referentes às simulações com n em 2000 e n em 4000. 
A influência do parâmetro n no sinal de controle é clara: quanto maior o número de pontos utilizados para computar o valor da pertinência média, mais lenta é sua modificação com os picos de  pertinência  instantânea,  e  portanto  mais  tempo  o  patamar  de  velocidade  da  bomba  será mantido,  e  menor  a  quantidade  de  transições  de  velocidade.  Dessa  forma,  espera-se  poder maximizar o valor de n para simulações reais, sendo limitado apenas pela constante de tempo do sistema, pois um valor muito alto de n pode atrasar uma resposta necessária de correção de nível. 
Este  efeito  de  atraso  da  resposta  e  conseqüente  menor  tempo  de  reação  também  é  perceptível, embora mais suavemente, na Figura B.2 e na Figura B.3. 
 117 Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040N p/ n=2000N p/ n=2000N p/ n=2000N p/ n=2000N p/ n=4000N p/ n=4000N p/ n=4000N p/ n=4000SP NívelSP NívelSP NívelSP Nível3535353535]]]]mmmm[[[[    llll3030303030eeeevvvvNNNNíííí2525252525202020202000000200020002000200020004000400040004000400060006000600060006000800080008000800080001000010000100001000010000Tempo [s]Tempo [s]Tempo [s]Tempo [s]12000120001200012000120001400014000140001400014000160001600016000160001600018000180001800018000180002000020000200002000020000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba62626262626060606060p/ n=2000ffffp/ n=2000p/ n=2000p/ n=2000refrefrefreff ref p/ n=4000f ref p/ n=4000f ref p/ n=4000f ref p/ n=4000]]]]zzzzHHHH5858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656iiii545454545452525252525050505050484848484800000200020002000200020004000400040004000400060006000600060006000800080008000800080001000010000100001000010000Tempo [s]Tempo [s]Tempo [s]Tempo [s]12000120001200012000120001400014000140001400014000160001600016000160001600018000180001800018000180002000020000200002000020000 Figura B.2. Simulação A, teste de n, apresentando as curvas A11 e A12. 
Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040N p/ n=2000N p/ n=2000N p/ n=2000N p/ n=2000N p/ n=4000N p/ n=4000N p/ n=4000N p/ n=4000SP NívelSP NívelSP NívelSP Nível3535353535]]]]mmmm[[[[    llll3030303030eeeevvvvNNNNíííí2525252525202020202000000200020002000200020004000400040004000400060006000600060006000800080008000800080001000010000100001000010000Tempo [s]Tempo [s]Tempo [s]Tempo [s]12000120001200012000120001400014000140001400014000160001600016000160001600018000180001800018000180002000020000200002000020000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba62626262626060606060fp/ n=2000fffp/ n=2000p/ n=2000p/ n=2000refrefrefreff ref p/ n=4000f ref p/ n=4000f ref p/ n=4000f ref p/ n=4000]]]]zzzzHHHH5858585858[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656545454545452525252525050505050484848484800000200020002000200020004000400040004000400060006000600060006000800080008000800080001000010000100001000010000Tempo [s]Tempo [s]Tempo [s]Tempo [s]12000120001200012000120001400014000140001400014000160001600016000160001600018000180001800018000180002000020000200002000020000 Figura B.3. Simulação A, teste de n, apresentando as curvas A21 e A22. 
 118 Com o tempo de amostragem de 0,1 segundo, o valor de 4000 pontos usa os últimos 400 segundos para realizar a média da pertinência. No sistema real, espera-se que a configuração de n seja tão maior quanto o histórico de variação do Nível permita concluir sobre o nível corrente e tão pequeno quanto seja suficiente para um tempo de reação efetivo. 
2  SIMULAÇÃO B A influência dos patamares de velocidade também é bastante relevante. As três simulações realizadas  apresentaram  variação  no  valor  da  velocidade  alta  e  baixa  para  todos  os  outros parâmetros  constantes,  e  foram  plotadas  juntas  na  Figura  B.4.  Nesta  figura,  a  legenda  faz referência à diferença de magnitude entre a velocidade intermediária e a alta ou baixa, de forma que, por exemplo, a curva B1 indexada na Tabela B.1 como tendo os patamares [60 56 54 52 48], é  apresentada  na  Figura  B.4  como  2  Hz,  já  que  entre  os  patamares  56  e  54  Hz  há  2  Hz  de diferença. 
Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040N 2 HzN 2 HzN 2 HzN 2 HzN 1.5 HzN 1.5 HzN 1.5 HzN 1.5 HzN 1 HzN 1 HzN 1 HzN 1 HzSP NívelSP NívelSP NívelSP Nível3535353535]]]]mmmm[[[[    lllleeeevvvvííííNNNN30303030302525252525202020202000000200020002000200020004000400040004000400060006000600060006000800080008000800080001000010000100001000010000Tempo [s]Tempo [s]Tempo [s]Tempo [s]12000120001200012000120001400014000140001400014000160001600016000160001600018000180001800018000180002000020000200002000020000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba626262626260606060602 Hz2 Hz2 Hz2 Hz1.5 Hz1.5 Hz1.5 Hz1.5 Hzffffrefrefrefrefffffrefrefrefreffref 1 Hzfref 1 Hzfref 1 Hzfref 1 Hz]]]]zzzzHHHH5858585858[[[[    aaaaiiiiccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656545454545452525252525050505050484848484800000200020002000200020004000400040004000400060006000600060006000800080008000800080001000010000100001000010000Tempo [s]Tempo [s]Tempo [s]Tempo [s]12000120001200012000120001400014000140001400014000160001600016000160001600018000180001800018000180002000020000200002000020000 Figura B.4. Simulação B, teste de f, apresentando as curvas B1, B2 e B3. 
A  divisão  entre  os  patamares  de  velocidade  no  sinal  de  controle  é  clara,  já  que  as amplitudes são diferentes. No entanto, o parâmetro f não influencia no sinal de Nível, uma vez que a energia de controle é a mesma nos três casos, já que as áreas compensam sua diferença de  119 magnitude  com  períodos  diferentes,  implicando  em  melhor  sinal  de  controle  para  variações menores da velocidade de acionamento da bomba. Curiosamente, a quantidade de acionamentos do  patamar  é  a  mesma  para  os  três  casos,  o  que  é  lógico  uma  vez  que  o  sinal  de  resposta  do sistema é o mesmo. 
3  SIMULAÇÃO C A  última  das  simulações  para  o  período  de  20.000  segundos  é  o  teste  dos  valores  e  das janelas de histerese, genericamente agrupados e chamados de parâmetro  h. O valor apresentado na  legenda  para  cada  curva,  de  10%,  15%  e  20%  para  as  simulações  C1,  C2  e  C3 respectivamente, representa a janela de histerese δ. 
Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)40404040C1: h=10%C1: h=10%C1: h=10%C2: h=15%C2: h=15%C2: h=15%C3: h=20%C3: h=20%C3: h=20%SP NívelSP NívelSP Nível35353535]]]mmm[[[   lll30303030eeevvvNNNííí25252525202020200000200020002000200040004000400040006000600060006000800080008000800010000100001000010000Tempo [s]Tempo [s]Tempo [s]1200012000120001200014000140001400014000160001600016000160001800018000180001800020000200002000020000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba6262626260606060C1: h=10%C1: h=10%C1: h=10%C2: h=15%C2: h=15%C2: h=15%C3: h=20%C3: h=20%C3: h=20%]]]zzzHHH58585858[[[   aaacccnnnêêêüüüqqqeeerrrFFF56565656iii545454545252525250505050484848480000200020002000200040004000400040006000600060006000800080008000800010000100001000010000Tempo [s]Tempo [s]Tempo [s]1200012000120001200014000140001400014000160001600016000160001800018000180001800020000200002000020000 Figura B.5. Simulação C, teste de h, apresentando as curvas C1, C2 e C3. 
Curiosamente,  a  variação  isolada  do  parâmetro  h  –  ou  seja,  dos  parâmetros  µ  e  δ  –  não causou  modificações  muito  perceptíveis  nem  no  sinal  de  controle  tanto  quanto  na  resposta  do Nível. Podem-se notar os sinais caminhando muito próximos, e a quantidade de acionamentos do sinal de controle, igual – ou muito parecido – para os três. Isso pode se dever ao fato de que ao acionar um patamar de velocidade diferente, a variação imposta na resposta seja muito sensível,  120 fazendo-o  retornar  muito  rápido  para  a  faixa  de  trabalho  desejada.  Assim  sendo,  é  interessante que  maiores  faixas  de  histerese  sejam  testadas,  aliadas  também  a  efeitos  causados  por  outras variáveis  que  retardem  o  processo  de  retorno  do  nível  à  faixa  desejada,  como  os  dois  efeitos observados anteriormente. Assim sendo, este teste foi efetuado com maior cuidado na Simulação 1, onde pôde-se verificar uma correlação mais clara entre o parâmetro h e a qualidade do sinal de controle. 
4  SIMULAÇÃO 1 As  simulações  com  o  tempo  estendido  para  100.000  segundos  permitem  extrapolar  a dimensão  tomada  nas  avaliações  anteriores,  de  5.000  e  20.000  segundos,  pois  permitem  se  ter uma  idéia  do  funcionamento  da  bomba  ao  longo  de  mais  de  um  dia  inteiro.  Essa  perspectiva permite  entender  a  importância  da  minimização  das  pequenas  alterações  de  patamar  em quantidade e em duração, e qual a influência destas no processo de utilização da BCS. Para se ter uma  idéia  desta  diferença,  pode-se  analisar  a  Figura  B.6,  que  apresenta  a  simulação  1.1,  cujos parâmetros  são  muito  parecidos  com  os  da  simulação  A11,  apresentada  na  Figura  B.2  com n=2000. A diferença está na rampa de aceleração, que passa de 2% para 5%, e no parâmetro f, com  patamares  em  55  Hz  e  53  Hz  em  vez  de  56  Hz  e  52  Hz,  o  que  provoca  um  aumento  na duração dos patamares e uma manutenção de sua quantidade, conforme concluído na simulação B. 
 121 Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040NNNNSP NívelSP NívelSP NívelSP Nível3535353535]]]]mmmm[[[[    llll3030303030eeeevvvvNNNNíííí252525252520202020200000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba6262626262f reff reff reff ref6060606060]]]]zzzzHHHH5858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656iiii54545454545252525252505050505048484848480000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000 Figura B.6. Simulação 1, teste de h, apresentando a curva 1.1. 
Para o período de 20.000 segundos, os oito acionamentos de patamar baixo de velocidade refletem  em  algo  em  torno  de  40  acionamentos  para  o  tempo  de  100.000  segundos,  o  que representa  40  modificações  na  rotação  da  BCS  a  cada  dia  de  operação.  Como  o  objetivo  do controlador é reduzir a quantidade e aumentar a duração desses acionamentos, identifica-se aqui um grande potencial de melhoria através da manipulação das variáveis de configuração. 
Dando andamento à simulação 1, foram tomadas três medidas para evidenciar a relação do parâmetro  de  teste  –  a  histerese  –  com  as  saídas  desejadas  –  o  sinal  de  controle  e  o comportamento  do  nível.  A  primeira  foi  a  extensão  do  tempo  de  simulação,  o  que,  como  já discutido, permite avaliar melhor a qualidade do sinal de controle. A segunda foi a utilização de um  valor  mais  radical  para  a  janela  de  histerese,  o  que  é  possível  notar  pela  Tabela  B.1,  que apresenta as janelas de 10%, 20% e 40% para as simulações 1.1, 1.2 e 1.3 respectivamente. Esta configuração é condizente com a conclusão tomada na Simulação C. Finalmente, a última medida foi  a  redução  da  variação  dos  patamares  de  velocidade,  que  passaram  de  [60  56  54  52  48]  na simulação  C  para  [60  55  54  53  48]  nesta  simulação,  de  forma  a  permitir  que  a  variação  de  122 pertinência seja menor após acionar outra velocidade na bomba, e daí uma transição mais lenta para as três simulações realizadas. 
Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040NNNNSP NívelSP NívelSP NívelSP Nível3535353535]]]]mmmm[[[[    llll3030303030eeeevvvvNNNNíííí252525252520202020200000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba6262626262f reff reff reff ref6060606060]]]]zzzzHHHH5858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656iiii54545454545252525252505050505048484848480000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000 Figura B.7. Simulação 1, teste de h, apresentando a curva 1.2. 
A  Figura  B.7  apresenta  a  simulação  para  a  curva  1.2,  onde  foi  utilizada  a  janela  de  20% para a histerese. Diferentemente do ocorrido na outra bateria de testes, aqui já é perceptível que ao  aumentar  a  janela  de  histerese,  a  quantidade  de  disparos  da  rotação  é  reduzida,  pois  para pertinência retornar ao valor anterior toma-se mais tempo. Ainda assim, haveria por volta de 30 mudanças diárias na BCS. 
A  apresentação  das  três  curvas  em  gráficos  separados  mostrou-se  necessária  nesta simulação por efeito dos pequenos períodos de permanência dos patamares no sinal de controle. 
Além disso, com as curvas separadas, é possível tomar as comparações com as outras simulações de  forma  mais  clara.  Dessa  forma,  a  última  das  curvas  é  apresentada  na  Figura  B.8,  onde  os parâmetros  de  simulação  foram  alterados  para  valores  críticos.  A  intenção  desta  era  poder calibrar  o  controlador  para  uma  das  melhores  condições  operacionais  possíveis,  de  forma  a continuar a análise do sinal de controle que está em curso durante a simulação 1. 
 123 Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040NNNNSP NívelSP NívelSP NívelSP Nível3535353535]]]]mmmm[[[[    llll3030303030eeeevvvvNNNNíííí252525252520202020200000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba6262626262f reff reff reff ref6060606060]]]]zzzzHHHH5858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656iiii54545454545252525252505050505048484848480000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000 Figura B.8. Simulação 1, teste de h, apresentando a curva 1.3. 
Conforme a Tabela B.1, além da alteração em f, mantida constante frente às curvas 1.1 e 1.2, mas mais estreita em relação às outras simulações, o valor de n de 6000 pontos para a curva 1.3, provê uma redução na quantidade de transições e um aumento na duração de cada patamar de velocidade. Finalmente, uma janela de 40% para as velocidades alta e baixa, e um de 30% para as rotações  críticas,  permite  configurar  o  sinal  de  controle  para  o  resultado  apresentado  na  Figura B.8. 
Com o limiar de transição de velocidade configurado para pertinência 0 quando da redução da  amplitude  da  pertinência  média,  o  nível  oscilou  muito  mais  do  que  o  apresentado  para  os outros casos, apresentando um efeito direto da manipulação da histerese – quanto maior a janela, mais oscilatório estará a variação do nível. Esse efeito é positivo dado que deseja-se que ele varie dentro da faixa onde se  é possível controlar, ficando o máximo possível dentro desta região de variação. 
Da mesma forma, esta variação se refletiu na qualidade do sinal de controle, uma vez que a oscilação do nível era no sentido oposto do anterior à alteração do patamar, resultando num total de por volta de 10 transições de velocidade para  um dia inteiro de trabalho da bomba, ou seja,  124 uma média de uma alteração a cada 2 horas  e meia de trabalho. Percebe-se, por conseguinte, a necessidade de se fixar janelas grandes para a histerese, que permitam manipular as oscilações da variação da média no sentido desejado. 
5  SIMULAÇÃO 2 A simulação 2 testa a influência do parâmetro f utilizando uma janela de histerese maior, de 20%, e um n também maior, de 4000 pontos. Como a relação de f já foi testada na simulação B, e consolidada  através  da  comparação  da  simulação  1  com  a  C,  já  se  sabe  a  conclusão  a  tirar.  A diferença é que é possível analisar como os outros parâmetros se relacionam com os patamares de velocidade. 
Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040NNNNNNNNNNSP NívelSP NívelSP NívelSP NívelSP Nível2 Hz2 Hz2 Hz2 Hz1 Hz1 Hz1 Hz1 Hz3535353535]]]]mmmm[[[[    llll3030303030eeeevvvvNNNNíííí252525252520202020200000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba62626262626060606060ffffref 2 Hzref 2 Hzref 2 Hzref 2 Hzf reff reff reff ref1 Hz1 Hz1 Hz1 Hz]]]]zzzzHHHH5858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656iiii54545454545252525252505050505048484848480000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000 Figura B.9. Simulação 2, teste de f, apresentando as curvas 2.1 e 2.2. 
A Figura B.9 apresenta as curvas 2.1 e 2.2, referenciadas pela legenda como 2 hz e 1 Hz, para o período de 100.000 segundos. Novamente, os valores 2 Hz e 1 Hz representam a diferença entre o patamar de velocidade central e o adjacente. 
Conforme esperado, nota-se que com a variação do parâmetro f, quanto menor é a diferença entre patamares, maior é a permanência do sinal no patamar, tão embora o número de disparos  125 seja  igual,  pois  a  energia  de  controle  é  a  mesma.  No  entanto,  comparando  a  Figura  B.9  com  a Figura B.4 da simulação B, pode-se perceber que houve um número muito menor de transições por efeito de valor de 4000 pontos para o n. Da mesma forma, ao comparar a curva 2.1 da Figura B.9  (linha  contínua),  com  a  curva  A12  da  Figura  B.2  (linha  tracejada),  para  as  quais  a  única diferença além do tempo de simulação é a histerese, verifica-se que a janela maior, de 20% em vez de 10%, não apresentou mudança na qualidade do sinal de controle, conforme concluído na simulação  1,  onde  percebe-se  que  apenas  uma  janela  maior  têm  influência  significativa  na simulação. 
6  SIMULAÇÃO 3 Finalmente, utilizando o valor crítico da histerese – a janela de 40% conforme a Tabela B.1 
–  e  usando  n=6000,  foi  testada  a  influência  de  uma  leve  alteração,  de  1,5  Hz  para  1  Hz,  no parâmetro f, compondo as curvas 3.1 e 3.2 na Figura B.10. 
Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)Nível e setpoint (QB=20,PS=40)4040404040NNNNNNNNNNSP NívelSP NívelSP NívelSP NívelSP Nível1.5 Hz1.5 Hz1.5 Hz1.5 Hz1 Hz1 Hz1 Hz1 Hz3535353535]]]]mmmm[[[[    llll3030303030eeeevvvvNNNNíííí252525252520202020200000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000Sinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na BombaSinal de Controle Total na Bomba62626262626060606060ffffref 1.5 Hzref 1.5 Hzref 1.5 Hzref 1.5 Hzf reff reff reff ref]]]]zzzzHHHH1 Hz1 Hz1 Hz1 Hz5858585858[[[[    aaaaccccnnnnêêêêüüüüqqqqeeeerrrrFFFF5656565656iiii54545454545252525252505050505048484848480000010000100001000010000100002000020000200002000020000300003000030000300003000040000400004000040000400005000050000500005000050000Tempo [s]Tempo [s]Tempo [s]Tempo [s]6000060000600006000060000700007000070000700007000080000800008000080000800009000090000900009000090000100000100000100000100000100000 Figura B.10. Simulação 3, teste de f, apresentando as curvas 3.1 e 3.2. 
A curva 3.2 é idêntica à curva 1.3 apresentada na Figura B.8. Comparando-a com a curva 3.1, cujos parâmetros diferem apenas em f, de [60 55 54 53 48] na 3.2 para [60 55.5 54 52.5 48]  126 na 3.1, o efeito de aumento da duração dos patamares é perceptível, mas desta vez, a quantidade de disparos foi levemente diferente. Isso já é uma forma de expressão da janela de histerese e do valor de 4000 pontos de n, pois ambos agem sobre o cômputo de retorno do valor de pertinência média após a atuação do novo patamar de velocidade, criando uma situação onde se permanece mais  tempo  sujeito  às  influências  do  sistema.  Como  o  período  de  permanência  no  patamar aumenta, o retorno ao antigo patamar não instantâneo e uma variação na vazão de entrada pode afetar apenas o sistema que demorou mais para retornar. 
Além disso, é possível comparar a curva 3.2 com a 2.2, onde apenas a janela de histerese e o  valor  do  n  são  diferentes.  O  efeito  combinado  destas  duas  variáveis  alterou  a  quantidade  de disparos de 16 no segundo caso para 11 no primeiro ao longo de um dia inteiro de simulação. É 
uma variação bastante sensível frente a ao resultado após todos os ajustes realizados ao longo das simulações. 
7  CONCLUSÃO Os  testes  desenvolvidos  para  o  controlador  permitiram  partir  de  uma  configuração  com cerca  de  40  acionamentos  curtos  de  velocidades  diferentes  no  sinal  de  controle,  para  algo  em torno  de  apenas  10  para  1  dia  de  trabalho,  e  com  duração  maior,  o  que  está  condizente  com  a informação de campo de que cada alteração na rotação da bomba é seguida de um intervalo de 2 a  3  horas  no  procedimento  manual  com  acompanhamento  de  um  operador.  O  sistema  aqui simulado,  no  entanto,  utilizou  um  sinal  de  distúrbio  de  entrada  mais  agressivo  que  a  média encontrada  em  campo,  justamente  para  suplantar  a  desconfiança  inerente  a  um  modelo computacional. 
A robustez do sistema pode ainda ser aumentada de acordo com o comportamento previsto para  sinais  de  campo  de  vazão  de  entrada  através  do  ajuste  do  parâmetro  n,  que  pode  ser aumentado caso a constante de tempo do sistema permita - ou seja, se o tempo necessário para causar alteração significativa no nível, e consequentemente na pertinência média, for superior ao aqui simulado, de 600 segundos para n = 6000 pontos. Da mesma forma, o aumento da histerese para intervalos ainda maiores também é um recurso, tão embora este ajuste já se mostre próximo de um limite matemático dentro do universo de trabalho. Além disso, ainda há a calibração dos patamares  de  velocidade,  que  serão  necessários  para  cada  sistema,  e  passíveis  de  estudos  de vazão ideal para cada BCS. 
 127 De qualquer forma, há bastante credibilidade na flexibilidade que o controlador provê para se  ajustar  a  uma  situação  real.  É  necessário  que  haja  validação  experimental,  e  esta  pode  ser guiada pelas simulações computacionais desenvolvidas, de forma a criar uma gama de resultados passíveis de comparação e análise, tanto para refinamento do modelo, quanto para verificação do controlador. A agressividade do sistema em laboratório deve ser representada por um distúrbio de entrada, de forma que os experimentos pedem ser gradativamente reforçados para representar a situação  de  campo  ou  a  situação  computacional.  Também  é  possível  realizar  leituras experimentais,  e  usar  o  sinal  de  entrada  adquirido  em  laboratório  para  criar  situação  similar computacionalmente comparando o experimento com o simulador. 
 128  Apêndice C   Modelos computacionais utilizados no Simulink®             129 1  PLANTA  Figura C.1. Planta do controle de nível. No bloco do controle de nível, Planta Nível, fica a equação da variação do nível, Equação (3.4). No bloco da bomba, fica sua curva, Equação (3.1). 
No bloco de vazão de entrada, Qoe, fica o gerador de golfadas. 
 Figura C.2. Primeiro gerador de golfadas. 
 Figura C.3. Segundo gerador de golfadas – amplitude variável. 
 Figura C.4. Componente do segundo e terceiro gerador de golfadas – sinal em onda para gerar amplitude variável. 
 130  Figura C.5. Terceiro gerador de golfadas – amplitude e freqüência variáveis. Detalhe do gerador de sinais para teste do mecanismo de auto-ajuste. 
2  SUPERVISOR FUZZY PID  Figura C.6. Malha de controle do controlador Fuzzy PID supervisor. 
 Figura C.7. Controlador Fuzzy PID Supervisor. 
 131 3  MONITORAMENTO DA MÉDIA MÓVEL  Figura C.8. Malha de controle do controlador Monitoramento da Média Móvel. 
4  CLASSIFICADOR POR REGIÕES  Figura C.9. Malha de controle do controlador Classificador por Regiões. 
 Figura C.10. Controlador Classificador por Regiões. 
 132 5  HISTERESE COM AUTO-AJUSTE  Figura C.11. Malha de controle do controlador Histerese com Auto-ajuste. Detalhe dos geradores de sinal de referência. 
 Figura C.12. Controlador Histerese com auto-ajuste. Detalhes do classificador, da histerese, da parametrização da rotação de transição e dos filtros de saída. 
 Figura C.13. Componente do controlador Histerese com Auto-ajuste – parametrização da rotação de transição. 
 133 